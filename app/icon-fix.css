/* Global icon visibility fix */
/* Ensures all Lucide icons are visible with proper stroke color */
svg[class*="lucide"] {
  stroke: currentColor !important;
  fill: none !important;
  color: inherit !important;
}

/* Specific fix for bottom navigation/control icons */
[class*="bottom"] svg,
.fixed.bottom-0 svg,
button svg {
  stroke: currentColor !important;
  fill: none !important;
  color: inherit !important;
}

/* Ensure icons inherit text color from parent */
button svg {
  color: currentColor !important;
  stroke: currentColor !important;
  fill: none !important;
}

/* Safari-specific button interaction fixes - COMPREHENSIVE APPROACH */
button {
  -webkit-appearance: none;
  cursor: pointer;
  /* Hardware acceleration for better touch response */
  transform: translateZ(0);
  /* Explicit pointer events */
  pointer-events: auto !important;
  /* Touch optimization */
  -webkit-user-select: none;
  user-select: none;
  /* Minimum touch target size for mobile */
  min-width: 44px;
  min-height: 44px;
  /* Touch action optimization */
  touch-action: manipulation;
  /* Explicit button role */
  position: relative;
  z-index: 10;
  /* Force layout containment */
  contain: layout;
  /* Prevent iOS zoom on click */
  font-size: 16px !important;
  /* Enhanced Safari click handling */
  -webkit-tap-highlight-color: rgba(0,0,0,0.1);
  /* Force repaint for Safari rendering */
  will-change: transform, opacity;
}

/* Fix for Safari SVG rendering issues - Allow button SVGs to be clickable */
svg {
  pointer-events: none;
}

/* Ensure button content is visible - but allow clicks through */
button * {
  pointer-events: none;
}

/* Specific fix for Sign Out and similar buttons */
button svg[class*="log-out"],
button svg[class*="lucide-log-out"] {
  stroke: currentColor !important;
  fill: none !important;
  color: inherit !important;
}

/* MAIA-SOVEREIGN Mobile-specific button enhancements */
@media (max-width: 640px) {
  button {
    /* Increase touch target on mobile */
    min-width: 48px !important;
    min-height: 48px !important;
    /* Better touch response */
    -webkit-tap-highlight-color: rgba(0,0,0,0.1);
    /* Enhanced Safari mobile support */
    -webkit-touch-callout: none;
    -webkit-user-drag: none;
    /* Prevent text selection on touch */
    -moz-user-select: none;
    -ms-user-select: none;
    /* Force hardware acceleration for smoother interactions */
    backface-visibility: hidden;
    perspective: 1000px;
  }

  /* MAIA Header buttons specific optimization */
  header button,
  .header button,
  [class*="header"] button {
    padding: 12px !important;
    font-size: 16px !important;
    /* Enhanced click area for Safari mobile */
    position: relative;
    /* Ensure consistent button behavior */
    outline: none;
    border: none;
    background: transparent;
  }

  /* MAIA Voice/Text toggle and Mode selector buttons */
  button[aria-label*="Switch to"],
  button[aria-label*="Mode"],
  button[aria-label*="Sign Out"],
  button[aria-label*="Start Session"] {
    /* Enhanced Safari mobile compatibility */
    -webkit-transform: translateZ(0);
    transform: translateZ(0);
    /* Prevent double-tap zoom */
    touch-action: manipulation;
    /* Improve button responsiveness */
    -webkit-transition: all 0.2s ease;
    transition: all 0.2s ease;
  }
}

/* Safari-specific touch improvements */
@supports (-webkit-touch-callout: none) {
  button {
    -webkit-touch-callout: none;
    -webkit-tap-highlight-color: transparent;
    /* Force hardware acceleration */
    will-change: transform;
  }
}

/* EMERGENCY SAFARI BUTTON FIXES - Maximum Compatibility */
/* These fixes address Safari-specific button interaction issues */

/* Force all buttons to be clickable in Safari */
button,
input[type="button"],
input[type="submit"],
[role="button"] {
  /* Critical Safari fixes */
  -webkit-appearance: none !important;
  -moz-appearance: none !important;
  appearance: none !important;

  /* Ensure proper box-sizing */
  box-sizing: border-box !important;

  /* Force proper display */
  display: inline-flex !important;
  align-items: center !important;
  justify-content: center !important;

  /* Explicit cursor */
  cursor: pointer !important;

  /* Remove any inherited pointer-events blocking */
  pointer-events: auto !important;

  /* Force Safari to recognize touch events */
  -webkit-touch-callout: none !important;
  -webkit-user-select: none !important;
  -moz-user-select: none !important;
  user-select: none !important;

  /* Hardware acceleration for touch response */
  transform: translateZ(0) !important;
  backface-visibility: hidden !important;

  /* Enhanced click area */
  position: relative !important;
  overflow: visible !important;

  /* Prevent zoom on double-tap */
  touch-action: manipulation !important;

  /* Minimum size for touch targets */
  min-width: 44px !important;
  min-height: 44px !important;

  /* Safari font size (prevents zoom) */
  font-size: 16px !important;

  /* Force button behavior */
  border: none !important;
  background: transparent !important;
  outline: none !important;

  /* REMOVED Z-INDEX: Was creating transparent button blocks */
}

/* Safari SVG icon fixes */
button svg,
[role="button"] svg {
  /* Prevent SVG from blocking clicks */
  pointer-events: none !important;
  /* Ensure proper sizing */
  width: auto !important;
  height: auto !important;
  /* Force visibility */
  opacity: 1 !important;
  /* Inherit color properly */
  color: currentColor !important;
  stroke: currentColor !important;
  fill: none !important;
}

/* REMOVED: Emergency click-through fix that was blocking voice responses */

/* Specific MAIA voice/mode button fixes */
button[aria-label*="Switch"],
button[aria-label*="Mode"],
button[aria-label*="Start"],
button[aria-label*="Sign"],
button[aria-label*="Voice"],
button[aria-label*="Text"] {
  /* Critical Safari voice button fixes */
  -webkit-transform: translateZ(0) !important;
  transform: translateZ(0) !important;
  -webkit-backface-visibility: hidden !important;
  backface-visibility: hidden !important;

  /* Ensure click events work */
  -webkit-touch-callout: none !important;
  -webkit-tap-highlight-color: rgba(0,0,0,0.1) !important;

  /* Force proper button dimensions */
  padding: 12px !important;
  border-radius: 8px !important;

  /* Hardware acceleration */
  will-change: transform, opacity !important;

  /* Enhanced Safari compatibility */
  -webkit-user-drag: none !important;
  -webkit-appearance: none !important;
}

/* Safari mobile specific fixes */
@media screen and (max-width: 768px) {
  button {
    /* Larger touch targets on mobile Safari */
    min-width: 48px !important;
    min-height: 48px !important;
    padding: 12px !important;

    /* Better touch response */
    -webkit-tap-highlight-color: rgba(0,0,0,0.1) !important;
    -webkit-touch-callout: none !important;

    /* Force proper spacing */
    margin: 2px !important;
  }
}

/* Debug outline (remove in production) - helps identify clickable areas */
/*
button {
  outline: 2px solid rgba(255, 0, 0, 0.3) !important;
}
*/

/* Force ALL buttons to have AMBER TEXT with strong overrides */
button {
  background: rgba(255, 255, 255, 0.1) !important; /* Subtle background */
  color: #f59e0b !important; /* AMBER TEXT */
  border: 1px solid rgba(255, 255, 255, 0.2) !important;
}

/* Voice and Dialogue buttons - amber styling */
button:has(span:contains("Voice")),
button:has(:contains("Voice")),
button:has(span:contains("Dialogue")),
button:has(:contains("Dialogue")) {
  background: #f59e0b !important; /* Amber-500 */
  color: #ffffff !important;
  border: 1px solid #d97706 !important; /* Amber-600 border */
}

button:has(span:contains("Voice")):hover,
button:has(:contains("Voice")):hover,
button:has(span:contains("Dialogue")):hover,
button:has(:contains("Dialogue")):hover {
  background: #d97706 !important; /* Amber-600 on hover */
  color: #ffffff !important;
}

/* Targeted fix for brain icon and logout button visibility */
/* Only affects buttons in the header/nav area on the right side */
header button:not([class*="voice"]):not([class*="dialogue"]):not([class*="counsel"]):not([class*="scribe"]),
nav button:not([class*="voice"]):not([class*="dialogue"]):not([class*="counsel"]):not([class*="scribe"]),
button[aria-label*="Lab"],
button[aria-label*="logout"],
button[aria-label*="Log out"],
button[aria-label*="Settings"],
.header-actions button,
[class*="nav-right"] button {
  background: rgba(255, 255, 255, 0.1) !important;
  color: #ffffff !important;
  border: 1px solid rgba(255, 255, 255, 0.2) !important;
}

/* Hover states for visibility */
header button:not([class*="voice"]):not([class*="dialogue"]):not([class*="counsel"]):not([class*="scribe"]):hover,
nav button:not([class*="voice"]):not([class*="dialogue"]):not([class*="counsel"]):not([class*="scribe"]):hover,
button[aria-label*="Lab"]:hover,
button[aria-label*="logout"]:hover,
button[aria-label*="Log out"]:hover,
button[aria-label*="Settings"]:hover,
.header-actions button:hover,
[class*="nav-right"] button:hover {
  background: rgba(255, 255, 255, 0.2) !important;
  color: #ffffff !important;
}
