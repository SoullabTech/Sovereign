/**
 * Safari-specific fixes for z-index and pointer events
 * Addresses Safari's unique rendering and event handling behavior
 */

/* Safari z-index fix for dropdown menus */
[data-safari-dropdown] {
  position: fixed !important;
  z-index: 999999 !important;
  -webkit-transform: translateZ(0) !important;
  transform: translateZ(0) !important;
  isolation: isolate !important;
  pointer-events: auto !important;
  touch-action: manipulation !important;
  -webkit-overflow-scrolling: touch !important;
  -webkit-transform-style: preserve-3d !important;
  transform-style: preserve-3d !important;
}

/* Safari button click fix - Enhanced for better touch handling */
[data-safari-button], .safari-button-fix,
button, [role="button"], input[type="button"], input[type="submit"] {
  position: relative !important;
  z-index: 1 !important;
  pointer-events: auto !important;
  -webkit-touch-callout: none !important;
  -webkit-user-select: none !important;
  -webkit-tap-highlight-color: rgba(251, 191, 36, 0.2) !important;
  cursor: pointer !important;
  touch-action: manipulation !important;
  user-select: none !important;
  -webkit-appearance: none !important;
  appearance: none !important;
  -webkit-transform: translateZ(0) !important;
  transform: translateZ(0) !important;
  /* Enhanced for better Safari touch detection */
  -webkit-font-smoothing: antialiased !important;
  will-change: transform !important;
  outline: none !important;
}

/* Enhanced button interaction for Safari */
[data-safari-button]:hover {
  -webkit-transform: scale(1.02) !important;
  transform: scale(1.02) !important;
  transition: transform 0.1s ease !important;
}

[data-safari-button]:active {
  -webkit-transform: scale(0.98) !important;
  transform: scale(0.98) !important;
}

/* Prevent pointer events on child elements of buttons */
[data-safari-button] * {
  pointer-events: none !important;
  user-select: none !important;
  -webkit-user-select: none !important;
}

/* Safari stacking context fix */
.safari-stacking-fix {
  isolation: isolate;
  -webkit-transform: translateZ(0);
  transform: translateZ(0);
}

/* Ensure Safari respects z-index hierarchy */
.safari-z-high {
  position: relative;
  z-index: 999999;
}

.safari-z-critical {
  position: fixed !important;
  z-index: 999999 !important;
  isolation: isolate !important;
}

/* Safari dropdown positioning fix */
.safari-dropdown-positioning {
  position: fixed !important;
  will-change: transform;
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
}

/* Global Safari button fixes */
@media not all and (hover: hover) {
  /* Mobile Safari specific fixes */
  button, [role="button"] {
    touch-action: manipulation !important;
    -webkit-tap-highlight-color: rgba(0,0,0,0.1) !important;
  }
}

/* Force hardware acceleration on Safari */
.safari-accelerated {
  -webkit-transform: translateZ(0) !important;
  transform: translateZ(0) !important;
  will-change: transform !important;
}