(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[117],{3694:function(t,e,n){"use strict";n.d(e,{Z:function(){return l}});var r=n(2265);const s=t=>{const e=(t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,((t,e,n)=>n?n.toUpperCase():e.toLowerCase())))(t);return e.charAt(0).toUpperCase()+e.slice(1)},i=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.filter(((t,e,n)=>Boolean(t)&&""!==t.trim()&&n.indexOf(t)===e)).join(" ").trim()},o=t=>{for(const e in t)if(e.startsWith("aria-")||"role"===e||"title"===e)return!0};var a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const c=(0,r.forwardRef)(((t,e)=>{let{color:n="currentColor",size:s=24,strokeWidth:c=2,absoluteStrokeWidth:l,className:u="",children:h,iconNode:d,...f}=t;return(0,r.createElement)("svg",{ref:e,...a,width:s,height:s,stroke:n,strokeWidth:l?24*Number(c)/Number(s):c,className:i("lucide",u),...!h&&!o(f)&&{"aria-hidden":"true"},...f},[...d.map((t=>{let[e,n]=t;return(0,r.createElement)(e,n)})),...Array.isArray(h)?h:[h]])})),l=(t,e)=>{const n=(0,r.forwardRef)(((n,o)=>{let{className:a,...l}=n;return(0,r.createElement)(c,{ref:o,iconNode:e,className:i("lucide-".concat((u=s(t),u.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase())),"lucide-".concat(t),a),...l});var u}));return n.displayName=s(t),n}},7678:function(t,e,n){"use strict";n.d(e,{Z:function(){return r}});const r=(0,n(3694).Z)("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]])},3656:function(t,e,n){"use strict";n.d(e,{Z:function(){return r}});const r=(0,n(3694).Z)("brain",[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]])},1481:function(t,e,n){"use strict";n.d(e,{Z:function(){return r}});const r=(0,n(3694).Z)("compass",[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},1482:function(t,e,n){"use strict";n.d(e,{Z:function(){return r}});const r=(0,n(3694).Z)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])},9694:function(t,e,n){"use strict";n.d(e,{Z:function(){return r}});const r=(0,n(3694).Z)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},6365:function(t,e,n){"use strict";n.d(e,{Z:function(){return r}});const r=(0,n(3694).Z)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},6581:function(t,e,n){"use strict";n.d(e,{Z:function(){return r}});const r=(0,n(3694).Z)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},7470:function(t,e,n){"use strict";n.d(e,{Z:function(){return r}});const r=(0,n(3694).Z)("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]])},4354:function(t,e,n){"use strict";n.d(e,{Z:function(){return r}});const r=(0,n(3694).Z)("heart",[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]])},7497:function(t,e,n){"use strict";n.d(e,{Z:function(){return r}});const r=(0,n(3694).Z)("library",[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]])},9359:function(t,e,n){"use strict";n.d(e,{Z:function(){return r}});const r=(0,n(3694).Z)("message-square",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]])},7176:function(t,e,n){"use strict";n.d(e,{Z:function(){return r}});const r=(0,n(3694).Z)("mic-off",[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M16.95 16.95A7 7 0 0 1 5 12v-2",key:"cqa7eg"}],["path",{d:"M18.89 13.23A7 7 0 0 0 19 12v-2",key:"16hl24"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}]])},3485:function(t,e,n){"use strict";n.d(e,{Z:function(){return r}});const r=(0,n(3694).Z)("mic",[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]])},8566:function(t,e,n){"use strict";n.d(e,{Z:function(){return r}});const r=(0,n(3694).Z)("radio",[["path",{d:"M16.247 7.761a6 6 0 0 1 0 8.478",key:"1fwjs5"}],["path",{d:"M19.075 4.933a10 10 0 0 1 0 14.134",key:"ehdyv1"}],["path",{d:"M4.925 19.067a10 10 0 0 1 0-14.134",key:"1q22gi"}],["path",{d:"M7.753 16.239a6 6 0 0 1 0-8.478",key:"r2q7qm"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]])},1085:function(t,e,n){"use strict";n.d(e,{Z:function(){return r}});const r=(0,n(3694).Z)("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]])},892:function(t,e,n){"use strict";n.d(e,{Z:function(){return r}});const r=(0,n(3694).Z)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]])},5509:function(t,e,n){"use strict";n.d(e,{Z:function(){return r}});const r=(0,n(3694).Z)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},1090:function(t,e,n){"use strict";n.d(e,{Z:function(){return r}});const r=(0,n(3694).Z)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},6121:function(t,e,n){"use strict";n.d(e,{Z:function(){return r}});const r=(0,n(3694).Z)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]])},5257:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(6200).__importDefault(n(3038));e.default=class{constructor(t){var e,n;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=null!==(e=t.shouldThrowOnError)&&void 0!==e&&e,this.signal=t.signal,this.isMaybeSingle=null!==(n=t.isMaybeSingle)&&void 0!==n&&n,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let n=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then((async t=>{var e,n,s,i;let o=null,a=null,c=null,l=t.status,u=t.statusText;if(t.ok){if("HEAD"!==this.method){const n=await t.text();""===n||(a="text/csv"===this.headers.get("Accept")||this.headers.get("Accept")&&(null===(e=this.headers.get("Accept"))||void 0===e?void 0:e.includes("application/vnd.pgrst.plan+text"))?n:JSON.parse(n))}const r=null===(n=this.headers.get("Prefer"))||void 0===n?void 0:n.match(/count=(exact|planned|estimated)/),i=null===(s=t.headers.get("content-range"))||void 0===s?void 0:s.split("/");r&&i&&i.length>1&&(c=parseInt(i[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(a)&&(a.length>1?(o={code:"PGRST116",details:`Results contain ${a.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},a=null,c=null,l=406,u="Not Acceptable"):a=1===a.length?a[0]:null)}else{const e=await t.text();try{o=JSON.parse(e),Array.isArray(o)&&404===t.status&&(a=[],o=null,l=200,u="OK")}catch(h){404===t.status&&""===e?(l=204,u="No Content"):o={message:e}}if(o&&this.isMaybeSingle&&(null===(i=null===o||void 0===o?void 0:o.details)||void 0===i?void 0:i.includes("0 rows"))&&(o=null,l=200,u="OK"),o&&this.shouldThrowOnError)throw new r.default(o)}return{error:o,data:a,count:c,status:l,statusText:u}}));return this.shouldThrowOnError||(n=n.catch((t=>{var e,n,r;return{error:{message:`${null!==(e=null===t||void 0===t?void 0:t.name)&&void 0!==e?e:"FetchError"}: ${null===t||void 0===t?void 0:t.message}`,details:`${null!==(n=null===t||void 0===t?void 0:t.stack)&&void 0!==n?n:""}`,hint:"",code:`${null!==(r=null===t||void 0===t?void 0:t.code)&&void 0!==r?r:""}`},data:null,count:null,status:0,statusText:""}}))),n.then(t,e)}returns(){return this}overrideTypes(){return this}}},9590:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(6200),s=r.__importDefault(n(9824)),i=r.__importDefault(n(2495));class o{constructor(t,{headers:e={},schema:n,fetch:r}={}){this.url=t,this.headers=new Headers(e),this.schemaName=n,this.fetch=r}from(t){const e=new URL(`${this.url}/${t}`);return new s.default(e,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new o(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,e={},{head:n=!1,get:r=!1,count:s}={}){var o;let a;const c=new URL(`${this.url}/rpc/${t}`);let l;n||r?(a=n?"HEAD":"GET",Object.entries(e).filter((([t,e])=>void 0!==e)).map((([t,e])=>[t,Array.isArray(e)?`{${e.join(",")}}`:`${e}`])).forEach((([t,e])=>{c.searchParams.append(t,e)}))):(a="POST",l=e);const u=new Headers(this.headers);return s&&u.set("Prefer",`count=${s}`),new i.default({method:a,url:c,headers:u,schema:this.schemaName,body:l,fetch:null!==(o=this.fetch)&&void 0!==o?o:fetch})}}e.default=o},3038:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class n extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}e.default=n},2495:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(6200).__importDefault(n(3377)),s=new RegExp("[,()]");class i extends r.default{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}in(t,e){const n=Array.from(new Set(e)).map((t=>"string"===typeof t&&s.test(t)?`"${t}"`:`${t}`)).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,e){return"string"===typeof e?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return"string"===typeof e?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return"string"===typeof e?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:n,type:r}={}){let s="";"plain"===r?s="pl":"phrase"===r?s="ph":"websearch"===r&&(s="w");const i=void 0===n?"":`(${n})`;return this.url.searchParams.append(t,`${s}fts${i}.${e}`),this}match(t){return Object.entries(t).forEach((([t,e])=>{this.url.searchParams.append(t,`eq.${e}`)})),this}not(t,e,n){return this.url.searchParams.append(t,`not.${e}.${n}`),this}or(t,{foreignTable:e,referencedTable:n=e}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${t})`),this}filter(t,e,n){return this.url.searchParams.append(t,`${e}.${n}`),this}}e.default=i},9824:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(6200).__importDefault(n(2495));e.default=class{constructor(t,{headers:e={},schema:n,fetch:r}){this.url=t,this.headers=new Headers(e),this.schema=n,this.fetch=r}select(t,e){const{head:n=!1,count:s}=null!==e&&void 0!==e?e:{},i=n?"HEAD":"GET";let o=!1;const a=(null!==t&&void 0!==t?t:"*").split("").map((t=>/\s/.test(t)&&!o?"":('"'===t&&(o=!o),t))).join("");return this.url.searchParams.set("select",a),s&&this.headers.append("Prefer",`count=${s}`),new r.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:n=!0}={}){var s;if(e&&this.headers.append("Prefer",`count=${e}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const e=t.reduce(((t,e)=>t.concat(Object.keys(e))),[]);if(e.length>0){const t=[...new Set(e)].map((t=>`"${t}"`));this.url.searchParams.set("columns",t.join(","))}}return new r.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:null!==(s=this.fetch)&&void 0!==s?s:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:n=!1,count:s,defaultToNull:i=!0}={}){var o;if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),void 0!==e&&this.url.searchParams.set("on_conflict",e),s&&this.headers.append("Prefer",`count=${s}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const e=t.reduce(((t,e)=>t.concat(Object.keys(e))),[]);if(e.length>0){const t=[...new Set(e)].map((t=>`"${t}"`));this.url.searchParams.set("columns",t.join(","))}}return new r.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:null!==(o=this.fetch)&&void 0!==o?o:fetch})}update(t,{count:e}={}){var n;return e&&this.headers.append("Prefer",`count=${e}`),new r.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:null!==(n=this.fetch)&&void 0!==n?n:fetch})}delete({count:t}={}){var e;return t&&this.headers.append("Prefer",`count=${t}`),new r.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:null!==(e=this.fetch)&&void 0!==e?e:fetch})}}},3377:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(6200).__importDefault(n(5257));class s extends r.default{select(t){let e=!1;const n=(null!==t&&void 0!==t?t:"*").split("").map((t=>/\s/.test(t)&&!e?"":('"'===t&&(e=!e),t))).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:n,foreignTable:r,referencedTable:s=r}={}){const i=s?`${s}.order`:"order",o=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${o?`${o},`:""}${t}.${e?"asc":"desc"}${void 0===n?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:n=e}={}){const r="undefined"===typeof n?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${t}`),this}range(t,e,{foreignTable:n,referencedTable:r=n}={}){const s="undefined"===typeof r?"offset":`${r}.offset`,i="undefined"===typeof r?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${t}`),this.url.searchParams.set(i,""+(e-t+1)),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return"GET"===this.method?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:n=!1,buffers:r=!1,wal:s=!1,format:i="text"}={}){var o;const a=[t?"analyze":null,e?"verbose":null,n?"settings":null,r?"buffers":null,s?"wal":null].filter(Boolean).join("|"),c=null!==(o=this.headers.get("Accept"))&&void 0!==o?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${c}"; options=${a};`),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}}e.default=s},9640:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PostgrestError=e.PostgrestBuilder=e.PostgrestTransformBuilder=e.PostgrestFilterBuilder=e.PostgrestQueryBuilder=e.PostgrestClient=void 0;const r=n(6200),s=r.__importDefault(n(9590));e.PostgrestClient=s.default;const i=r.__importDefault(n(9824));e.PostgrestQueryBuilder=i.default;const o=r.__importDefault(n(2495));e.PostgrestFilterBuilder=o.default;const a=r.__importDefault(n(3377));e.PostgrestTransformBuilder=a.default;const c=r.__importDefault(n(5257));e.PostgrestBuilder=c.default;const l=r.__importDefault(n(3038));e.PostgrestError=l.default,e.default={PostgrestClient:s.default,PostgrestQueryBuilder:i.default,PostgrestFilterBuilder:o.default,PostgrestTransformBuilder:a.default,PostgrestBuilder:c.default,PostgrestError:l.default}},1545:function(t,e,n){"use strict";n.d(e,{eI:function(){return Ln}});var r=n(6200);class s extends Error{constructor(t,e="FunctionsError",n){super(t),this.name=e,this.context=n}}class i extends s{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class o extends s{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class a extends s{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var c;!function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"}(c||(c={}));class l{constructor(t,{headers:e={},customFetch:n,region:r=c.Any}={}){this.url=t,this.headers=e,this.region=r,this.fetch=(t=>t?(...e)=>t(...e):(...t)=>fetch(...t))(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return(0,r.__awaiter)(this,arguments,void 0,(function*(t,e={}){var n;let r,s;try{const{headers:c,method:l,body:u,signal:h,timeout:d}=e;let f={},{region:p}=e;p||(p=this.region);const m=new URL(`${this.url}/${t}`);let g;p&&"any"!==p&&(f["x-region"]=p,m.searchParams.set("forceFunctionRegion",p)),u&&(c&&!Object.prototype.hasOwnProperty.call(c,"Content-Type")||!c)?"undefined"!==typeof Blob&&u instanceof Blob||u instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",g=u):"string"===typeof u?(f["Content-Type"]="text/plain",g=u):"undefined"!==typeof FormData&&u instanceof FormData?g=u:(f["Content-Type"]="application/json",g=JSON.stringify(u)):g=u;let y=h;d&&(s=new AbortController,r=setTimeout((()=>s.abort()),d),h?(y=s.signal,h.addEventListener("abort",(()=>s.abort()))):y=s.signal);const v=yield this.fetch(m.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),c),body:g,signal:y}).catch((t=>{throw new i(t)})),w=v.headers.get("x-relay-error");if(w&&"true"===w)throw new o(v);if(!v.ok)throw new a(v);let b,_=(null!==(n=v.headers.get("Content-Type"))&&void 0!==n?n:"text/plain").split(";")[0].trim();return b="application/json"===_?yield v.json():"application/octet-stream"===_||"application/pdf"===_?yield v.blob():"text/event-stream"===_?v:"multipart/form-data"===_?yield v.formData():yield v.text(),{data:b,error:null,response:v}}catch(c){return{data:null,error:c,response:c instanceof a||c instanceof o?c.context:void 0}}finally{r&&clearTimeout(r)}}))}}var u=n(9640),h=n.t(u,2);const{PostgrestClient:d,PostgrestQueryBuilder:f,PostgrestFilterBuilder:p,PostgrestTransformBuilder:m,PostgrestBuilder:g,PostgrestError:y}=u||h;var v=n(5566);var w=class{static detectEnvironment(){var t;if("undefined"!==typeof WebSocket)return{type:"native",constructor:WebSocket};if("undefined"!==typeof globalThis&&"undefined"!==typeof globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};if("undefined"!==typeof n.g&&"undefined"!==typeof n.g.WebSocket)return{type:"native",constructor:n.g.WebSocket};if("undefined"!==typeof globalThis&&"undefined"!==typeof globalThis.WebSocketPair&&"undefined"===typeof globalThis.WebSocket)return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if("undefined"!==typeof globalThis&&globalThis.EdgeRuntime||"undefined"!==typeof navigator&&(null===(t=navigator.userAgent)||void 0===t?void 0:t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if("undefined"!==typeof v){const t=v.versions;if(t&&t.node){const e=t.node,n=parseInt(e.replace(/^v/,"").split(".")[0]);return n>=22?"undefined"!==typeof globalThis.WebSocket?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${n} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${n} detected without native WebSocket support.`,workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let e=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(e+=`\n\nSuggested solution: ${t.workaround}`),new Error(e)}static createWebSocket(t,e){return new(this.getWebSocketConstructor())(t,e)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return"native"===t.type||"ws"===t.type}catch(mt){return!1}}};const b="1.0.0",_=b,k=1e4;var S,E,T,x,A,R;!function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"}(S||(S={})),function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"}(E||(E={})),function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"}(T||(T={})),function(t){t.websocket="websocket"}(x||(x={})),function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"}(A||(A={}));class P{constructor(){this.HEADER_LENGTH=1,this.META_LENGTH=4,this.USER_BROADCAST_PUSH_META_LENGTH=5,this.KINDS={push:0,reply:1,broadcast:2,userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST="broadcast"}encode(t,e){if(this._isArrayBuffer(t.payload))return e(this._binaryEncodePush(t));if(t.event===this.BROADCAST&&!(t.payload instanceof ArrayBuffer)&&"string"===typeof t.payload.event)return e(this._binaryEncodeUserBroadcastPush(t));let n=[t.join_ref,t.ref,t.topic,t.event,t.payload];return e(JSON.stringify(n))}_binaryEncodePush(t){const{join_ref:e,ref:n,event:r,topic:s,payload:i}=t,o=this.META_LENGTH+e.length+n.length+s.length+r.length,a=new ArrayBuffer(this.HEADER_LENGTH+o);let c=new DataView(a),l=0;c.setUint8(l++,this.KINDS.push),c.setUint8(l++,e.length),c.setUint8(l++,n.length),c.setUint8(l++,s.length),c.setUint8(l++,r.length),Array.from(e,(t=>c.setUint8(l++,t.charCodeAt(0)))),Array.from(n,(t=>c.setUint8(l++,t.charCodeAt(0)))),Array.from(s,(t=>c.setUint8(l++,t.charCodeAt(0)))),Array.from(r,(t=>c.setUint8(l++,t.charCodeAt(0))));var u=new Uint8Array(a.byteLength+i.byteLength);return u.set(new Uint8Array(a),0),u.set(new Uint8Array(i),a.byteLength),u.buffer}_binaryEncodeUserBroadcastPush(t){var e;return this._isArrayBuffer(null===(e=t.payload)||void 0===e?void 0:e.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var e,n;const{join_ref:r,ref:s,topic:i}=t,o=t.payload.event,a=null!==(n=null===(e=t.payload)||void 0===e?void 0:e.payload)&&void 0!==n?n:new ArrayBuffer(0),c=this.USER_BROADCAST_PUSH_META_LENGTH+r.length+s.length+i.length+o.length,l=new ArrayBuffer(this.HEADER_LENGTH+c);let u=new DataView(l),h=0;u.setUint8(h++,this.KINDS.userBroadcastPush),u.setUint8(h++,r.length),u.setUint8(h++,s.length),u.setUint8(h++,i.length),u.setUint8(h++,o.length),u.setUint8(h++,this.BINARY_ENCODING),Array.from(r,(t=>u.setUint8(h++,t.charCodeAt(0)))),Array.from(s,(t=>u.setUint8(h++,t.charCodeAt(0)))),Array.from(i,(t=>u.setUint8(h++,t.charCodeAt(0)))),Array.from(o,(t=>u.setUint8(h++,t.charCodeAt(0))));var d=new Uint8Array(l.byteLength+a.byteLength);return d.set(new Uint8Array(l),0),d.set(new Uint8Array(a),l.byteLength),d.buffer}_encodeJsonUserBroadcastPush(t){var e,n;const{join_ref:r,ref:s,topic:i}=t,o=t.payload.event,a=null!==(n=null===(e=t.payload)||void 0===e?void 0:e.payload)&&void 0!==n?n:{},c=(new TextEncoder).encode(JSON.stringify(a)).buffer,l=this.USER_BROADCAST_PUSH_META_LENGTH+r.length+s.length+i.length+o.length,u=new ArrayBuffer(this.HEADER_LENGTH+l);let h=new DataView(u),d=0;h.setUint8(d++,this.KINDS.userBroadcastPush),h.setUint8(d++,r.length),h.setUint8(d++,s.length),h.setUint8(d++,i.length),h.setUint8(d++,o.length),h.setUint8(d++,this.JSON_ENCODING),Array.from(r,(t=>h.setUint8(d++,t.charCodeAt(0)))),Array.from(s,(t=>h.setUint8(d++,t.charCodeAt(0)))),Array.from(i,(t=>h.setUint8(d++,t.charCodeAt(0)))),Array.from(o,(t=>h.setUint8(d++,t.charCodeAt(0))));var f=new Uint8Array(u.byteLength+c.byteLength);return f.set(new Uint8Array(u),0),f.set(new Uint8Array(c),u.byteLength),f.buffer}decode(t,e){if(this._isArrayBuffer(t)){return e(this._binaryDecode(t))}if("string"===typeof t){const n=JSON.parse(t),[r,s,i,o,a]=n;return e({join_ref:r,ref:s,topic:i,event:o,payload:a})}return e({})}_binaryDecode(t){const e=new DataView(t),n=e.getUint8(0),r=new TextDecoder;switch(n){case this.KINDS.push:return this._decodePush(t,e,r);case this.KINDS.reply:return this._decodeReply(t,e,r);case this.KINDS.broadcast:return this._decodeBroadcast(t,e,r);case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,e,r)}}_decodePush(t,e,n){const r=e.getUint8(1),s=e.getUint8(2),i=e.getUint8(3);let o=this.HEADER_LENGTH+this.META_LENGTH-1;const a=n.decode(t.slice(o,o+r));o+=r;const c=n.decode(t.slice(o,o+s));o+=s;const l=n.decode(t.slice(o,o+i));o+=i;return{join_ref:a,ref:null,topic:c,event:l,payload:JSON.parse(n.decode(t.slice(o,t.byteLength)))}}_decodeReply(t,e,n){const r=e.getUint8(1),s=e.getUint8(2),i=e.getUint8(3),o=e.getUint8(4);let a=this.HEADER_LENGTH+this.META_LENGTH;const c=n.decode(t.slice(a,a+r));a+=r;const l=n.decode(t.slice(a,a+s));a+=s;const u=n.decode(t.slice(a,a+i));a+=i;const h=n.decode(t.slice(a,a+o));a+=o;const d={status:h,response:JSON.parse(n.decode(t.slice(a,t.byteLength)))};return{join_ref:c,ref:l,topic:u,event:T.reply,payload:d}}_decodeBroadcast(t,e,n){const r=e.getUint8(1),s=e.getUint8(2);let i=this.HEADER_LENGTH+2;const o=n.decode(t.slice(i,i+r));i+=r;const a=n.decode(t.slice(i,i+s));i+=s;return{join_ref:null,ref:null,topic:o,event:a,payload:JSON.parse(n.decode(t.slice(i,t.byteLength)))}}_decodeUserBroadcast(t,e,n){const r=e.getUint8(1),s=e.getUint8(2),i=e.getUint8(3),o=e.getUint8(4);let a=this.HEADER_LENGTH+4;const c=n.decode(t.slice(a,a+r));a+=r;const l=n.decode(t.slice(a,a+s));a+=s;const u=n.decode(t.slice(a,a+i));a+=i;const h=t.slice(a,t.byteLength),d=o===this.JSON_ENCODING?JSON.parse(n.decode(h)):h,f={type:this.BROADCAST,event:l,payload:d};return i>0&&(f.meta=JSON.parse(u)),{join_ref:null,ref:null,topic:c,event:this.BROADCAST,payload:f}}_isArrayBuffer(t){var e;return t instanceof ArrayBuffer||"ArrayBuffer"===(null===(e=null===t||void 0===t?void 0:t.constructor)||void 0===e?void 0:e.name)}}class O{constructor(t,e){this.callback=t,this.timerCalc=e,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=e}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout((()=>{this.tries=this.tries+1,this.callback()}),this.timerCalc(this.tries+1))}}!function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"}(R||(R={}));const j=(t,e,n={})=>{var r;const s=null!==(r=n.skipTypes)&&void 0!==r?r:[];return e?Object.keys(e).reduce(((n,r)=>(n[r]=C(r,t,e,s),n)),{}):{}},C=(t,e,n,r)=>{const s=e.find((e=>e.name===t)),i=null===s||void 0===s?void 0:s.type,o=n[t];return i&&!r.includes(i)?I(i,o):M(o)},I=(t,e)=>{if("_"===t.charAt(0)){const n=t.slice(1,t.length);return D(e,n)}switch(t){case R.bool:return $(e);case R.float4:case R.float8:case R.int2:case R.int4:case R.int8:case R.numeric:case R.oid:return L(e);case R.json:case R.jsonb:return U(e);case R.timestamp:return B(e);case R.abstime:case R.date:case R.daterange:case R.int4range:case R.int8range:case R.money:case R.reltime:case R.text:case R.time:case R.timestamptz:case R.timetz:case R.tsrange:case R.tstzrange:default:return M(e)}},M=t=>t,$=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},L=t=>{if("string"===typeof t){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},U=t=>{if("string"===typeof t)try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},D=(t,e)=>{if("string"!==typeof t)return t;const n=t.length-1,r=t[n];if("{"===t[0]&&"}"===r){let r;const i=t.slice(1,n);try{r=JSON.parse("["+i+"]")}catch(s){r=i?i.split(","):[]}return r.map((t=>I(e,t)))}return t},B=t=>"string"===typeof t?t.replace(" ","T"):t,N=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),""===e.pathname||"/"===e.pathname?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class V{constructor(t,e,n={},r=1e4){this.channel=t,this.event=e,this.payload=n,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,e){var n;return this._hasReceived(t)&&e(null===(n=this.receivedResp)||void 0===n?void 0:n.response),this.recHooks.push({status:t,callback:e}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},(t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)})),this.timeoutTimer=setTimeout((()=>{this.trigger("timeout",{})}),this.timeout)}trigger(t,e){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:e})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:e}){this.recHooks.filter((e=>e.status===t)).forEach((t=>t.callback(e)))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var F,q,W,z;!function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"}(F||(F={}));class H{constructor(t,e){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(null===e||void 0===e?void 0:e.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},(t=>{const{onJoin:e,onLeave:n,onSync:r}=this.caller;this.joinRef=this.channel._joinRef(),this.state=H.syncState(this.state,t,e,n),this.pendingDiffs.forEach((t=>{this.state=H.syncDiff(this.state,t,e,n)})),this.pendingDiffs=[],r()})),this.channel._on(n.diff,{},(t=>{const{onJoin:e,onLeave:n,onSync:r}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(t):(this.state=H.syncDiff(this.state,t,e,n),r())})),this.onJoin(((t,e,n)=>{this.channel._trigger("presence",{event:"join",key:t,currentPresences:e,newPresences:n})})),this.onLeave(((t,e,n)=>{this.channel._trigger("presence",{event:"leave",key:t,currentPresences:e,leftPresences:n})})),this.onSync((()=>{this.channel._trigger("presence",{event:"sync"})}))}static syncState(t,e,n,r){const s=this.cloneDeep(t),i=this.transformState(e),o={},a={};return this.map(s,((t,e)=>{i[t]||(a[t]=e)})),this.map(i,((t,e)=>{const n=s[t];if(n){const r=e.map((t=>t.presence_ref)),s=n.map((t=>t.presence_ref)),i=e.filter((t=>s.indexOf(t.presence_ref)<0)),c=n.filter((t=>r.indexOf(t.presence_ref)<0));i.length>0&&(o[t]=i),c.length>0&&(a[t]=c)}else o[t]=e})),this.syncDiff(s,{joins:o,leaves:a},n,r)}static syncDiff(t,e,n,r){const{joins:s,leaves:i}={joins:this.transformState(e.joins),leaves:this.transformState(e.leaves)};return n||(n=()=>{}),r||(r=()=>{}),this.map(s,((e,r)=>{var s;const i=null!==(s=t[e])&&void 0!==s?s:[];if(t[e]=this.cloneDeep(r),i.length>0){const n=t[e].map((t=>t.presence_ref)),r=i.filter((t=>n.indexOf(t.presence_ref)<0));t[e].unshift(...r)}n(e,i,r)})),this.map(i,((e,n)=>{let s=t[e];if(!s)return;const i=n.map((t=>t.presence_ref));s=s.filter((t=>i.indexOf(t.presence_ref)<0)),t[e]=s,r(e,s,n),0===s.length&&delete t[e]})),t}static map(t,e){return Object.getOwnPropertyNames(t).map((n=>e(n,t[n])))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce(((e,n)=>{const r=t[n];return e[n]="metas"in r?r.metas.map((t=>(t.presence_ref=t.phx_ref,delete t.phx_ref,delete t.phx_ref_prev,t))):r,e}),{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}!function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"}(q||(q={})),function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"}(W||(W={})),function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"}(z||(z={}));class K{constructor(t,e={config:{}},n){var r,s;if(this.topic=t,this.params=e,this.socket=n,this.bindings={},this.state=E.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},e.config),this.timeout=this.socket.timeout,this.joinPush=new V(this,T.join,this.params,this.timeout),this.rejoinTimer=new O((()=>this._rejoinUntilConnected()),this.socket.reconnectAfterMs),this.joinPush.receive("ok",(()=>{this.state=E.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach((t=>t.send())),this.pushBuffer=[]})),this._onClose((()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=E.closed,this.socket._remove(this)})),this._onError((t=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,t),this.state=E.errored,this.rejoinTimer.scheduleTimeout())})),this.joinPush.receive("timeout",(()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=E.errored,this.rejoinTimer.scheduleTimeout())})),this.joinPush.receive("error",(t=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,t),this.state=E.errored,this.rejoinTimer.scheduleTimeout())})),this._on(T.reply,{},((t,e)=>{this._trigger(this._replyEventName(e),t)})),this.presence=new H(this),this.broadcastEndpointURL=N(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(null===(s=null===(r=this.params.config)||void 0===r?void 0:r.broadcast)||void 0===s?void 0:s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,e=this.timeout){var n,r,s;if(this.socket.isConnected()||this.socket.connect(),this.state==E.closed){const{config:{broadcast:i,presence:o,private:a}}=this.params,c=null!==(r=null===(n=this.bindings.postgres_changes)||void 0===n?void 0:n.map((t=>t.filter)))&&void 0!==r?r:[],l=!!this.bindings[W.PRESENCE]&&this.bindings[W.PRESENCE].length>0||!0===(null===(s=this.params.config.presence)||void 0===s?void 0:s.enabled),u={},h={broadcast:i,presence:Object.assign(Object.assign({},o),{enabled:l}),postgres_changes:c,private:a};this.socket.accessTokenValue&&(u.access_token=this.socket.accessTokenValue),this._onError((e=>null===t||void 0===t?void 0:t(z.CHANNEL_ERROR,e))),this._onClose((()=>null===t||void 0===t?void 0:t(z.CLOSED))),this.updateJoinPayload(Object.assign({config:h},u)),this.joinedOnce=!0,this._rejoin(e),this.joinPush.receive("ok",(async({postgres_changes:e})=>{var n;if(this.socket.setAuth(),void 0!==e){const r=this.bindings.postgres_changes,s=null!==(n=null===r||void 0===r?void 0:r.length)&&void 0!==n?n:0,i=[];for(let n=0;n<s;n++){const s=r[n],{filter:{event:o,schema:a,table:c,filter:l}}=s,u=e&&e[n];if(!u||u.event!==o||u.schema!==a||u.table!==c||u.filter!==l)return this.unsubscribe(),this.state=E.errored,void(null===t||void 0===t||t(z.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));i.push(Object.assign(Object.assign({},s),{id:u.id}))}return this.bindings.postgres_changes=i,void(t&&t(z.SUBSCRIBED))}null===t||void 0===t||t(z.SUBSCRIBED)})).receive("error",(e=>{this.state=E.errored,null===t||void 0===t||t(z.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(e).join(", ")||"error")))})).receive("timeout",(()=>{null===t||void 0===t||t(z.TIMED_OUT)}))}return this}presenceState(){return this.presence.state}async track(t,e={}){return await this.send({type:"presence",event:"track",payload:t},e.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,e,n){return this.state===E.joined&&t===W.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then((()=>this.subscribe()))),this._on(t,e,n)}async httpSend(t,e,n={}){var r;const s=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(void 0===e||null===e)return Promise.reject("Payload is required for httpSend()");const i={method:"POST",headers:{Authorization:s,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:e,private:this.private}]})},o=await this._fetchWithTimeout(this.broadcastEndpointURL,i,null!==(r=n.timeout)&&void 0!==r?r:this.timeout);if(202===o.status)return{success:!0};let a=o.statusText;try{const t=await o.json();a=t.error||t.message||a}catch(c){}return Promise.reject(new Error(a))}async send(t,e={}){var n,r;if(this._canPush()||"broadcast"!==t.type)return new Promise((n=>{var r,s,i;const o=this._push(t.type,t,e.timeout||this.timeout);"broadcast"!==t.type||(null===(i=null===(s=null===(r=this.params)||void 0===r?void 0:r.config)||void 0===s?void 0:s.broadcast)||void 0===i?void 0:i.ack)||n("ok"),o.receive("ok",(()=>n("ok"))),o.receive("error",(()=>n("error"))),o.receive("timeout",(()=>n("timed out")))}));{console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=t,a={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const t=await this._fetchWithTimeout(this.broadcastEndpointURL,a,null!==(n=e.timeout)&&void 0!==n?n:this.timeout);return await(null===(r=t.body)||void 0===r?void 0:r.cancel()),t.ok?"ok":"error"}catch(s){return"AbortError"===s.name?"timed out":"error"}}}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=E.leaving;const e=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(T.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise((r=>{n=new V(this,T.leave,{},t),n.receive("ok",(()=>{e(),r("ok")})).receive("timeout",(()=>{e(),r("timed out")})).receive("error",(()=>{r("error")})),n.send(),this._canPush()||n.trigger("ok",{})})).finally((()=>{null===n||void 0===n||n.destroy()}))}teardown(){this.pushBuffer.forEach((t=>t.destroy())),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=E.closed,this.bindings={}}async _fetchWithTimeout(t,e,n){const r=new AbortController,s=setTimeout((()=>r.abort()),n),i=await this.socket.fetch(t,Object.assign(Object.assign({},e),{signal:r.signal}));return clearTimeout(s),i}_push(t,e,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new V(this,t,e,n);return this._canPush()?r.send():this._addToPushBuffer(r),r}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>100){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(t,e,n){return e}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,e,n){var r,s;const i=t.toLocaleLowerCase(),{close:o,error:a,leave:c,join:l}=T;if(n&&[o,a,c,l].indexOf(i)>=0&&n!==this._joinRef())return;let u=this._onMessage(i,e,n);if(e&&!u)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?null===(r=this.bindings.postgres_changes)||void 0===r||r.filter((t=>{var e,n,r;return"*"===(null===(e=t.filter)||void 0===e?void 0:e.event)||(null===(r=null===(n=t.filter)||void 0===n?void 0:n.event)||void 0===r?void 0:r.toLocaleLowerCase())===i})).map((t=>t.callback(u,n))):null===(s=this.bindings[i])||void 0===s||s.filter((t=>{var n,r,s,o,a,c;if(["broadcast","presence","postgres_changes"].includes(i)){if("id"in t){const i=t.id,o=null===(n=t.filter)||void 0===n?void 0:n.event;return i&&(null===(r=e.ids)||void 0===r?void 0:r.includes(i))&&("*"===o||(null===o||void 0===o?void 0:o.toLocaleLowerCase())===(null===(s=e.data)||void 0===s?void 0:s.type.toLocaleLowerCase()))}{const n=null===(a=null===(o=null===t||void 0===t?void 0:t.filter)||void 0===o?void 0:o.event)||void 0===a?void 0:a.toLocaleLowerCase();return"*"===n||n===(null===(c=null===e||void 0===e?void 0:e.event)||void 0===c?void 0:c.toLocaleLowerCase())}}return t.type.toLocaleLowerCase()===i})).map((t=>{if("object"===typeof u&&"ids"in u){const t=u.data,{schema:e,table:n,commit_timestamp:r,type:s,errors:i}=t,o={schema:e,table:n,commit_timestamp:r,eventType:s,new:{},old:{},errors:i};u=Object.assign(Object.assign({},o),this._getPayloadRecords(t))}t.callback(u,n)}))}_isClosed(){return this.state===E.closed}_isJoined(){return this.state===E.joined}_isJoining(){return this.state===E.joining}_isLeaving(){return this.state===E.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,e,n){const r=t.toLocaleLowerCase(),s={type:r,filter:e,callback:n};return this.bindings[r]?this.bindings[r].push(s):this.bindings[r]=[s],this}_off(t,e){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter((t=>{var r;return!((null===(r=t.type)||void 0===r?void 0:r.toLocaleLowerCase())===n&&K.isEqual(t.filter,e))}))),this}static isEqual(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(T.close,{},t)}_onError(t){this._on(T.error,{},(e=>t(e)))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=E.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const e={new:{},old:{}};return"INSERT"!==t.type&&"UPDATE"!==t.type||(e.new=j(t.columns,t.record)),"UPDATE"!==t.type&&"DELETE"!==t.type||(e.old=j(t.columns,t.old_record)),e}}const Z=()=>{},J=25e3,G=10,X=100,Y=[1e3,2e3,5e3,1e4];class Q{constructor(t,e){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=k,this.transport=null,this.heartbeatIntervalMs=J,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Z,this.ref=0,this.reconnectTimer=null,this.vsn=_,this.logger=Z,this.conn=null,this.sendBuffer=[],this.serializer=new P,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=t=>t?(...e)=>t(...e):(...t)=>fetch(...t),!(null===(n=null===e||void 0===e?void 0:e.params)||void 0===n?void 0:n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=e.params.apikey,this.endPoint=`${t}/${x.websocket}`,this.httpEndpoint=N(t),this._initializeOptions(e),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(null===e||void 0===e?void 0:e.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=w.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const e=t.message;if(e.includes("Node.js"))throw new Error(`${e}\n\nTo use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })`);throw new Error(`WebSocket not available: ${e}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,e){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout((()=>{this._setConnectionState("disconnected")}),100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},"function"===typeof this.conn.close&&(t?this.conn.close(t,null!==e&&void 0!==e?e:""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const e=await t.unsubscribe();return 0===this.channels.length&&this.disconnect(),e}async removeAllChannels(){const t=await Promise.all(this.channels.map((t=>t.unsubscribe())));return this.channels=[],this.disconnect(),t}log(t,e,n){this.logger(t,e,n)}connectionState(){switch(this.conn&&this.conn.readyState){case S.connecting:return A.Connecting;case S.open:return A.Open;case S.closing:return A.Closing;default:return A.Closed}}isConnected(){return this.connectionState()===A.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(t,e={config:{}}){const n=`realtime:${t}`,r=this.getChannels().find((t=>t.topic===n));if(r)return r;{const n=new K(`realtime:${t}`,e,this);return this.channels.push(n),n}}push(t){const{topic:e,event:n,payload:r,ref:s}=t,i=()=>{this.encode(t,(t=>{var e;null===(e=this.conn)||void 0===e||e.send(t)}))};this.log("push",`${e} ${n} (${s})`,r),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(e){this.log("error","error in heartbeat callback",e)}return this._wasManualDisconnect=!1,null===(t=this.conn)||void 0===t||t.close(1e3,"heartbeat timeout"),void setTimeout((()=>{var t;this.isConnected()||null===(t=this.reconnectTimer)||void 0===t||t.scheduleTimeout()}),X)}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(e){this.log("error","error in heartbeat callback",e)}this._setAuthSafely("heartbeat")}else try{this.heartbeatCallback("disconnected")}catch(e){this.log("error","error in heartbeat callback",e)}}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach((t=>t())),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let e=this.channels.find((e=>e.topic===t&&(e._isJoined()||e._isJoining())));e&&(this.log("transport",`leaving duplicate topic "${t}"`),e.unsubscribe())}_remove(t){this.channels=this.channels.filter((e=>e.topic!==t.topic))}_onConnMessage(t){this.decode(t.data,(t=>{if("phoenix"===t.topic&&"phx_reply"===t.event)try{this.heartbeatCallback("ok"===t.payload.status?"ok":"error")}catch(a){this.log("error","error in heartbeat callback",a)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:e,event:n,payload:r,ref:s}=t,i=s?`(${s})`:"",o=r.status||"";this.log("receive",`${o} ${e} ${n} ${i}`.trim(),r),this.channels.filter((t=>t._isMember(e))).forEach((t=>t._trigger(n,r,s))),this._triggerStateCallbacks("message",t)}))}_clearTimer(t){var e;"heartbeat"===t&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===t&&(null===(e=this.reconnectTimer)||void 0===e||e.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){if(this.conn){if(this.conn.readyState===S.open||this.conn.readyState===S.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach((t=>t.teardown()))}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`);(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then((()=>{this.flushSendBuffer()})).catch((t=>{this.log("error","error waiting for auth on connect",t),this.flushSendBuffer()})),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval((()=>this.sendHeartbeat()),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{"keepAlive"===t.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var e;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null===(e=this.reconnectTimer)||void 0===e||e.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach((t=>t._trigger(T.error)))}_appendParams(t,e){if(0===Object.keys(e).length)return t;const n=t.match(/\?/)?"&":"?";return`${t}${n}${new URLSearchParams(e)}`}_workerObjectUrl(t){let e;if(t)e=t;else{const t=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});e=URL.createObjectURL(t)}return e}_setConnectionState(t,e=!1){this._connectionState=t,"connecting"===t?this._wasManualDisconnect=!1:"disconnecting"===t&&(this._wasManualDisconnect=e)}async _performAuth(t=null){let e;e=t||(this.accessToken?await this.accessToken():this.accessTokenValue),this.accessTokenValue!=e&&(this.accessTokenValue=e,this.channels.forEach((t=>{const n={access_token:e,version:"realtime-js/2.81.1"};e&&t.updateJoinPayload(n),t.joinedOnce&&t._isJoined()&&t._push(T.access_token,{access_token:e})})))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch((e=>{this.log("error",`error setting auth in ${t}`,e)}))}_triggerStateCallbacks(t,e){try{this.stateChangeCallbacks[t].forEach((n=>{try{n(e)}catch(r){this.log("error",`error in ${t} callback`,r)}}))}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new O((async()=>{setTimeout((async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()}),G)}),this.reconnectAfterMs)}_initializeOptions(t){var e,n,r,s,i,o,a,c,l,u,h,d;switch(this.transport=null!==(e=null===t||void 0===t?void 0:t.transport)&&void 0!==e?e:null,this.timeout=null!==(n=null===t||void 0===t?void 0:t.timeout)&&void 0!==n?n:k,this.heartbeatIntervalMs=null!==(r=null===t||void 0===t?void 0:t.heartbeatIntervalMs)&&void 0!==r?r:J,this.worker=null!==(s=null===t||void 0===t?void 0:t.worker)&&void 0!==s&&s,this.accessToken=null!==(i=null===t||void 0===t?void 0:t.accessToken)&&void 0!==i?i:null,this.heartbeatCallback=null!==(o=null===t||void 0===t?void 0:t.heartbeatCallback)&&void 0!==o?o:Z,this.vsn=null!==(a=null===t||void 0===t?void 0:t.vsn)&&void 0!==a?a:_,(null===t||void 0===t?void 0:t.params)&&(this.params=t.params),(null===t||void 0===t?void 0:t.logger)&&(this.logger=t.logger),((null===t||void 0===t?void 0:t.logLevel)||(null===t||void 0===t?void 0:t.log_level))&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!==(c=null===t||void 0===t?void 0:t.reconnectAfterMs)&&void 0!==c?c:t=>Y[t-1]||1e4,this.vsn){case b:this.encode=null!==(l=null===t||void 0===t?void 0:t.encode)&&void 0!==l?l:(t,e)=>e(JSON.stringify(t)),this.decode=null!==(u=null===t||void 0===t?void 0:t.decode)&&void 0!==u?u:(t,e)=>e(JSON.parse(t));break;case"2.0.0":this.encode=null!==(h=null===t||void 0===t?void 0:t.encode)&&void 0!==h?h:this.serializer.encode.bind(this.serializer),this.decode=null!==(d=null===t||void 0===t?void 0:t.decode)&&void 0!==d?d:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if("undefined"!==typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=null===t||void 0===t?void 0:t.workerUrl}}}class tt extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function et(t){return"object"===typeof t&&null!==t&&"__isStorageError"in t}class nt extends tt{constructor(t,e,n){super(t),this.name="StorageApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class rt extends tt{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}}const st=t=>t?(...e)=>t(...e):(...t)=>fetch(...t),it=t=>{if(Array.isArray(t))return t.map((t=>it(t)));if("function"===typeof t||t!==Object(t))return t;const e={};return Object.entries(t).forEach((([t,n])=>{const r=t.replace(/([-_][a-z])/gi,(t=>t.toUpperCase().replace(/[-_]/g,"")));e[r]=it(n)})),e},ot=t=>{var e;return t.msg||t.message||t.error_description||("string"===typeof t.error?t.error:null===(e=t.error)||void 0===e?void 0:e.message)||JSON.stringify(t)},at=(t,e,n)=>(0,r.__awaiter)(void 0,void 0,void 0,(function*(){const r=yield Response;t instanceof r&&!(null===n||void 0===n?void 0:n.noResolveJson)?t.json().then((n=>{const r=t.status||500,s=(null===n||void 0===n?void 0:n.statusCode)||r+"";e(new nt(ot(n),r,s))})).catch((t=>{e(new rt(ot(t),t))})):e(new rt(ot(t),t))})),ct=(t,e,n,r)=>{const s={method:t,headers:(null===e||void 0===e?void 0:e.headers)||{}};return"GET"!==t&&r?((t=>{if("object"!==typeof t||null===t)return!1;const e=Object.getPrototypeOf(t);return(null===e||e===Object.prototype||null===Object.getPrototypeOf(e))&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)})(r)?(s.headers=Object.assign({"Content-Type":"application/json"},null===e||void 0===e?void 0:e.headers),s.body=JSON.stringify(r)):s.body=r,(null===e||void 0===e?void 0:e.duplex)&&(s.duplex=e.duplex),Object.assign(Object.assign({},s),n)):s};function lt(t,e,n,s,i,o){return(0,r.__awaiter)(this,void 0,void 0,(function*(){return new Promise(((r,a)=>{t(n,ct(e,s,i,o)).then((t=>{if(!t.ok)throw t;return(null===s||void 0===s?void 0:s.noResolveJson)?t:t.json()})).then((t=>r(t))).catch((t=>at(t,a,s)))}))}))}function ut(t,e,n,s){return(0,r.__awaiter)(this,void 0,void 0,(function*(){return lt(t,"GET",e,n,s)}))}function ht(t,e,n,s,i){return(0,r.__awaiter)(this,void 0,void 0,(function*(){return lt(t,"POST",e,s,i,n)}))}function dt(t,e,n,s,i){return(0,r.__awaiter)(this,void 0,void 0,(function*(){return lt(t,"PUT",e,s,i,n)}))}function ft(t,e,n,s,i){return(0,r.__awaiter)(this,void 0,void 0,(function*(){return lt(t,"DELETE",e,s,i,n)}))}class pt{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}execute(){return(0,r.__awaiter)(this,void 0,void 0,(function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(et(t))return{data:null,error:t};throw t}}))}}var mt;mt=Symbol.toStringTag;var gt=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[mt]="BlobDownloadBuilder",this.promise=null}asStream(){return new pt(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return(0,r.__awaiter)(this,void 0,void 0,(function*(){try{const t=yield this.downloadFn();return{data:yield t.blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(et(t))return{data:null,error:t};throw t}}))}},yt=n(2957).lW;const vt={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},wt={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class bt{constructor(t,e={},n,r){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.bucketId=n,this.fetch=st(r)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,e,n,s){return(0,r.__awaiter)(this,void 0,void 0,(function*(){try{let r;const i=Object.assign(Object.assign({},wt),s);let o=Object.assign(Object.assign({},this.headers),"POST"===t&&{"x-upsert":String(i.upsert)});const a=i.metadata;if("undefined"!==typeof Blob&&n instanceof Blob)r=new FormData,r.append("cacheControl",i.cacheControl),a&&r.append("metadata",this.encodeMetadata(a)),r.append("",n);else if("undefined"!==typeof FormData&&n instanceof FormData)r=n,r.has("cacheControl")||r.append("cacheControl",i.cacheControl),a&&!r.has("metadata")&&r.append("metadata",this.encodeMetadata(a));else{r=n,o["cache-control"]=`max-age=${i.cacheControl}`,o["content-type"]=i.contentType,a&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(a)));("undefined"!==typeof ReadableStream&&r instanceof ReadableStream||r&&"object"===typeof r&&"pipe"in r&&"function"===typeof r.pipe)&&!i.duplex&&(i.duplex="half")}(null===s||void 0===s?void 0:s.headers)&&(o=Object.assign(Object.assign({},o),s.headers));const c=this._removeEmptyFolders(e),l=this._getFinalPath(c),u=yield("PUT"==t?dt:ht)(this.fetch,`${this.url}/object/${l}`,r,Object.assign({headers:o},(null===i||void 0===i?void 0:i.duplex)?{duplex:i.duplex}:{}));return{data:{path:c,id:u.Id,fullPath:u.Key},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(et(r))return{data:null,error:r};throw r}}))}upload(t,e,n){return(0,r.__awaiter)(this,void 0,void 0,(function*(){return this.uploadOrUpdate("POST",t,e,n)}))}uploadToSignedUrl(t,e,n,s){return(0,r.__awaiter)(this,void 0,void 0,(function*(){const r=this._removeEmptyFolders(t),i=this._getFinalPath(r),o=new URL(this.url+`/object/upload/sign/${i}`);o.searchParams.set("token",e);try{let t;const e=Object.assign({upsert:wt.upsert},s),i=Object.assign(Object.assign({},this.headers),{"x-upsert":String(e.upsert)});"undefined"!==typeof Blob&&n instanceof Blob?(t=new FormData,t.append("cacheControl",e.cacheControl),t.append("",n)):"undefined"!==typeof FormData&&n instanceof FormData?(t=n,t.append("cacheControl",e.cacheControl)):(t=n,i["cache-control"]=`max-age=${e.cacheControl}`,i["content-type"]=e.contentType);return{data:{path:r,fullPath:(yield dt(this.fetch,o.toString(),t,{headers:i})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(et(a))return{data:null,error:a};throw a}}))}createSignedUploadUrl(t,e){return(0,r.__awaiter)(this,void 0,void 0,(function*(){try{let n=this._getFinalPath(t);const r=Object.assign({},this.headers);(null===e||void 0===e?void 0:e.upsert)&&(r["x-upsert"]="true");const s=yield ht(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:r}),i=new URL(this.url+s.url),o=i.searchParams.get("token");if(!o)throw new tt("No token returned by API");return{data:{signedUrl:i.toString(),path:t,token:o},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(et(n))return{data:null,error:n};throw n}}))}update(t,e,n){return(0,r.__awaiter)(this,void 0,void 0,(function*(){return this.uploadOrUpdate("PUT",t,e,n)}))}move(t,e,n){return(0,r.__awaiter)(this,void 0,void 0,(function*(){try{return{data:yield ht(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:e,destinationBucket:null===n||void 0===n?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(et(r))return{data:null,error:r};throw r}}))}copy(t,e,n){return(0,r.__awaiter)(this,void 0,void 0,(function*(){try{return{data:{path:(yield ht(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:e,destinationBucket:null===n||void 0===n?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(et(r))return{data:null,error:r};throw r}}))}createSignedUrl(t,e,n){return(0,r.__awaiter)(this,void 0,void 0,(function*(){try{let r=this._getFinalPath(t),s=yield ht(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:e},(null===n||void 0===n?void 0:n.transform)?{transform:n.transform}:{}),{headers:this.headers});const i=(null===n||void 0===n?void 0:n.download)?`&download=${!0===n.download?"":n.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${i}`)},{data:s,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(et(r))return{data:null,error:r};throw r}}))}createSignedUrls(t,e,n){return(0,r.__awaiter)(this,void 0,void 0,(function*(){try{const r=yield ht(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:e,paths:t},{headers:this.headers}),s=(null===n||void 0===n?void 0:n.download)?`&download=${!0===n.download?"":n.download}`:"";return{data:r.map((t=>Object.assign(Object.assign({},t),{signedUrl:t.signedURL?encodeURI(`${this.url}${t.signedURL}${s}`):null}))),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(et(r))return{data:null,error:r};throw r}}))}download(t,e){const n="undefined"!==typeof(null===e||void 0===e?void 0:e.transform)?"render/image/authenticated":"object",r=this.transformOptsToQueryString((null===e||void 0===e?void 0:e.transform)||{}),s=r?`?${r}`:"",i=this._getFinalPath(t);return new gt((()=>ut(this.fetch,`${this.url}/${n}/${i}${s}`,{headers:this.headers,noResolveJson:!0})),this.shouldThrowOnError)}info(t){return(0,r.__awaiter)(this,void 0,void 0,(function*(){const e=this._getFinalPath(t);try{const t=yield ut(this.fetch,`${this.url}/object/info/${e}`,{headers:this.headers});return{data:it(t),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(et(n))return{data:null,error:n};throw n}}))}exists(t){return(0,r.__awaiter)(this,void 0,void 0,(function*(){const e=this._getFinalPath(t);try{return yield function(t,e,n,s){return(0,r.__awaiter)(this,void 0,void 0,(function*(){return lt(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),s)}))}(this.fetch,`${this.url}/object/${e}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(et(n)&&n instanceof rt){const t=n.originalError;if([400,404].includes(null===t||void 0===t?void 0:t.status))return{data:!1,error:n}}throw n}}))}getPublicUrl(t,e){const n=this._getFinalPath(t),r=[],s=(null===e||void 0===e?void 0:e.download)?`download=${!0===e.download?"":e.download}`:"";""!==s&&r.push(s);const i="undefined"!==typeof(null===e||void 0===e?void 0:e.transform)?"render/image":"object",o=this.transformOptsToQueryString((null===e||void 0===e?void 0:e.transform)||{});""!==o&&r.push(o);let a=r.join("&");return""!==a&&(a=`?${a}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${n}${a}`)}}}remove(t){return(0,r.__awaiter)(this,void 0,void 0,(function*(){try{return{data:yield ft(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(et(e))return{data:null,error:e};throw e}}))}list(t,e,n){return(0,r.__awaiter)(this,void 0,void 0,(function*(){try{const r=Object.assign(Object.assign(Object.assign({},vt),e),{prefix:t||""});return{data:yield ht(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(et(r))return{data:null,error:r};throw r}}))}listV2(t,e){return(0,r.__awaiter)(this,void 0,void 0,(function*(){try{const n=Object.assign({},t);return{data:yield ht(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},e),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(et(n))return{data:null,error:n};throw n}}))}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return"undefined"!==typeof yt?yt.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}}const _t="2.81.1",kt={"X-Client-Info":`storage-js/${_t}`};class St{constructor(t,e={},n,r){this.shouldThrowOnError=!1;const s=new URL(t);if(null===r||void 0===r?void 0:r.useNewHostname){/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase."))}this.url=s.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},kt),e),this.fetch=st(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return(0,r.__awaiter)(this,void 0,void 0,(function*(){try{const e=this.listBucketOptionsToQueryString(t);return{data:yield ut(this.fetch,`${this.url}/bucket${e}`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(et(e))return{data:null,error:e};throw e}}))}getBucket(t){return(0,r.__awaiter)(this,void 0,void 0,(function*(){try{return{data:yield ut(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(et(e))return{data:null,error:e};throw e}}))}createBucket(t){return(0,r.__awaiter)(this,arguments,void 0,(function*(t,e={public:!1}){try{return{data:yield ht(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(et(n))return{data:null,error:n};throw n}}))}updateBucket(t,e){return(0,r.__awaiter)(this,void 0,void 0,(function*(){try{return{data:yield dt(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(et(n))return{data:null,error:n};throw n}}))}emptyBucket(t){return(0,r.__awaiter)(this,void 0,void 0,(function*(){try{return{data:yield ht(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(et(e))return{data:null,error:e};throw e}}))}deleteBucket(t){return(0,r.__awaiter)(this,void 0,void 0,(function*(){try{return{data:yield ft(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(et(e))return{data:null,error:e};throw e}}))}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}}class Et{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},kt),e),this.fetch=st(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return(0,r.__awaiter)(this,void 0,void 0,(function*(){try{return{data:yield ht(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(et(e))return{data:null,error:e};throw e}}))}listBuckets(t){return(0,r.__awaiter)(this,void 0,void 0,(function*(){try{const e=new URLSearchParams;void 0!==(null===t||void 0===t?void 0:t.limit)&&e.set("limit",t.limit.toString()),void 0!==(null===t||void 0===t?void 0:t.offset)&&e.set("offset",t.offset.toString()),(null===t||void 0===t?void 0:t.sortColumn)&&e.set("sortColumn",t.sortColumn),(null===t||void 0===t?void 0:t.sortOrder)&&e.set("sortOrder",t.sortOrder),(null===t||void 0===t?void 0:t.search)&&e.set("search",t.search);const n=e.toString(),r=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`;return{data:yield ut(this.fetch,r,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(et(e))return{data:null,error:e};throw e}}))}deleteBucket(t){return(0,r.__awaiter)(this,void 0,void 0,(function*(){try{return{data:yield ft(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(et(e))return{data:null,error:e};throw e}}))}}const Tt={"X-Client-Info":`storage-js/${_t}`,"Content-Type":"application/json"};class xt extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function At(t){return"object"===typeof t&&null!==t&&"__isStorageVectorsError"in t}class Rt extends xt{constructor(t,e,n){super(t),this.name="StorageVectorsApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Pt extends xt{constructor(t,e){super(t),this.name="StorageVectorsUnknownError",this.originalError=e}}var Ot;!function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"}(Ot||(Ot={}));const jt=t=>t?(...e)=>t(...e):(...t)=>fetch(...t),Ct=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),It=(t,e,n)=>(0,r.__awaiter)(void 0,void 0,void 0,(function*(){if(t&&"object"===typeof t&&"status"in t&&"ok"in t&&"number"===typeof t.status&&!(null===n||void 0===n?void 0:n.noResolveJson)){const n=t.status||500,r=t;if("function"===typeof r.json)r.json().then((t=>{const r=(null===t||void 0===t?void 0:t.statusCode)||(null===t||void 0===t?void 0:t.code)||n+"";e(new Rt(Ct(t),n,r))})).catch((()=>{const t=n+"",s=r.statusText||`HTTP ${n} error`;e(new Rt(s,n,t))}));else{const t=n+"",s=r.statusText||`HTTP ${n} error`;e(new Rt(s,n,t))}}else e(new Pt(Ct(t),t))})),Mt=(t,e,n,r)=>{const s={method:t,headers:(null===e||void 0===e?void 0:e.headers)||{}};return"GET"!==t&&r?((t=>{if("object"!==typeof t||null===t)return!1;const e=Object.getPrototypeOf(t);return(null===e||e===Object.prototype||null===Object.getPrototypeOf(e))&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)})(r)?(s.headers=Object.assign({"Content-Type":"application/json"},null===e||void 0===e?void 0:e.headers),s.body=JSON.stringify(r)):s.body=r,Object.assign(Object.assign({},s),n)):s};function $t(t,e,n,s,i,o){return(0,r.__awaiter)(this,void 0,void 0,(function*(){return new Promise(((r,a)=>{t(n,Mt(e,s,i,o)).then((t=>{if(!t.ok)throw t;if(null===s||void 0===s?void 0:s.noResolveJson)return t;const e=t.headers.get("content-type");return e&&e.includes("application/json")?t.json():{}})).then((t=>r(t))).catch((t=>It(t,a,s)))}))}))}function Lt(t,e,n,s,i){return(0,r.__awaiter)(this,void 0,void 0,(function*(){return $t(t,"POST",e,s,i,n)}))}class Ut{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Tt),e),this.fetch=jt(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return(0,r.__awaiter)(this,void 0,void 0,(function*(){try{return{data:(yield Lt(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(At(e))return{data:null,error:e};throw e}}))}getIndex(t,e){return(0,r.__awaiter)(this,void 0,void 0,(function*(){try{return{data:yield Lt(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(At(n))return{data:null,error:n};throw n}}))}listIndexes(t){return(0,r.__awaiter)(this,void 0,void 0,(function*(){try{return{data:yield Lt(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(At(e))return{data:null,error:e};throw e}}))}deleteIndex(t,e){return(0,r.__awaiter)(this,void 0,void 0,(function*(){try{return{data:(yield Lt(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(At(n))return{data:null,error:n};throw n}}))}}class Dt{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Tt),e),this.fetch=jt(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return(0,r.__awaiter)(this,void 0,void 0,(function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Lt(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(At(e))return{data:null,error:e};throw e}}))}getVectors(t){return(0,r.__awaiter)(this,void 0,void 0,(function*(){try{return{data:yield Lt(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(At(e))return{data:null,error:e};throw e}}))}listVectors(t){return(0,r.__awaiter)(this,void 0,void 0,(function*(){try{if(void 0!==t.segmentCount){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(void 0!==t.segmentIndex&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error("segmentIndex must be between 0 and "+(t.segmentCount-1))}return{data:yield Lt(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(At(e))return{data:null,error:e};throw e}}))}queryVectors(t){return(0,r.__awaiter)(this,void 0,void 0,(function*(){try{return{data:yield Lt(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(At(e))return{data:null,error:e};throw e}}))}deleteVectors(t){return(0,r.__awaiter)(this,void 0,void 0,(function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Lt(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(At(e))return{data:null,error:e};throw e}}))}}class Bt{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Tt),e),this.fetch=jt(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return(0,r.__awaiter)(this,void 0,void 0,(function*(){try{return{data:(yield Lt(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(At(e))return{data:null,error:e};throw e}}))}getBucket(t){return(0,r.__awaiter)(this,void 0,void 0,(function*(){try{return{data:yield Lt(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(At(e))return{data:null,error:e};throw e}}))}listBuckets(){return(0,r.__awaiter)(this,arguments,void 0,(function*(t={}){try{return{data:yield Lt(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(At(e))return{data:null,error:e};throw e}}))}deleteBucket(t){return(0,r.__awaiter)(this,void 0,void 0,(function*(){try{return{data:(yield Lt(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(At(e))return{data:null,error:e};throw e}}))}}class Nt extends Bt{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new Vt(this.url,this.headers,t,this.fetch)}}class Vt extends Ut{constructor(t,e,n,r){super(t,e,r),this.vectorBucketName=n}createIndex(t){const e=Object.create(null,{createIndex:{get:()=>super.createIndex}});return(0,r.__awaiter)(this,void 0,void 0,(function*(){return e.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))}))}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return(0,r.__awaiter)(this,arguments,void 0,(function*(e={}){return t.listIndexes.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))}))}getIndex(t){const e=Object.create(null,{getIndex:{get:()=>super.getIndex}});return(0,r.__awaiter)(this,void 0,void 0,(function*(){return e.getIndex.call(this,this.vectorBucketName,t)}))}deleteIndex(t){const e=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return(0,r.__awaiter)(this,void 0,void 0,(function*(){return e.deleteIndex.call(this,this.vectorBucketName,t)}))}index(t){return new Ft(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class Ft extends Dt{constructor(t,e,n,r,s){super(t,e,s),this.vectorBucketName=n,this.indexName=r}putVectors(t){const e=Object.create(null,{putVectors:{get:()=>super.putVectors}});return(0,r.__awaiter)(this,void 0,void 0,(function*(){return e.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))}))}getVectors(t){const e=Object.create(null,{getVectors:{get:()=>super.getVectors}});return(0,r.__awaiter)(this,void 0,void 0,(function*(){return e.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))}))}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return(0,r.__awaiter)(this,arguments,void 0,(function*(e={}){return t.listVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))}))}queryVectors(t){const e=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return(0,r.__awaiter)(this,void 0,void 0,(function*(){return e.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))}))}deleteVectors(t){const e=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return(0,r.__awaiter)(this,void 0,void 0,(function*(){return e.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))}))}}class qt extends St{constructor(t,e={},n,r){super(t,e,n,r)}from(t){return new bt(this.url,this.headers,t,this.fetch)}get vectors(){return new Nt(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Et(this.url+"/iceberg",this.headers,this.fetch)}}let Wt="";Wt="undefined"!==typeof Deno?"deno":"undefined"!==typeof document?"web":"undefined"!==typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const zt={headers:{"X-Client-Info":`supabase-js-${Wt}/2.81.1`}},Ht={schema:"public"},Kt={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Zt={},Jt=t=>t?(...e)=>t(...e):(...t)=>fetch(...t),Gt=(t,e,n)=>{const r=Jt(n),s=Headers;return async(n,i)=>{var o;const a=null!==(o=await e())&&void 0!==o?o:t;let c=new s(null===i||void 0===i?void 0:i.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${a}`),r(n,Object.assign(Object.assign({},i),{headers:c}))}};const Xt="2.81.1",Yt=3e4,Qt=9e4,te={"X-Client-Info":`gotrue-js/${Xt}`},ee="X-Supabase-Api-Version",ne={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},re=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class se extends Error{constructor(t,e,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=e,this.code=n}}function ie(t){return"object"===typeof t&&null!==t&&"__isAuthError"in t}class oe extends se{constructor(t,e,n){super(t,e,n),this.name="AuthApiError",this.status=e,this.code=n}}class ae extends se{constructor(t,e){super(t),this.name="AuthUnknownError",this.originalError=e}}class ce extends se{constructor(t,e,n,r){super(t,n,r),this.name=e,this.status=n}}class le extends ce{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class ue extends ce{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class he extends ce{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class de extends ce{constructor(t,e=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class fe extends ce{constructor(t,e=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class pe extends ce{constructor(t,e){super(t,"AuthRetryableFetchError",e,void 0)}}function me(t){return ie(t)&&"AuthRetryableFetchError"===t.name}class ge extends ce{constructor(t,e,n){super(t,"AuthWeakPasswordError",e,"weak_password"),this.reasons=n}}class ye extends ce{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const ve="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),we=" \t\n\r=".split(""),be=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<we.length;e+=1)t[we[e].charCodeAt(0)]=-2;for(let e=0;e<ve.length;e+=1)t[ve[e].charCodeAt(0)]=e;return t})();function _e(t,e,n){if(null!==t)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const t=e.queue>>e.queuedBits-6&63;n(ve[t]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const t=e.queue>>e.queuedBits-6&63;n(ve[t]),e.queuedBits-=6}}function ke(t,e,n){const r=be[t];if(!(r>-1)){if(-2===r)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8}function Se(t){const e=[],n=t=>{e.push(String.fromCodePoint(t))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=t=>{!function(t,e,n){if(0===e.utf8seq){if(t<=127)return void n(t);for(let n=1;n<6;n+=1)if(0===(t>>7-n&1)){e.utf8seq=n;break}if(2===e.utf8seq)e.codepoint=31&t;else if(3===e.utf8seq)e.codepoint=15&t;else{if(4!==e.utf8seq)throw new Error("Invalid UTF-8 sequence");e.codepoint=7&t}e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|63&t,e.utf8seq-=1,0===e.utf8seq&&n(e.codepoint)}}(t,r,n)};for(let o=0;o<t.length;o+=1)ke(t.charCodeAt(o),s,i);return e.join("")}function Ee(t,e){if(!(t<=127)){if(t<=2047)return e(192|t>>6),void e(128|63&t);if(t<=65535)return e(224|t>>12),e(128|t>>6&63),void e(128|63&t);if(t<=1114111)return e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),void e(128|63&t);throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}e(t)}function Te(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const e=1024*(r-55296)&65535;r=65536+(t.charCodeAt(n+1)-56320&65535|e),n+=1}Ee(r,e)}}function xe(t){const e=[],n={queue:0,queuedBits:0},r=t=>{e.push(t)};for(let s=0;s<t.length;s+=1)ke(t.charCodeAt(s),n,r);return new Uint8Array(e)}function Ae(t){const e=[],n={queue:0,queuedBits:0},r=t=>{e.push(t)};return t.forEach((t=>_e(t,n,r))),_e(null,n,r),e.join("")}const Re=()=>"undefined"!==typeof window&&"undefined"!==typeof document,Pe={tested:!1,writable:!1},Oe=()=>{if(!Re())return!1;try{if("object"!==typeof globalThis.localStorage)return!1}catch(e){return!1}if(Pe.tested)return Pe.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Pe.tested=!0,Pe.writable=!0}catch(e){Pe.tested=!0,Pe.writable=!1}return Pe.writable};const je=t=>t?(...e)=>t(...e):(...t)=>fetch(...t),Ce=t=>"object"===typeof t&&null!==t&&"status"in t&&"ok"in t&&"json"in t&&"function"===typeof t.json,Ie=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Me=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch(mt){return n}},$e=async(t,e)=>{await t.removeItem(e)};class Le{constructor(){this.promise=new Le.promiseConstructor(((t,e)=>{this.resolve=t,this.reject=e}))}}function Ue(t){const e=t.split(".");if(3!==e.length)throw new ye("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!re.test(e[n]))throw new ye("JWT not in base64url format");return{header:JSON.parse(Se(e[0])),payload:JSON.parse(Se(e[1])),signature:xe(e[2]),raw:{header:e[0],payload:e[1]}}}function De(t){return("0"+t.toString(16)).substr(-2)}async function Be(t){if(!("undefined"!==typeof crypto&&"undefined"!==typeof crypto.subtle&&"undefined"!==typeof TextEncoder))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const e=await async function(t){const e=(new TextEncoder).encode(t),n=await crypto.subtle.digest("SHA-256",e),r=new Uint8Array(n);return Array.from(r).map((t=>String.fromCharCode(t))).join("")}(t);return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ne(t,e,n=!1){const r=function(){const t=new Uint32Array(56);if("undefined"===typeof crypto){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",e=t.length;let n="";for(let r=0;r<56;r++)n+=t.charAt(Math.floor(Math.random()*e));return n}return crypto.getRandomValues(t),Array.from(t,De).join("")}();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await Ie(t,`${e}-code-verifier`,s);const i=await Be(r);return[i,r===i?"plain":"s256"]}Le.promiseConstructor=Promise;const Ve=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;const Fe=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function qe(t){if(!Fe.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function We(){return new Proxy({},{get:(t,e)=>{if("__isUserNotAvailableProxy"===e)return!0;if("symbol"===typeof e){const t=e.toString();if("Symbol(Symbol.toPrimitive)"===t||"Symbol(Symbol.toStringTag)"===t||"Symbol(util.inspect.custom)"===t)return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${e}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,e)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${e}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,e)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${e}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function ze(t){return JSON.parse(JSON.stringify(t))}const He=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Ke=[502,503,504];async function Ze(t){var e;if(!Ce(t))throw new pe(He(t),0);if(Ke.includes(t.status))throw new pe(He(t),t.status);let n,r;try{n=await t.json()}catch(i){throw new ae(He(i),i)}const s=function(t){const e=t.headers.get(ee);if(!e)return null;if(!e.match(Ve))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch(i){return null}}(t);if(s&&s.getTime()>=ne["2024-01-01"].timestamp&&"object"===typeof n&&n&&"string"===typeof n.code?r=n.code:"object"===typeof n&&n&&"string"===typeof n.error_code&&(r=n.error_code),r){if("weak_password"===r)throw new ge(He(n),t.status,(null===(e=n.weak_password)||void 0===e?void 0:e.reasons)||[]);if("session_not_found"===r)throw new le}else if("object"===typeof n&&n&&"object"===typeof n.weak_password&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce(((t,e)=>t&&"string"===typeof e),!0))throw new ge(He(n),t.status,n.weak_password.reasons);throw new oe(He(n),t.status||500,r)}const Je=(t,e,n,r)=>{const s={method:t,headers:(null===e||void 0===e?void 0:e.headers)||{}};return"GET"===t?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null===e||void 0===e?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function Ge(t,e,n,r){var s;const i=Object.assign({},null===r||void 0===r?void 0:r.headers);i[ee]||(i[ee]=ne["2024-01-01"].name),(null===r||void 0===r?void 0:r.jwt)&&(i.Authorization=`Bearer ${r.jwt}`);const o=null!==(s=null===r||void 0===r?void 0:r.query)&&void 0!==s?s:{};(null===r||void 0===r?void 0:r.redirectTo)&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await async function(t,e,n,r,s,i){const o=Je(e,r,s,i);let a;try{a=await t(n,Object.assign({},o))}catch(c){throw console.error(c),new pe(He(c),0)}a.ok||await Ze(a);if(null===r||void 0===r?void 0:r.noResolveJson)return a;try{return await a.json()}catch(c){await Ze(c)}}(t,e,n+a,{headers:i,noResolveJson:null===r||void 0===r?void 0:r.noResolveJson},{},null===r||void 0===r?void 0:r.body);return(null===r||void 0===r?void 0:r.xform)?null===r||void 0===r?void 0:r.xform(c):{data:Object.assign({},c),error:null}}function Xe(t){var e;let n=null;var r;(function(t){return t.access_token&&t.refresh_token&&t.expires_in})(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=(r=t.expires_in,Math.round(Date.now()/1e3)+r)));return{data:{session:n,user:null!==(e=t.user)&&void 0!==e?e:t},error:null}}function Ye(t){const e=Xe(t);return!e.error&&t.weak_password&&"object"===typeof t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&"string"===typeof t.weak_password.message&&t.weak_password.reasons.reduce(((t,e)=>t&&"string"===typeof e),!0)&&(e.data.weak_password=t.weak_password),e}function Qe(t){var e;return{data:{user:null!==(e=t.user)&&void 0!==e?e:t},error:null}}function tn(t){return{data:t,error:null}}function en(t){const{action_link:e,email_otp:n,hashed_token:s,redirect_to:i,verification_type:o}=t,a=(0,r.__rest)(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:e,email_otp:n,hashed_token:s,redirect_to:i,verification_type:o},user:Object.assign({},a)},error:null}}function nn(t){return t}const rn=["global","local","others"];class sn{constructor({url:t="",headers:e={},fetch:n}){this.url=t,this.headers=e,this.fetch=je(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,e=rn[0]){if(rn.indexOf(e)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${rn.join(", ")}`);try{return await Ge(this.fetch,"POST",`${this.url}/logout?scope=${e}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ie(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,e={}){try{return await Ge(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:e.data},headers:this.headers,redirectTo:e.redirectTo,xform:Qe})}catch(n){if(ie(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:e}=t,n=(0,r.__rest)(t,["options"]),s=Object.assign(Object.assign({},n),e);return"newEmail"in n&&(s.new_email=null===n||void 0===n?void 0:n.newEmail,delete s.newEmail),await Ge(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:en,redirectTo:null===e||void 0===e?void 0:e.redirectTo})}catch(e){if(ie(e))return{data:{properties:null,user:null},error:e};throw e}}async createUser(t){try{return await Ge(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Qe})}catch(e){if(ie(e))return{data:{user:null},error:e};throw e}}async listUsers(t){var e,n,r,s,i,o,a;try{const c={nextPage:null,lastPage:0,total:0},l=await Ge(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(n=null===(e=null===t||void 0===t?void 0:t.page)||void 0===e?void 0:e.toString())&&void 0!==n?n:"",per_page:null!==(s=null===(r=null===t||void 0===t?void 0:t.perPage)||void 0===r?void 0:r.toString())&&void 0!==s?s:""},xform:nn});if(l.error)throw l.error;const u=await l.json(),h=null!==(i=l.headers.get("x-total-count"))&&void 0!==i?i:0,d=null!==(a=null===(o=l.headers.get("link"))||void 0===o?void 0:o.split(","))&&void 0!==a?a:[];return d.length>0&&(d.forEach((t=>{const e=parseInt(t.split(";")[0].split("=")[1].substring(0,1)),n=JSON.parse(t.split(";")[1].split("=")[1]);c[`${n}Page`]=e})),c.total=parseInt(h)),{data:Object.assign(Object.assign({},u),c),error:null}}catch(c){if(ie(c))return{data:{users:[]},error:c};throw c}}async getUserById(t){qe(t);try{return await Ge(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Qe})}catch(e){if(ie(e))return{data:{user:null},error:e};throw e}}async updateUserById(t,e){qe(t);try{return await Ge(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:e,headers:this.headers,xform:Qe})}catch(n){if(ie(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,e=!1){qe(t);try{return await Ge(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:e},xform:Qe})}catch(n){if(ie(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){qe(t.userId);try{const{data:e,error:n}=await Ge(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:t=>({data:{factors:t},error:null})});return{data:e,error:n}}catch(e){if(ie(e))return{data:null,error:e};throw e}}async _deleteFactor(t){qe(t.userId),qe(t.id);try{return{data:await Ge(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(e){if(ie(e))return{data:null,error:e};throw e}}async _listOAuthClients(t){var e,n,r,s,i,o,a;try{const c={nextPage:null,lastPage:0,total:0},l=await Ge(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(n=null===(e=null===t||void 0===t?void 0:t.page)||void 0===e?void 0:e.toString())&&void 0!==n?n:"",per_page:null!==(s=null===(r=null===t||void 0===t?void 0:t.perPage)||void 0===r?void 0:r.toString())&&void 0!==s?s:""},xform:nn});if(l.error)throw l.error;const u=await l.json(),h=null!==(i=l.headers.get("x-total-count"))&&void 0!==i?i:0,d=null!==(a=null===(o=l.headers.get("link"))||void 0===o?void 0:o.split(","))&&void 0!==a?a:[];return d.length>0&&(d.forEach((t=>{const e=parseInt(t.split(";")[0].split("=")[1].substring(0,1)),n=JSON.parse(t.split(";")[1].split("=")[1]);c[`${n}Page`]=e})),c.total=parseInt(h)),{data:Object.assign(Object.assign({},u),c),error:null}}catch(c){if(ie(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(t){try{return await Ge(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:t=>({data:t,error:null})})}catch(e){if(ie(e))return{data:null,error:e};throw e}}async _getOAuthClient(t){try{return await Ge(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(e){if(ie(e))return{data:null,error:e};throw e}}async _updateOAuthClient(t,e){try{return await Ge(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:e,headers:this.headers,xform:t=>({data:t,error:null})})}catch(n){if(ie(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await Ge(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(e){if(ie(e))return{data:null,error:e};throw e}}async _regenerateOAuthClientSecret(t){try{return await Ge(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(e){if(ie(e))return{data:null,error:e};throw e}}}function on(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const an=!!(globalThis&&Oe()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class cn extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class ln extends cn{}async function un(t,e,n){an&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout((()=>{r.abort(),an&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)}),e),await Promise.resolve().then((()=>globalThis.navigator.locks.request(t,0===e?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},(async r=>{if(!r){if(0===e)throw an&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new ln(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(an)try{const t=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(t,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}an&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,r.name);try{return await n()}finally{an&&console.log("@supabase/gotrue-js: navigatorLock: released",t,r.name)}}))))}function hn(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function dn(t){const e=(new TextEncoder).encode(t);return"0x"+Array.from(e,(t=>t.toString(16).padStart(2,"0"))).join("")}class fn extends Error{constructor({message:t,code:e,cause:n,name:r}){var s;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=null!==(s=null!==r&&void 0!==r?r:n instanceof Error?n.name:void 0)&&void 0!==s?s:"Unknown Error",this.code=e}}class pn extends fn{constructor(t,e){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e,message:t}),this.name="WebAuthnUnknownError",this.originalError=e}}function mn({error:t,options:e}){var n,r,s;const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if("AbortError"===t.name){if(e.signal instanceof AbortSignal)return new fn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if("ConstraintError"===t.name){if(!0===(null===(n=i.authenticatorSelection)||void 0===n?void 0:n.requireResidentKey))return new fn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if("conditional"===e.mediation&&"required"===(null===(r=i.authenticatorSelection)||void 0===r?void 0:r.userVerification))return new fn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if("required"===(null===(s=i.authenticatorSelection)||void 0===s?void 0:s.userVerification))return new fn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if("InvalidStateError"===t.name)return new fn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if("NotAllowedError"===t.name)return new fn({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if("NotSupportedError"===t.name){return 0===i.pubKeyCredParams.filter((t=>"public-key"===t.type)).length?new fn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new fn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t})}if("SecurityError"===t.name){const e=window.location.hostname;if(!kn(e))return new fn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t});if(i.rp.id!==e)return new fn({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else if("TypeError"===t.name){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new fn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if("UnknownError"===t.name)return new fn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new fn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function gn({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if("AbortError"===t.name){if(e.signal instanceof AbortSignal)return new fn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if("NotAllowedError"===t.name)return new fn({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if("SecurityError"===t.name){const e=window.location.hostname;if(!kn(e))return new fn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t});if(n.rpId!==e)return new fn({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else if("UnknownError"===t.name)return new fn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new fn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}const yn=new class{createNewAbortSignal(){if(this.controller){const t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}};function vn(t){if(!t)throw new Error("Credential creation options are required");if("undefined"!==typeof PublicKeyCredential&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&"function"===typeof PublicKeyCredential.parseCreationOptionsFromJSON)return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:s}=t,i=(0,r.__rest)(t,["challenge","user","excludeCredentials"]),o=xe(e).buffer,a=Object.assign(Object.assign({},n),{id:xe(n.id).buffer}),c=Object.assign(Object.assign({},i),{challenge:o,user:a});if(s&&s.length>0){c.excludeCredentials=new Array(s.length);for(let t=0;t<s.length;t++){const e=s[t];c.excludeCredentials[t]=Object.assign(Object.assign({},e),{id:xe(e.id).buffer,type:e.type||"public-key",transports:e.transports})}}return c}function wn(t){if(!t)throw new Error("Credential request options are required");if("undefined"!==typeof PublicKeyCredential&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&"function"===typeof PublicKeyCredential.parseRequestOptionsFromJSON)return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,s=(0,r.__rest)(t,["challenge","allowCredentials"]),i=xe(e).buffer,o=Object.assign(Object.assign({},s),{challenge:i});if(n&&n.length>0){o.allowCredentials=new Array(n.length);for(let t=0;t<n.length;t++){const e=n[t];o.allowCredentials[t]=Object.assign(Object.assign({},e),{id:xe(e.id).buffer,type:e.type||"public-key",transports:e.transports})}}return o}function bn(t){var e;if("toJSON"in t&&"function"===typeof t.toJSON)return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:Ae(new Uint8Array(t.response.attestationObject)),clientDataJSON:Ae(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:null!==(e=n.authenticatorAttachment)&&void 0!==e?e:void 0}}function _n(t){var e;if("toJSON"in t&&"function"===typeof t.toJSON)return t.toJSON();const n=t,r=t.getClientExtensionResults(),s=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Ae(new Uint8Array(s.authenticatorData)),clientDataJSON:Ae(new Uint8Array(s.clientDataJSON)),signature:Ae(new Uint8Array(s.signature)),userHandle:s.userHandle?Ae(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:null!==(e=n.authenticatorAttachment)&&void 0!==e?e:void 0}}function kn(t){return"localhost"===t||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function Sn(){var t,e;return!!(Re()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&"function"===typeof(null===(t=null===navigator||void 0===navigator?void 0:navigator.credentials)||void 0===t?void 0:t.create)&&"function"===typeof(null===(e=null===navigator||void 0===navigator?void 0:navigator.credentials)||void 0===e?void 0:e.get))}const En={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Tn={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function xn(...t){const e=t=>null!==t&&"object"===typeof t&&!Array.isArray(t),n={};for(const s of t)if(s)for(const t in s){const i=s[t];if(void 0!==i)if(Array.isArray(i))n[t]=i;else if((r=i)instanceof ArrayBuffer||ArrayBuffer.isView(r))n[t]=i;else if(e(i)){const r=n[t];e(r)?n[t]=xn(r,i):n[t]=xn(i)}else n[t]=i}var r;return n}class An{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:e,friendlyName:n,signal:r},s){try{const{data:i,error:o}=await this.client.mfa.challenge({factorId:t,webauthn:e});if(!i)return{data:null,error:o};const a=null!==r&&void 0!==r?r:yn.createNewAbortSignal();if("create"===i.webauthn.type){const{user:t}=i.webauthn.credential_options.publicKey;t.name||(t.name=`${t.id}:${n}`),t.displayName||(t.displayName=t.name)}switch(i.webauthn.type){case"create":{const e=function(t,e){return xn(En,t,e||{})}(i.webauthn.credential_options.publicKey,null===s||void 0===s?void 0:s.create),{data:n,error:r}=await async function(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new pn("Browser returned unexpected credential type",e)}:{data:null,error:new pn("Empty credential response",e)}}catch(e){return{data:null,error:mn({error:e,options:t})}}}({publicKey:e,signal:a});return n?{data:{factorId:t,challengeId:i.id,webauthn:{type:i.webauthn.type,credential_response:n}},error:null}:{data:null,error:r}}case"request":{const e=function(t,e){return xn(Tn,t,e||{})}(i.webauthn.credential_options.publicKey,null===s||void 0===s?void 0:s.request),{data:n,error:r}=await async function(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new pn("Browser returned unexpected credential type",e)}:{data:null,error:new pn("Empty credential response",e)}}catch(e){return{data:null,error:gn({error:e,options:t})}}}(Object.assign(Object.assign({},i.webauthn.credential_options),{publicKey:e,signal:a}));return n?{data:{factorId:t,challengeId:i.id,webauthn:{type:i.webauthn.type,credential_response:n}},error:null}:{data:null,error:r}}}}catch(i){return ie(i)?{data:null,error:i}:{data:null,error:new ae("Unexpected error in challenge",i)}}}async _verify({challengeId:t,factorId:e,webauthn:n}){return this.client.mfa.verify({factorId:e,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:e=("undefined"!==typeof window?window.location.hostname:void 0),rpOrigins:n=("undefined"!==typeof window?[window.location.origin]:void 0),signal:r}={}},s){if(!e)return{data:null,error:new se("rpId is required for WebAuthn authentication")};try{if(!Sn())return{data:null,error:new ae("Browser does not support WebAuthn",null)};const{data:i,error:o}=await this.challenge({factorId:t,webauthn:{rpId:e,rpOrigins:n},signal:r},{request:s});if(!i)return{data:null,error:o};const{webauthn:a}=i;return this._verify({factorId:t,challengeId:i.challengeId,webauthn:{type:a.type,rpId:e,rpOrigins:n,credential_response:a.credential_response}})}catch(i){return ie(i)?{data:null,error:i}:{data:null,error:new ae("Unexpected error in authenticate",i)}}}async _register({friendlyName:t,webauthn:{rpId:e=("undefined"!==typeof window?window.location.hostname:void 0),rpOrigins:n=("undefined"!==typeof window?[window.location.origin]:void 0),signal:r}={}},s){if(!e)return{data:null,error:new se("rpId is required for WebAuthn registration")};try{if(!Sn())return{data:null,error:new ae("Browser does not support WebAuthn",null)};const{data:i,error:o}=await this._enroll({friendlyName:t});if(!i)return await this.client.mfa.listFactors().then((e=>{var n;return null===(n=e.data)||void 0===n?void 0:n.all.find((e=>"webauthn"===e.factor_type&&e.friendly_name===t&&"unverified"!==e.status))})).then((t=>t?this.client.mfa.unenroll({factorId:null===t||void 0===t?void 0:t.id}):void 0)),{data:null,error:o};const{data:a,error:c}=await this._challenge({factorId:i.id,friendlyName:i.friendly_name,webauthn:{rpId:e,rpOrigins:n},signal:r},{create:s});return a?this._verify({factorId:i.id,challengeId:a.challengeId,webauthn:{rpId:e,rpOrigins:n,type:a.webauthn.type,credential_response:a.webauthn.credential_response}}):{data:null,error:c}}catch(i){return ie(i)?{data:null,error:i}:{data:null,error:new ae("Unexpected error in register",i)}}}}!function(){if("object"!==typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(t){"undefined"!==typeof self&&(self.globalThis=self)}}();const Rn={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:te,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Pn(t,e,n){return await n()}const On={};class jn{get jwks(){var t,e;return null!==(e=null===(t=On[this.storageKey])||void 0===t?void 0:t.jwks)&&void 0!==e?e:{keys:[]}}set jwks(t){On[this.storageKey]=Object.assign(Object.assign({},On[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,e;return null!==(e=null===(t=On[this.storageKey])||void 0===t?void 0:t.cachedAt)&&void 0!==e?e:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){On[this.storageKey]=Object.assign(Object.assign({},On[this.storageKey]),{cachedAt:t})}constructor(t){var e,n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const s=Object.assign(Object.assign({},Rn),t);if(this.storageKey=s.storageKey,this.instanceID=null!==(e=jn.nextInstanceID[this.storageKey])&&void 0!==e?e:0,jn.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!s.debug,"function"===typeof s.debug&&(this.logger=s.debug),this.instanceID>0&&Re()){const t=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(t),this.logDebugMessages&&console.trace(t)}if(this.persistSession=s.persistSession,this.autoRefreshToken=s.autoRefreshToken,this.admin=new sn({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=je(s.fetch),this.lock=s.lock||Pn,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,this.throwOnError=s.throwOnError,s.lock?this.lock=s.lock:Re()&&(null===(n=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===n?void 0:n.locks)?this.lock=un:this.lock=Pn,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new An(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:Oe()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=on(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=on(this.memoryStorage)),Re()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}null===(r=this.broadcastChannel)||void 0===r||r.addEventListener("message",(async t=>{this._debug("received broadcast notification from other tab or client",t),await this._notifyAllSubscribers(t.data.event,t.data.session,!1)}))}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Xt}) ${(new Date).toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,(async()=>await this._initialize())))()),await this.initializePromise}async _initialize(){var t;try{let e={},n="none";if(Re()&&(e=function(t){const e={},n=new URL(t);if(n.hash&&"#"===n.hash[0])try{new URLSearchParams(n.hash.substring(1)).forEach(((t,n)=>{e[n]=t}))}catch(r){}return n.searchParams.forEach(((t,n)=>{e[n]=t})),e}(window.location.href),this._isImplicitGrantCallback(e)?n="implicit":await this._isPKCECallback(e)&&(n="pkce")),Re()&&this.detectSessionInUrl&&"none"!==n){const{data:r,error:s}=await this._getSessionFromURL(e,n);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),function(t){return ie(t)&&"AuthImplicitGrantRedirectError"===t.name}(s)){const e=null===(t=s.details)||void 0===t?void 0:t.code;if("identity_already_exists"===e||"identity_not_found"===e||"single_identity_not_deletable"===e)return{error:s}}return await this._removeSession(),{error:s}}const{session:i,redirectType:o}=r;return this._debug("#_initialize()","detected session in URL",i,"redirect type",o),await this._saveSession(i),setTimeout((async()=>{"recovery"===o?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)}),0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return ie(e)?this._returnResult({error:e}):this._returnResult({error:new ae("Unexpected error during initialization",e)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var e,n,r;try{const s=await Ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:null!==(n=null===(e=null===t||void 0===t?void 0:t.options)||void 0===e?void 0:e.data)&&void 0!==n?n:{},gotrue_meta_security:{captcha_token:null===(r=null===t||void 0===t?void 0:t.options)||void 0===r?void 0:r.captchaToken}},xform:Xe}),{data:i,error:o}=s;if(o||!i)return this._returnResult({data:{user:null,session:null},error:o});const a=i.session,c=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",a)),this._returnResult({data:{user:c,session:a},error:null})}catch(s){if(ie(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signUp(t){var e,n,r;try{let s;if("email"in t){const{email:n,password:r,options:i}=t;let o=null,a=null;"pkce"===this.flowType&&([o,a]=await Ne(this.storage,this.storageKey)),s=await Ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null===i||void 0===i?void 0:i.emailRedirectTo,body:{email:n,password:r,data:null!==(e=null===i||void 0===i?void 0:i.data)&&void 0!==e?e:{},gotrue_meta_security:{captcha_token:null===i||void 0===i?void 0:i.captchaToken},code_challenge:o,code_challenge_method:a},xform:Xe})}else{if(!("phone"in t))throw new he("You must provide either an email or phone number and a password");{const{phone:e,password:i,options:o}=t;s=await Ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:e,password:i,data:null!==(n=null===o||void 0===o?void 0:o.data)&&void 0!==n?n:{},channel:null!==(r=null===o||void 0===o?void 0:o.channel)&&void 0!==r?r:"sms",gotrue_meta_security:{captcha_token:null===o||void 0===o?void 0:o.captchaToken}},xform:Xe})}}const{data:i,error:o}=s;if(o||!i)return this._returnResult({data:{user:null,session:null},error:o});const a=i.session,c=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",a)),this._returnResult({data:{user:c,session:a},error:null})}catch(s){if(ie(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithPassword(t){try{let e;if("email"in t){const{email:n,password:r,options:s}=t;e=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:n,password:r,gotrue_meta_security:{captcha_token:null===s||void 0===s?void 0:s.captchaToken}},xform:Ye})}else{if(!("phone"in t))throw new he("You must provide either an email or phone number and a password");{const{phone:n,password:r,options:s}=t;e=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:n,password:r,gotrue_meta_security:{captcha_token:null===s||void 0===s?void 0:s.captchaToken}},xform:Ye})}}const{data:n,error:r}=e;if(r)return this._returnResult({data:{user:null,session:null},error:r});if(!n||!n.session||!n.user){const t=new ue;return this._returnResult({data:{user:null,session:null},error:t})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:r})}catch(e){if(ie(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async signInWithOAuth(t){var e,n,r,s;return await this._handleProviderSignIn(t.provider,{redirectTo:null===(e=t.options)||void 0===e?void 0:e.redirectTo,scopes:null===(n=t.options)||void 0===n?void 0:n.scopes,queryParams:null===(r=t.options)||void 0===r?void 0:r.queryParams,skipBrowserRedirect:null===(s=t.options)||void 0===s?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,(async()=>this._exchangeCodeForSession(t)))}async signInWithWeb3(t){const{chain:e}=t;switch(e){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${e}"`)}}async signInWithEthereum(t){var e,n,r,s,i,o,a,c,l,u,h;let d,f;if("message"in t)d=t.message,f=t.signature;else{const{chain:u,wallet:h,statement:p,options:m}=t;let g;if(Re())if("object"===typeof h)g=h;else{const t=window;if(!("ethereum"in t)||"object"!==typeof t.ethereum||!("request"in t.ethereum)||"function"!==typeof t.ethereum.request)throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.");g=t.ethereum}else{if("object"!==typeof h||!(null===m||void 0===m?void 0:m.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");g=h}const y=new URL(null!==(e=null===m||void 0===m?void 0:m.url)&&void 0!==e?e:window.location.href),v=await g.request({method:"eth_requestAccounts"}).then((t=>t)).catch((()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")}));if(!v||0===v.length)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const w=hn(v[0]);let b=null===(n=null===m||void 0===m?void 0:m.signInWithEthereum)||void 0===n?void 0:n.chainId;if(!b){const t=await g.request({method:"eth_chainId"});b=parseInt(t,16)}d=function(t){var e;const{chainId:n,domain:r,expirationTime:s,issuedAt:i=new Date,nonce:o,notBefore:a,requestId:c,resources:l,scheme:u,uri:h,version:d}=t;if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if("1"!==d)throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${d}`);if(null===(e=t.statement)||void 0===e?void 0:e.includes("\n"))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`);const f=`${u?`${u}://${r}`:r} wants you to sign in with your Ethereum account:\n${hn(t.address)}\n\n${t.statement?`${t.statement}\n`:""}`;let p=`URI: ${h}\nVersion: ${d}\nChain ID: ${n}${o?`\nNonce: ${o}`:""}\nIssued At: ${i.toISOString()}`;if(s&&(p+=`\nExpiration Time: ${s.toISOString()}`),a&&(p+=`\nNot Before: ${a.toISOString()}`),c&&(p+=`\nRequest ID: ${c}`),l){let t="\nResources:";for(const e of l){if(!e||"string"!==typeof e)throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${e}`);t+=`\n- ${e}`}p+=t}return`${f}\n${p}`}({domain:y.host,address:w,statement:p,uri:y.href,version:"1",chainId:b,nonce:null===(r=null===m||void 0===m?void 0:m.signInWithEthereum)||void 0===r?void 0:r.nonce,issuedAt:null!==(i=null===(s=null===m||void 0===m?void 0:m.signInWithEthereum)||void 0===s?void 0:s.issuedAt)&&void 0!==i?i:new Date,expirationTime:null===(o=null===m||void 0===m?void 0:m.signInWithEthereum)||void 0===o?void 0:o.expirationTime,notBefore:null===(a=null===m||void 0===m?void 0:m.signInWithEthereum)||void 0===a?void 0:a.notBefore,requestId:null===(c=null===m||void 0===m?void 0:m.signInWithEthereum)||void 0===c?void 0:c.requestId,resources:null===(l=null===m||void 0===m?void 0:m.signInWithEthereum)||void 0===l?void 0:l.resources}),f=await g.request({method:"personal_sign",params:[dn(d),w]})}try{const{data:e,error:n}=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:d,signature:f},(null===(u=t.options)||void 0===u?void 0:u.captchaToken)?{gotrue_meta_security:{captcha_token:null===(h=t.options)||void 0===h?void 0:h.captchaToken}}:null),xform:Xe});if(n)throw n;if(!e||!e.session||!e.user){const t=new ue;return this._returnResult({data:{user:null,session:null},error:t})}return e.session&&(await this._saveSession(e.session),await this._notifyAllSubscribers("SIGNED_IN",e.session)),this._returnResult({data:Object.assign({},e),error:n})}catch(p){if(ie(p))return this._returnResult({data:{user:null,session:null},error:p});throw p}}async signInWithSolana(t){var e,n,r,s,i,o,a,c,l,u,h,d;let f,p;if("message"in t)f=t.message,p=t.signature;else{const{chain:h,wallet:d,statement:m,options:g}=t;let y;if(Re())if("object"===typeof d)y=d;else{const t=window;if(!("solana"in t)||"object"!==typeof t.solana||!("signIn"in t.solana&&"function"===typeof t.solana.signIn||"signMessage"in t.solana&&"function"===typeof t.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");y=t.solana}else{if("object"!==typeof d||!(null===g||void 0===g?void 0:g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");y=d}const v=new URL(null!==(e=null===g||void 0===g?void 0:g.url)&&void 0!==e?e:window.location.href);if("signIn"in y&&y.signIn){const t=await y.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null===g||void 0===g?void 0:g.signInWithSolana),{version:"1",domain:v.host,uri:v.href}),m?{statement:m}:null));let e;if(Array.isArray(t)&&t[0]&&"object"===typeof t[0])e=t[0];else{if(!(t&&"object"===typeof t&&"signedMessage"in t&&"signature"in t))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");e=t}if(!("signedMessage"in e&&"signature"in e&&("string"===typeof e.signedMessage||e.signedMessage instanceof Uint8Array)&&e.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");f="string"===typeof e.signedMessage?e.signedMessage:(new TextDecoder).decode(e.signedMessage),p=e.signature}else{if(!("signMessage"in y)||"function"!==typeof y.signMessage||!("publicKey"in y)||"object"!==typeof y||!y.publicKey||!("toBase58"in y.publicKey)||"function"!==typeof y.publicKey.toBase58)throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");f=[`${v.host} wants you to sign in with your Solana account:`,y.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1",`URI: ${v.href}`,`Issued At: ${null!==(r=null===(n=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===n?void 0:n.issuedAt)&&void 0!==r?r:(new Date).toISOString()}`,...(null===(s=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===s?void 0:s.notBefore)?[`Not Before: ${g.signInWithSolana.notBefore}`]:[],...(null===(i=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===i?void 0:i.expirationTime)?[`Expiration Time: ${g.signInWithSolana.expirationTime}`]:[],...(null===(o=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===o?void 0:o.chainId)?[`Chain ID: ${g.signInWithSolana.chainId}`]:[],...(null===(a=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===a?void 0:a.nonce)?[`Nonce: ${g.signInWithSolana.nonce}`]:[],...(null===(c=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===c?void 0:c.requestId)?[`Request ID: ${g.signInWithSolana.requestId}`]:[],...(null===(u=null===(l=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===l?void 0:l.resources)||void 0===u?void 0:u.length)?["Resources",...g.signInWithSolana.resources.map((t=>`- ${t}`))]:[]].join("\n");const t=await y.signMessage((new TextEncoder).encode(f),"utf8");if(!t||!(t instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");p=t}}try{const{data:e,error:n}=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:f,signature:Ae(p)},(null===(h=t.options)||void 0===h?void 0:h.captchaToken)?{gotrue_meta_security:{captcha_token:null===(d=t.options)||void 0===d?void 0:d.captchaToken}}:null),xform:Xe});if(n)throw n;if(!e||!e.session||!e.user){const t=new ue;return this._returnResult({data:{user:null,session:null},error:t})}return e.session&&(await this._saveSession(e.session),await this._notifyAllSubscribers("SIGNED_IN",e.session)),this._returnResult({data:Object.assign({},e),error:n})}catch(m){if(ie(m))return this._returnResult({data:{user:null,session:null},error:m});throw m}}async _exchangeCodeForSession(t){const e=await Me(this.storage,`${this.storageKey}-code-verifier`),[n,r]=(null!==e&&void 0!==e?e:"").split("/");try{const{data:e,error:s}=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Xe});if(await $e(this.storage,`${this.storageKey}-code-verifier`),s)throw s;if(!e||!e.session||!e.user){const t=new ue;return this._returnResult({data:{user:null,session:null,redirectType:null},error:t})}return e.session&&(await this._saveSession(e.session),await this._notifyAllSubscribers("SIGNED_IN",e.session)),this._returnResult({data:Object.assign(Object.assign({},e),{redirectType:null!==r&&void 0!==r?r:null}),error:s})}catch(s){if(ie(s))return this._returnResult({data:{user:null,session:null,redirectType:null},error:s});throw s}}async signInWithIdToken(t){try{const{options:e,provider:n,token:r,access_token:s,nonce:i}=t,o=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:r,access_token:s,nonce:i,gotrue_meta_security:{captcha_token:null===e||void 0===e?void 0:e.captchaToken}},xform:Xe}),{data:a,error:c}=o;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!a||!a.session||!a.user){const t=new ue;return this._returnResult({data:{user:null,session:null},error:t})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:a,error:c})}catch(e){if(ie(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async signInWithOtp(t){var e,n,r,s,i;try{if("email"in t){const{email:r,options:s}=t;let i=null,o=null;"pkce"===this.flowType&&([i,o]=await Ne(this.storage,this.storageKey));const{error:a}=await Ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:r,data:null!==(e=null===s||void 0===s?void 0:s.data)&&void 0!==e?e:{},create_user:null===(n=null===s||void 0===s?void 0:s.shouldCreateUser)||void 0===n||n,gotrue_meta_security:{captcha_token:null===s||void 0===s?void 0:s.captchaToken},code_challenge:i,code_challenge_method:o},redirectTo:null===s||void 0===s?void 0:s.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}if("phone"in t){const{phone:e,options:n}=t,{data:o,error:a}=await Ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:e,data:null!==(r=null===n||void 0===n?void 0:n.data)&&void 0!==r?r:{},create_user:null===(s=null===n||void 0===n?void 0:n.shouldCreateUser)||void 0===s||s,gotrue_meta_security:{captcha_token:null===n||void 0===n?void 0:n.captchaToken},channel:null!==(i=null===n||void 0===n?void 0:n.channel)&&void 0!==i?i:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:null===o||void 0===o?void 0:o.message_id},error:a})}throw new he("You must provide either an email or phone number.")}catch(o){if(ie(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async verifyOtp(t){var e,n;try{let r,s;"options"in t&&(r=null===(e=t.options)||void 0===e?void 0:e.redirectTo,s=null===(n=t.options)||void 0===n?void 0:n.captchaToken);const{data:i,error:o}=await Ge(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:s}}),redirectTo:r,xform:Xe});if(o)throw o;if(!i){throw new Error("An error occurred on token verification.")}const a=i.session,c=i.user;return(null===a||void 0===a?void 0:a.access_token)&&(await this._saveSession(a),await this._notifyAllSubscribers("recovery"==t.type?"PASSWORD_RECOVERY":"SIGNED_IN",a)),this._returnResult({data:{user:c,session:a},error:null})}catch(r){if(ie(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithSSO(t){var e,n,r,s,i;try{let o=null,a=null;"pkce"===this.flowType&&([o,a]=await Ne(this.storage,this.storageKey));const c=await Ge(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:null!==(n=null===(e=t.options)||void 0===e?void 0:e.redirectTo)&&void 0!==n?n:void 0}),(null===(r=null===t||void 0===t?void 0:t.options)||void 0===r?void 0:r.captchaToken)?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:a}),headers:this.headers,xform:tn});return(null===(s=c.data)||void 0===s?void 0:s.url)&&Re()&&!(null===(i=t.options)||void 0===i?void 0:i.skipBrowserRedirect)&&window.location.assign(c.data.url),this._returnResult(c)}catch(o){if(ie(o))return this._returnResult({data:null,error:o});throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._reauthenticate()))}async _reauthenticate(){try{return await this._useSession((async t=>{const{data:{session:e},error:n}=t;if(n)throw n;if(!e)throw new le;const{error:r}=await Ge(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:e.access_token});return this._returnResult({data:{user:null,session:null},error:r})}))}catch(t){if(ie(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const e=`${this.url}/resend`;if("email"in t){const{email:n,type:r,options:s}=t,{error:i}=await Ge(this.fetch,"POST",e,{headers:this.headers,body:{email:n,type:r,gotrue_meta_security:{captcha_token:null===s||void 0===s?void 0:s.captchaToken}},redirectTo:null===s||void 0===s?void 0:s.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:i})}if("phone"in t){const{phone:n,type:r,options:s}=t,{data:i,error:o}=await Ge(this.fetch,"POST",e,{headers:this.headers,body:{phone:n,type:r,gotrue_meta_security:{captcha_token:null===s||void 0===s?void 0:s.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:null===i||void 0===i?void 0:i.message_id},error:o})}throw new he("You must provide either an email or phone number and a type")}catch(e){if(ie(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async getSession(){await this.initializePromise;return await this._acquireLock(-1,(async()=>this._useSession((async t=>t))))}async _acquireLock(t,e){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const t=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await t,await e()))();return this.pendingInLock.push((async()=>{try{await n}catch(t){}})()),n}return await this.lock(`lock:${this.storageKey}`,t,(async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const t=e();for(this.pendingInLock.push((async()=>{try{await t}catch(e){}})()),await t;this.pendingInLock.length;){const t=[...this.pendingInLock];await Promise.all(t),this.pendingInLock.splice(0,t.length)}return await t}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}}))}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const e=await this.__loadSession();return await t(e)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let t=null;const e=await Me(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",e),null!==e&&(this._isValidSession(e)?t=e:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=!!t.expires_at&&1e3*t.expires_at-Date.now()<Qt;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const e=await Me(this.userStorage,this.storageKey+"-user");(null===e||void 0===e?void 0:e.user)?t.user=e.user:t.user=We()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const e={value:this.suppressGetSessionWarning};t.user=function(t,e){return new Proxy(t,{get:(t,n,r)=>{if("__isInsecureUserWarningProxy"===n)return!0;if("symbol"===typeof n){const e=n.toString();if("Symbol(Symbol.toPrimitive)"===e||"Symbol(Symbol.toStringTag)"===e||"Symbol(util.inspect.custom)"===e||"Symbol(nodejs.util.inspect.custom)"===e)return Reflect.get(t,n,r)}return e.value||"string"!==typeof n||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(t,n,r)}})}(t.user,e),e.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:r,error:s}=await this._callRefreshToken(t.refresh_token);return s?this._returnResult({data:{session:null},error:s}):this._returnResult({data:{session:r},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;return await this._acquireLock(-1,(async()=>await this._getUser()))}async _getUser(t){try{return t?await Ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Qe}):await this._useSession((async t=>{var e,n,r;const{data:s,error:i}=t;if(i)throw i;return(null===(e=s.session)||void 0===e?void 0:e.access_token)||this.hasCustomAuthorizationHeader?await Ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!==(r=null===(n=s.session)||void 0===n?void 0:n.access_token)&&void 0!==r?r:void 0,xform:Qe}):{data:{user:null},error:new le}}))}catch(e){if(ie(e))return function(t){return ie(t)&&"AuthSessionMissingError"===t.name}(e)&&(await this._removeSession(),await $e(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:e});throw e}}async updateUser(t,e={}){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._updateUser(t,e)))}async _updateUser(t,e={}){try{return await this._useSession((async n=>{const{data:r,error:s}=n;if(s)throw s;if(!r.session)throw new le;const i=r.session;let o=null,a=null;"pkce"===this.flowType&&null!=t.email&&([o,a]=await Ne(this.storage,this.storageKey));const{data:c,error:l}=await Ge(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null===e||void 0===e?void 0:e.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:o,code_challenge_method:a}),jwt:i.access_token,xform:Qe});if(l)throw l;return i.user=c.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),this._returnResult({data:{user:i.user},error:null})}))}catch(n){if(ie(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._setSession(t)))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new le;const e=Date.now()/1e3;let n=e,r=!0,s=null;const{payload:i}=Ue(t.access_token);if(i.exp&&(n=i.exp,r=n<=e),r){const{data:e,error:n}=await this._callRefreshToken(t.refresh_token);if(n)return this._returnResult({data:{user:null,session:null},error:n});if(!e)return{data:{user:null,session:null},error:null};s=e}else{const{data:r,error:i}=await this._getUser(t.access_token);if(i)throw i;s={access_token:t.access_token,refresh_token:t.refresh_token,user:r.user,token_type:"bearer",expires_in:n-e,expires_at:n},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return this._returnResult({data:{user:s.user,session:s},error:null})}catch(e){if(ie(e))return this._returnResult({data:{session:null,user:null},error:e});throw e}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._refreshSession(t)))}async _refreshSession(t){try{return await this._useSession((async e=>{var n;if(!t){const{data:r,error:s}=e;if(s)throw s;t=null!==(n=r.session)&&void 0!==n?n:void 0}if(!(null===t||void 0===t?void 0:t.refresh_token))throw new le;const{data:r,error:s}=await this._callRefreshToken(t.refresh_token);return s?this._returnResult({data:{user:null,session:null},error:s}):r?this._returnResult({data:{user:r.user,session:r},error:null}):this._returnResult({data:{user:null,session:null},error:null})}))}catch(e){if(ie(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async _getSessionFromURL(t,e){try{if(!Re())throw new de("No browser detected.");if(t.error||t.error_description||t.error_code)throw new de(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(e){case"implicit":if("pkce"===this.flowType)throw new fe("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new de("Not a valid implicit grant flow url.")}if("pkce"===e){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new fe("No code detected.");const{data:e,error:n}=await this._exchangeCodeForSession(t.code);if(n)throw n;const r=new URL(window.location.href);return r.searchParams.delete("code"),window.history.replaceState(window.history.state,"",r.toString()),{data:{session:e.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:r,access_token:s,refresh_token:i,expires_in:o,expires_at:a,token_type:c}=t;if(!s||!o||!i||!c)throw new de("No session defined in URL");const l=Math.round(Date.now()/1e3),u=parseInt(o);let h=l+u;a&&(h=parseInt(a));const d=h-l;1e3*d<=Yt&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${d}s, should have been closer to ${u}s`);const f=h-u;l-f>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",f,h,l):l-f<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",f,h,l);const{data:p,error:m}=await this._getUser(s);if(m)throw m;const g={provider_token:n,provider_refresh_token:r,access_token:s,expires_in:u,expires_at:h,refresh_token:i,token_type:c,user:p.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:g,redirectType:t.type},error:null})}catch(n){if(ie(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(t){return Boolean(t.access_token||t.error_description)}async _isPKCECallback(t){const e=await Me(this.storage,`${this.storageKey}-code-verifier`);return!(!t.code||!e)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._signOut(t)))}async _signOut({scope:t}={scope:"global"}){return await this._useSession((async e=>{var n;const{data:r,error:s}=e;if(s)return this._returnResult({error:s});const i=null===(n=r.session)||void 0===n?void 0:n.access_token;if(i){const{error:e}=await this.admin.signOut(i,t);if(e&&(!function(t){return ie(t)&&"AuthApiError"===t.name}(e)||404!==e.status&&401!==e.status&&403!==e.status))return this._returnResult({error:e})}return"others"!==t&&(await this._removeSession(),await $e(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})}))}onAuthStateChange(t){const e=Symbol("auth-callback"),n={id:e,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",e),this.stateChangeEmitters.delete(e)}};return this._debug("#onAuthStateChange()","registered callback with id",e),this.stateChangeEmitters.set(e,n),(async()=>{await this.initializePromise,await this._acquireLock(-1,(async()=>{this._emitInitialSession(e)}))})(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession((async e=>{var n,r;try{const{data:{session:r},error:s}=e;if(s)throw s;await(null===(n=this.stateChangeEmitters.get(t))||void 0===n?void 0:n.callback("INITIAL_SESSION",r)),this._debug("INITIAL_SESSION","callback id",t,"session",r)}catch(s){await(null===(r=this.stateChangeEmitters.get(t))||void 0===r?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",s),console.error(s)}}))}async resetPasswordForEmail(t,e={}){let n=null,r=null;"pkce"===this.flowType&&([n,r]=await Ne(this.storage,this.storageKey,!0));try{return await Ge(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:r,gotrue_meta_security:{captcha_token:e.captchaToken}},headers:this.headers,redirectTo:e.redirectTo})}catch(s){if(ie(s))return this._returnResult({data:null,error:s});throw s}}async getUserIdentities(){var t;try{const{data:e,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:null!==(t=e.user.identities)&&void 0!==t?t:[]},error:null})}catch(e){if(ie(e))return this._returnResult({data:null,error:e});throw e}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var e;try{const{data:n,error:r}=await this._useSession((async e=>{var n,r,s,i,o;const{data:a,error:c}=e;if(c)throw c;const l=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:null===(n=t.options)||void 0===n?void 0:n.redirectTo,scopes:null===(r=t.options)||void 0===r?void 0:r.scopes,queryParams:null===(s=t.options)||void 0===s?void 0:s.queryParams,skipBrowserRedirect:!0});return await Ge(this.fetch,"GET",l,{headers:this.headers,jwt:null!==(o=null===(i=a.session)||void 0===i?void 0:i.access_token)&&void 0!==o?o:void 0})}));if(r)throw r;return Re()&&!(null===(e=t.options)||void 0===e?void 0:e.skipBrowserRedirect)&&window.location.assign(null===n||void 0===n?void 0:n.url),this._returnResult({data:{provider:t.provider,url:null===n||void 0===n?void 0:n.url},error:null})}catch(n){if(ie(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}}async linkIdentityIdToken(t){return await this._useSession((async e=>{var n;try{const{error:r,data:{session:s}}=e;if(r)throw r;const{options:i,provider:o,token:a,access_token:c,nonce:l}=t,u=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:null!==(n=null===s||void 0===s?void 0:s.access_token)&&void 0!==n?n:void 0,body:{provider:o,id_token:a,access_token:c,nonce:l,link_identity:!0,gotrue_meta_security:{captcha_token:null===i||void 0===i?void 0:i.captchaToken}},xform:Xe}),{data:h,error:d}=u;return d?this._returnResult({data:{user:null,session:null},error:d}):h&&h.session&&h.user?(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("USER_UPDATED",h.session)),this._returnResult({data:h,error:d})):this._returnResult({data:{user:null,session:null},error:new ue})}catch(r){if(ie(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}))}async unlinkIdentity(t){try{return await this._useSession((async e=>{var n,r;const{data:s,error:i}=e;if(i)throw i;return await Ge(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:null!==(r=null===(n=s.session)||void 0===n?void 0:n.access_token)&&void 0!==r?r:void 0})}))}catch(e){if(ie(e))return this._returnResult({data:null,error:e});throw e}}async _refreshAccessToken(t){const e=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(e,"begin");try{const s=Date.now();return await(n=async n=>(n>0&&await async function(t){return await new Promise((e=>{setTimeout((()=>e(null)),t)}))}(200*Math.pow(2,n-1)),this._debug(e,"refreshing attempt",n),await Ge(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Xe})),r=(t,e)=>{const n=200*Math.pow(2,t);return e&&me(e)&&Date.now()+n-s<Yt},new Promise(((t,e)=>{(async()=>{for(let i=0;i<1/0;i++)try{const e=await n(i);if(!r(i,null,e))return void t(e)}catch(s){if(!r(i,s))return void e(s)}})()})))}catch(s){if(this._debug(e,"error",s),ie(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}finally{this._debug(e,"end")}var n,r}_isValidSession(t){return"object"===typeof t&&null!==t&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,e){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:e.redirectTo,scopes:e.scopes,queryParams:e.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",e,"url",n),Re()&&!e.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await Me(this.storage,this.storageKey);if(s&&this.userStorage){let e=await Me(this.userStorage,this.storageKey+"-user");this.storage.isServer||!Object.is(this.storage,this.userStorage)||e||(e={user:s.user},await Ie(this.userStorage,this.storageKey+"-user",e)),s.user=null!==(t=null===e||void 0===e?void 0:e.user)&&void 0!==t?t:We()}else if(s&&!s.user&&!s.user){const t=await Me(this.storage,this.storageKey+"-user");t&&(null===t||void 0===t?void 0:t.user)?(s.user=t.user,await $e(this.storage,this.storageKey+"-user"),await Ie(this.storage,this.storageKey,s)):s.user=We()}if(this._debug(n,"session from storage",s),!this._isValidSession(s))return this._debug(n,"session is not valid"),void(null!==s&&await this._removeSession());const i=1e3*(null!==(e=s.expires_at)&&void 0!==e?e:1/0)-Date.now()<Qt;if(this._debug(n,`session has${i?"":" not"} expired with margin of 90000s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:t}=await this._callRefreshToken(s.refresh_token);t&&(console.error(t),me(t)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",t),await this._removeSession()))}}else if(s.user&&!0===s.user.__isUserNotAvailableProxy)try{const{data:t,error:e}=await this._getUser(s.access_token);!e&&(null===t||void 0===t?void 0:t.user)?(s.user=t.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(r){console.error("Error getting user data:",r),this._debug(n,"error getting user data, skipping SIGNED_IN notification",r)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){return this._debug(n,"error",s),void console.error(s)}finally{this._debug(n,"end")}}async _callRefreshToken(t){var e,n;if(!t)throw new le;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new Le;const{data:e,error:n}=await this._refreshAccessToken(t);if(n)throw n;if(!e.session)throw new le;await this._saveSession(e.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",e.session);const r={data:e.session,error:null};return this.refreshingDeferred.resolve(r),r}catch(s){if(this._debug(r,"error",s),ie(s)){const t={data:null,error:s};return me(s)||await this._removeSession(),null===(e=this.refreshingDeferred)||void 0===e||e.resolve(t),t}throw null===(n=this.refreshingDeferred)||void 0===n||n.reject(s),s}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(t,e,n=!0){const r=`#_notifyAllSubscribers(${t})`;this._debug(r,"begin",e,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:e});const r=[],s=Array.from(this.stateChangeEmitters.values()).map((async n=>{try{await n.callback(t,e)}catch(s){r.push(s)}}));if(await Promise.all(s),r.length>0){for(let t=0;t<r.length;t+=1)console.error(r[t]);throw r[0]}}finally{this._debug(r,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const e=Object.assign({},t),n=e.user&&!0===e.user.__isUserNotAvailableProxy;if(this.userStorage){!n&&e.user&&await Ie(this.userStorage,this.storageKey+"-user",{user:e.user});const t=Object.assign({},e);delete t.user;const r=ze(t);await Ie(this.storage,this.storageKey,r)}else{const t=ze(e);await Ie(this.storage,this.storageKey,t)}}async _removeSession(){this._debug("#_removeSession()"),await $e(this.storage,this.storageKey),await $e(this.storage,this.storageKey+"-code-verifier"),await $e(this.storage,this.storageKey+"-user"),this.userStorage&&await $e(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Re()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(e){console.error("removing visibilitychange callback failed",e)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval((()=>this._autoRefreshTokenTick()),Yt);this.autoRefreshTicker=t,t&&"object"===typeof t&&"function"===typeof t.unref?t.unref():"undefined"!==typeof Deno&&"function"===typeof Deno.unrefTimer&&Deno.unrefTimer(t),setTimeout((async()=>{await this.initializePromise,await this._autoRefreshTokenTick()}),0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,(async()=>{try{const e=Date.now();try{return await this._useSession((async t=>{const{data:{session:n}}=t;if(!n||!n.refresh_token||!n.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const r=Math.floor((1e3*n.expires_at-e)/Yt);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),r<=3&&await this._callRefreshToken(n.refresh_token)}))}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}}))}catch(t){if(!(t.isAcquireTimeout||t instanceof cn))throw t;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Re()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const e=`#_onVisibilityChanged(${t})`;this._debug(e,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,(async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(e,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")})))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,e,n){const r=[`provider=${encodeURIComponent(e)}`];if((null===n||void 0===n?void 0:n.redirectTo)&&r.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),(null===n||void 0===n?void 0:n.scopes)&&r.push(`scopes=${encodeURIComponent(n.scopes)}`),"pkce"===this.flowType){const[t,e]=await Ne(this.storage,this.storageKey),n=new URLSearchParams({code_challenge:`${encodeURIComponent(t)}`,code_challenge_method:`${encodeURIComponent(e)}`});r.push(n.toString())}if(null===n||void 0===n?void 0:n.queryParams){const t=new URLSearchParams(n.queryParams);r.push(t.toString())}return(null===n||void 0===n?void 0:n.skipBrowserRedirect)&&r.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${r.join("&")}`}async _unenroll(t){try{return await this._useSession((async e=>{var n;const{data:r,error:s}=e;return s?this._returnResult({data:null,error:s}):await Ge(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:null===(n=null===r||void 0===r?void 0:r.session)||void 0===n?void 0:n.access_token})}))}catch(e){if(ie(e))return this._returnResult({data:null,error:e});throw e}}async _enroll(t){try{return await this._useSession((async e=>{var n,r;const{data:s,error:i}=e;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},"phone"===t.factorType?{phone:t.phone}:"totp"===t.factorType?{issuer:t.issuer}:{}),{data:a,error:c}=await Ge(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:null===(n=null===s||void 0===s?void 0:s.session)||void 0===n?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):("totp"===t.factorType&&"totp"===a.type&&(null===(r=null===a||void 0===a?void 0:a.totp)||void 0===r?void 0:r.qr_code)&&(a.totp.qr_code=`data:image/svg+xml;utf-8,${a.totp.qr_code}`),this._returnResult({data:a,error:null}))}))}catch(e){if(ie(e))return this._returnResult({data:null,error:e});throw e}}async _verify(t){return this._acquireLock(-1,(async()=>{try{return await this._useSession((async e=>{var n;const{data:r,error:s}=e;if(s)return this._returnResult({data:null,error:s});const i=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:"create"===t.webauthn.type?bn(t.webauthn.credential_response):_n(t.webauthn.credential_response)})}:{code:t.code}),{data:o,error:a}=await Ge(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:i,headers:this.headers,jwt:null===(n=null===r||void 0===r?void 0:r.session)||void 0===n?void 0:n.access_token});return a?this._returnResult({data:null,error:a}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),this._returnResult({data:o,error:a}))}))}catch(e){if(ie(e))return this._returnResult({data:null,error:e});throw e}}))}async _challenge(t){return this._acquireLock(-1,(async()=>{try{return await this._useSession((async e=>{var n;const{data:r,error:s}=e;if(s)return this._returnResult({data:null,error:s});const i=await Ge(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:null===(n=null===r||void 0===r?void 0:r.session)||void 0===n?void 0:n.access_token});if(i.error)return i;const{data:o}=i;if("webauthn"!==o.type)return{data:o,error:null};switch(o.webauthn.type){case"create":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:vn(o.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:wn(o.webauthn.credential_options.publicKey)})})}),error:null}}}))}catch(e){if(ie(e))return this._returnResult({data:null,error:e});throw e}}))}async _challengeAndVerify(t){const{data:e,error:n}=await this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:t.factorId,challengeId:e.id,code:t.code})}async _listFactors(){var t;const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r={all:[],phone:[],totp:[],webauthn:[]};for(const s of null!==(t=null===e||void 0===e?void 0:e.factors)&&void 0!==t?t:[])r.all.push(s),"verified"===s.status&&r[s.factor_type].push(s);return{data:r,error:null}}async _getAuthenticatorAssuranceLevel(){var t,e;const{data:{session:n},error:r}=await this.getSession();if(r)return this._returnResult({data:null,error:r});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:s}=Ue(n.access_token);let i=null;s.aal&&(i=s.aal);let o=i;(null!==(e=null===(t=n.user.factors)||void 0===t?void 0:t.filter((t=>"verified"===t.status)))&&void 0!==e?e:[]).length>0&&(o="aal2");return{data:{currentLevel:i,nextLevel:o,currentAuthenticationMethods:s.amr||[]},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession((async e=>{const{data:{session:n},error:r}=e;return r?this._returnResult({data:null,error:r}):n?await Ge(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:t=>({data:t,error:null})}):this._returnResult({data:null,error:new le})}))}catch(e){if(ie(e))return this._returnResult({data:null,error:e});throw e}}async _approveAuthorization(t,e){try{return await this._useSession((async n=>{const{data:{session:r},error:s}=n;if(s)return this._returnResult({data:null,error:s});if(!r)return this._returnResult({data:null,error:new le});const i=await Ge(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:r.access_token,body:{action:"approve"},xform:t=>({data:t,error:null})});return i.data&&i.data.redirect_url&&Re()&&!(null===e||void 0===e?void 0:e.skipBrowserRedirect)&&window.location.assign(i.data.redirect_url),i}))}catch(n){if(ie(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(t,e){try{return await this._useSession((async n=>{const{data:{session:r},error:s}=n;if(s)return this._returnResult({data:null,error:s});if(!r)return this._returnResult({data:null,error:new le});const i=await Ge(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:r.access_token,body:{action:"deny"},xform:t=>({data:t,error:null})});return i.data&&i.data.redirect_url&&Re()&&!(null===e||void 0===e?void 0:e.skipBrowserRedirect)&&window.location.assign(i.data.redirect_url),i}))}catch(n){if(ie(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(t,e={keys:[]}){let n=e.keys.find((e=>e.kid===t));if(n)return n;const r=Date.now();if(n=this.jwks.keys.find((e=>e.kid===t)),n&&this.jwks_cached_at+6e5>r)return n;const{data:s,error:i}=await Ge(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;return s.keys&&0!==s.keys.length?(this.jwks=s,this.jwks_cached_at=r,n=s.keys.find((e=>e.kid===t)),n||null):null}async getClaims(t,e={}){try{let n=t;if(!n){const{data:t,error:e}=await this.getSession();if(e||!t.session)return this._returnResult({data:null,error:e});n=t.session.access_token}const{header:r,payload:s,signature:i,raw:{header:o,payload:a}}=Ue(n);(null===e||void 0===e?void 0:e.allowExpired)||function(t){if(!t)throw new Error("Missing exp claim");if(t<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(s.exp);const c=r.alg&&!r.alg.startsWith("HS")&&r.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?await this.fetchJwk(r.kid,(null===e||void 0===e?void 0:e.keys)?{keys:e.keys}:null===e||void 0===e?void 0:e.jwks):null;if(!c){const{error:t}=await this.getUser(n);if(t)throw t;return{data:{claims:s,header:r,signature:i},error:null}}const l=function(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(r.alg),u=await crypto.subtle.importKey("jwk",c,l,!0,["verify"]);if(!(await crypto.subtle.verify(l,u,i,function(t){const e=[];return Te(t,(t=>e.push(t))),new Uint8Array(e)}(`${o}.${a}`))))throw new ye("Invalid JWT signature");return{data:{claims:s,header:r,signature:i},error:null}}catch(n){if(ie(n))return this._returnResult({data:null,error:n});throw n}}}jn.nextInstanceID={};var Cn=jn;class In extends Cn{constructor(t){super(t)}}class Mn{constructor(t,e,n){var r,s,i;this.supabaseUrl=t,this.supabaseKey=e;const o=function(t){const e=null===t||void 0===t?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL((n=e).endsWith("/")?n:n+"/")}catch(r){throw Error("Invalid supabaseUrl: Provided URL is malformed.")}var n}(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const a=`sb-${o.hostname.split(".")[0]}-auth-token`,c=function(t,e){var n,r;const{db:s,auth:i,realtime:o,global:a}=t,{db:c,auth:l,realtime:u,global:h}=e,d={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},l),i),realtime:Object.assign(Object.assign({},u),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),a),{headers:Object.assign(Object.assign({},null!==(n=null===h||void 0===h?void 0:h.headers)&&void 0!==n?n:{}),null!==(r=null===a||void 0===a?void 0:a.headers)&&void 0!==r?r:{})}),accessToken:async()=>""};return t.accessToken?d.accessToken=t.accessToken:delete d.accessToken,d}(null!==n&&void 0!==n?n:{},{db:Ht,realtime:Zt,auth:Object.assign(Object.assign({},Kt),{storageKey:a}),global:zt});this.storageKey=null!==(r=c.auth.storageKey)&&void 0!==r?r:"",this.headers=null!==(s=c.global.headers)&&void 0!==s?s:{},c.accessToken?(this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(t,e)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(e)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(i=c.auth)&&void 0!==i?i:{},this.headers,c.global.fetch),this.fetch=Gt(e,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.accessToken&&this.accessToken().then((t=>this.realtime.setAuth(t))).catch((t=>console.warn("Failed to set initial Realtime auth token:",t))),this.rest=new d(new URL("rest/v1",o).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),this.storage=new qt(this.storageUrl.href,this.headers,this.fetch,null===n||void 0===n?void 0:n.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new l(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,n)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t,e;if(this.accessToken)return await this.accessToken();const{data:n}=await this.auth.getSession();return null!==(e=null===(t=n.session)||void 0===t?void 0:t.access_token)&&void 0!==e?e:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:s,storageKey:i,flowType:o,lock:a,debug:c,throwOnError:l},u,h){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new In({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),u),storageKey:i,autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:s,flowType:o,lock:a,debug:c,throwOnError:l,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some((t=>"authorization"===t.toLowerCase()))})}_initRealtimeClient(t){return new Q(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},null===t||void 0===t?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange(((t,e)=>{this._handleTokenChanged(t,"CLIENT",null===e||void 0===e?void 0:e.access_token)}))}_handleTokenChanged(t,e,n){"TOKEN_REFRESHED"!==t&&"SIGNED_IN"!==t||this.changedAccessToken===n?"SIGNED_OUT"===t&&(this.realtime.setAuth(),"STORAGE"==e&&this.auth.signOut(),this.changedAccessToken=void 0):(this.changedAccessToken=n,this.realtime.setAuth(n))}}var $n=n(5566);const Ln=(t,e,n)=>new Mn(t,e,n);(function(){if("undefined"!==typeof window)return!1;if("undefined"===typeof $n)return!1;const t=$n.version;if(void 0===t||null===t)return!1;const e=t.match(/^v(\d+)\./);return!!e&&parseInt(e[1],10)<=18})()&&console.warn("\u26a0\ufe0f  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217")},9196:function(t,e){"use strict";e.byteLength=function(t){var e=a(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){var e,n,i=a(t),o=i[0],c=i[1],l=new s(function(t,e,n){return 3*(e+n)/4-n}(0,o,c)),u=0,h=c>0?o-4:o;for(n=0;n<h;n+=4)e=r[t.charCodeAt(n)]<<18|r[t.charCodeAt(n+1)]<<12|r[t.charCodeAt(n+2)]<<6|r[t.charCodeAt(n+3)],l[u++]=e>>16&255,l[u++]=e>>8&255,l[u++]=255&e;2===c&&(e=r[t.charCodeAt(n)]<<2|r[t.charCodeAt(n+1)]>>4,l[u++]=255&e);1===c&&(e=r[t.charCodeAt(n)]<<10|r[t.charCodeAt(n+1)]<<4|r[t.charCodeAt(n+2)]>>2,l[u++]=e>>8&255,l[u++]=255&e);return l},e.fromByteArray=function(t){for(var e,r=t.length,s=r%3,i=[],o=16383,a=0,l=r-s;a<l;a+=o)i.push(c(t,a,a+o>l?l:a+o));1===s?(e=t[r-1],i.push(n[e>>2]+n[e<<4&63]+"==")):2===s&&(e=(t[r-2]<<8)+t[r-1],i.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"="));return i.join("")};for(var n=[],r=[],s="undefined"!==typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0;o<64;++o)n[o]=i[o],r[i.charCodeAt(o)]=o;function a(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function c(t,e,r){for(var s,i,o=[],a=e;a<r;a+=3)s=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),o.push(n[(i=s)>>18&63]+n[i>>12&63]+n[i>>6&63]+n[63&i]);return o.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},2957:function(t,e,n){"use strict";const r=n(9196),s=n(8848),i="function"===typeof Symbol&&"function"===typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.lW=c,e.h2=50;const o=2147483647;function a(t){if(t>o)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new Uint8Array(t);return Object.setPrototypeOf(e,c.prototype),e}function c(t,e,n){if("number"===typeof t){if("string"===typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return h(t)}return l(t,e,n)}function l(t,e,n){if("string"===typeof t)return function(t,e){"string"===typeof e&&""!==e||(e="utf8");if(!c.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const n=0|m(t,e);let r=a(n);const s=r.write(t,e);s!==n&&(r=r.slice(0,s));return r}(t,e);if(ArrayBuffer.isView(t))return function(t){if(J(t,Uint8Array)){const e=new Uint8Array(t);return f(e.buffer,e.byteOffset,e.byteLength)}return d(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(J(t,ArrayBuffer)||t&&J(t.buffer,ArrayBuffer))return f(t,e,n);if("undefined"!==typeof SharedArrayBuffer&&(J(t,SharedArrayBuffer)||t&&J(t.buffer,SharedArrayBuffer)))return f(t,e,n);if("number"===typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');const r=t.valueOf&&t.valueOf();if(null!=r&&r!==t)return c.from(r,e,n);const s=function(t){if(c.isBuffer(t)){const e=0|p(t.length),n=a(e);return 0===n.length||t.copy(n,0,0,e),n}if(void 0!==t.length)return"number"!==typeof t.length||G(t.length)?a(0):d(t);if("Buffer"===t.type&&Array.isArray(t.data))return d(t.data)}(t);if(s)return s;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof t[Symbol.toPrimitive])return c.from(t[Symbol.toPrimitive]("string"),e,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function u(t){if("number"!==typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function h(t){return u(t),a(t<0?0:0|p(t))}function d(t){const e=t.length<0?0:0|p(t.length),n=a(e);for(let r=0;r<e;r+=1)n[r]=255&t[r];return n}function f(t,e,n){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(n||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===e&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,e):new Uint8Array(t,e,n),Object.setPrototypeOf(r,c.prototype),r}function p(t){if(t>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|t}function m(t,e){if(c.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||J(t,ArrayBuffer))return t.byteLength;if("string"!==typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const n=t.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;let s=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return H(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return K(t).length;default:if(s)return r?-1:H(t).length;e=(""+e).toLowerCase(),s=!0}}function g(t,e,n){let r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return O(this,e,n);case"utf8":case"utf-8":return x(this,e,n);case"ascii":return R(this,e,n);case"latin1":case"binary":return P(this,e,n);case"base64":return T(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function y(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function v(t,e,n,r,s){if(0===t.length)return-1;if("string"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),G(n=+n)&&(n=s?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(s)return-1;n=t.length-1}else if(n<0){if(!s)return-1;n=0}if("string"===typeof e&&(e=c.from(e,r)),c.isBuffer(e))return 0===e.length?-1:w(t,e,n,r,s);if("number"===typeof e)return e&=255,"function"===typeof Uint8Array.prototype.indexOf?s?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):w(t,[e],n,r,s);throw new TypeError("val must be string, number or Buffer")}function w(t,e,n,r,s){let i,o=1,a=t.length,c=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;o=2,a/=2,c/=2,n/=2}function l(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(s){let r=-1;for(i=n;i<a;i++)if(l(t,i)===l(e,-1===r?0:i-r)){if(-1===r&&(r=i),i-r+1===c)return r*o}else-1!==r&&(i-=i-r),r=-1}else for(n+c>a&&(n=a-c),i=n;i>=0;i--){let n=!0;for(let r=0;r<c;r++)if(l(t,i+r)!==l(e,r)){n=!1;break}if(n)return i}return-1}function b(t,e,n,r){n=Number(n)||0;const s=t.length-n;r?(r=Number(r))>s&&(r=s):r=s;const i=e.length;let o;for(r>i/2&&(r=i/2),o=0;o<r;++o){const r=parseInt(e.substr(2*o,2),16);if(G(r))return o;t[n+o]=r}return o}function _(t,e,n,r){return Z(H(e,t.length-n),t,n,r)}function k(t,e,n,r){return Z(function(t){const e=[];for(let n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function S(t,e,n,r){return Z(K(e),t,n,r)}function E(t,e,n,r){return Z(function(t,e){let n,r,s;const i=[];for(let o=0;o<t.length&&!((e-=2)<0);++o)n=t.charCodeAt(o),r=n>>8,s=n%256,i.push(s),i.push(r);return i}(e,t.length-n),t,n,r)}function T(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function x(t,e,n){n=Math.min(t.length,n);const r=[];let s=e;for(;s<n;){const e=t[s];let i=null,o=e>239?4:e>223?3:e>191?2:1;if(s+o<=n){let n,r,a,c;switch(o){case 1:e<128&&(i=e);break;case 2:n=t[s+1],128===(192&n)&&(c=(31&e)<<6|63&n,c>127&&(i=c));break;case 3:n=t[s+1],r=t[s+2],128===(192&n)&&128===(192&r)&&(c=(15&e)<<12|(63&n)<<6|63&r,c>2047&&(c<55296||c>57343)&&(i=c));break;case 4:n=t[s+1],r=t[s+2],a=t[s+3],128===(192&n)&&128===(192&r)&&128===(192&a)&&(c=(15&e)<<18|(63&n)<<12|(63&r)<<6|63&a,c>65535&&c<1114112&&(i=c))}}null===i?(i=65533,o=1):i>65535&&(i-=65536,r.push(i>>>10&1023|55296),i=56320|1023&i),r.push(i),s+=o}return function(t){const e=t.length;if(e<=A)return String.fromCharCode.apply(String,t);let n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=A));return n}(r)}c.TYPED_ARRAY_SUPPORT=function(){try{const t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),c.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}}),c.poolSize=8192,c.from=function(t,e,n){return l(t,e,n)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array),c.alloc=function(t,e,n){return function(t,e,n){return u(t),t<=0?a(t):void 0!==e?"string"===typeof n?a(t).fill(e,n):a(t).fill(e):a(t)}(t,e,n)},c.allocUnsafe=function(t){return h(t)},c.allocUnsafeSlow=function(t){return h(t)},c.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==c.prototype},c.compare=function(t,e){if(J(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),J(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),!c.isBuffer(t)||!c.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let n=t.length,r=e.length;for(let s=0,i=Math.min(n,r);s<i;++s)if(t[s]!==e[s]){n=t[s],r=e[s];break}return n<r?-1:r<n?1:0},c.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return c.alloc(0);let n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;const r=c.allocUnsafe(e);let s=0;for(n=0;n<t.length;++n){let e=t[n];if(J(e,Uint8Array))s+e.length>r.length?(c.isBuffer(e)||(e=c.from(e)),e.copy(r,s)):Uint8Array.prototype.set.call(r,e,s);else{if(!c.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(r,s)}s+=e.length}return r},c.byteLength=m,c.prototype._isBuffer=!0,c.prototype.swap16=function(){const t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)y(this,e,e+1);return this},c.prototype.swap32=function(){const t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)y(this,e,e+3),y(this,e+1,e+2);return this},c.prototype.swap64=function(){const t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)y(this,e,e+7),y(this,e+1,e+6),y(this,e+2,e+5),y(this,e+3,e+4);return this},c.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?x(this,0,t):g.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(t){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===c.compare(this,t)},c.prototype.inspect=function(){let t="";const n=e.h2;return t=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(t+=" ... "),"<Buffer "+t+">"},i&&(c.prototype[i]=c.prototype.inspect),c.prototype.compare=function(t,e,n,r,s){if(J(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),!c.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===s&&(s=this.length),e<0||n>t.length||r<0||s>this.length)throw new RangeError("out of range index");if(r>=s&&e>=n)return 0;if(r>=s)return-1;if(e>=n)return 1;if(this===t)return 0;let i=(s>>>=0)-(r>>>=0),o=(n>>>=0)-(e>>>=0);const a=Math.min(i,o),l=this.slice(r,s),u=t.slice(e,n);for(let c=0;c<a;++c)if(l[c]!==u[c]){i=l[c],o=u[c];break}return i<o?-1:o<i?1:0},c.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},c.prototype.indexOf=function(t,e,n){return v(this,t,e,n,!0)},c.prototype.lastIndexOf=function(t,e,n){return v(this,t,e,n,!1)},c.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"===typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}const s=this.length-e;if((void 0===n||n>s)&&(n=s),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let i=!1;for(;;)switch(r){case"hex":return b(this,t,e,n);case"utf8":case"utf-8":return _(this,t,e,n);case"ascii":case"latin1":case"binary":return k(this,t,e,n);case"base64":return S(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,t,e,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const A=4096;function R(t,e,n){let r="";n=Math.min(t.length,n);for(let s=e;s<n;++s)r+=String.fromCharCode(127&t[s]);return r}function P(t,e,n){let r="";n=Math.min(t.length,n);for(let s=e;s<n;++s)r+=String.fromCharCode(t[s]);return r}function O(t,e,n){const r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);let s="";for(let i=e;i<n;++i)s+=X[t[i]];return s}function j(t,e,n){const r=t.slice(e,n);let s="";for(let i=0;i<r.length-1;i+=2)s+=String.fromCharCode(r[i]+256*r[i+1]);return s}function C(t,e,n){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function I(t,e,n,r,s,i){if(!c.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>s||e<i)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function M(t,e,n,r,s){F(e,r,s,t,n,7);let i=Number(e&BigInt(4294967295));t[n++]=i,i>>=8,t[n++]=i,i>>=8,t[n++]=i,i>>=8,t[n++]=i;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[n++]=o,o>>=8,t[n++]=o,o>>=8,t[n++]=o,o>>=8,t[n++]=o,n}function $(t,e,n,r,s){F(e,r,s,t,n,7);let i=Number(e&BigInt(4294967295));t[n+7]=i,i>>=8,t[n+6]=i,i>>=8,t[n+5]=i,i>>=8,t[n+4]=i;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[n+3]=o,o>>=8,t[n+2]=o,o>>=8,t[n+1]=o,o>>=8,t[n]=o,n+8}function L(t,e,n,r,s,i){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function U(t,e,n,r,i){return e=+e,n>>>=0,i||L(t,0,n,4),s.write(t,e,n,r,23,4),n+4}function D(t,e,n,r,i){return e=+e,n>>>=0,i||L(t,0,n,8),s.write(t,e,n,r,52,8),n+8}c.prototype.slice=function(t,e){const n=this.length;(t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t);const r=this.subarray(t,e);return Object.setPrototypeOf(r,c.prototype),r},c.prototype.readUintLE=c.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||C(t,e,this.length);let r=this[t],s=1,i=0;for(;++i<e&&(s*=256);)r+=this[t+i]*s;return r},c.prototype.readUintBE=c.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||C(t,e,this.length);let r=this[t+--e],s=1;for(;e>0&&(s*=256);)r+=this[t+--e]*s;return r},c.prototype.readUint8=c.prototype.readUInt8=function(t,e){return t>>>=0,e||C(t,1,this.length),this[t]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(t,e){return t>>>=0,e||C(t,2,this.length),this[t]|this[t+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(t,e){return t>>>=0,e||C(t,2,this.length),this[t]<<8|this[t+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(t,e){return t>>>=0,e||C(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(t,e){return t>>>=0,e||C(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},c.prototype.readBigUInt64LE=Y((function(t){q(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||W(t,this.length-8);const r=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,s=this[++t]+256*this[++t]+65536*this[++t]+n*2**24;return BigInt(r)+(BigInt(s)<<BigInt(32))})),c.prototype.readBigUInt64BE=Y((function(t){q(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||W(t,this.length-8);const r=e*2**24+65536*this[++t]+256*this[++t]+this[++t],s=this[++t]*2**24+65536*this[++t]+256*this[++t]+n;return(BigInt(r)<<BigInt(32))+BigInt(s)})),c.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||C(t,e,this.length);let r=this[t],s=1,i=0;for(;++i<e&&(s*=256);)r+=this[t+i]*s;return s*=128,r>=s&&(r-=Math.pow(2,8*e)),r},c.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||C(t,e,this.length);let r=e,s=1,i=this[t+--r];for(;r>0&&(s*=256);)i+=this[t+--r]*s;return s*=128,i>=s&&(i-=Math.pow(2,8*e)),i},c.prototype.readInt8=function(t,e){return t>>>=0,e||C(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},c.prototype.readInt16LE=function(t,e){t>>>=0,e||C(t,2,this.length);const n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(t,e){t>>>=0,e||C(t,2,this.length);const n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(t,e){return t>>>=0,e||C(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},c.prototype.readInt32BE=function(t,e){return t>>>=0,e||C(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},c.prototype.readBigInt64LE=Y((function(t){q(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||W(t,this.length-8);const r=this[t+4]+256*this[t+5]+65536*this[t+6]+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)})),c.prototype.readBigInt64BE=Y((function(t){q(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||W(t,this.length-8);const r=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(r)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+n)})),c.prototype.readFloatLE=function(t,e){return t>>>=0,e||C(t,4,this.length),s.read(this,t,!0,23,4)},c.prototype.readFloatBE=function(t,e){return t>>>=0,e||C(t,4,this.length),s.read(this,t,!1,23,4)},c.prototype.readDoubleLE=function(t,e){return t>>>=0,e||C(t,8,this.length),s.read(this,t,!0,52,8)},c.prototype.readDoubleBE=function(t,e){return t>>>=0,e||C(t,8,this.length),s.read(this,t,!1,52,8)},c.prototype.writeUintLE=c.prototype.writeUIntLE=function(t,e,n,r){if(t=+t,e>>>=0,n>>>=0,!r){I(this,t,e,n,Math.pow(2,8*n)-1,0)}let s=1,i=0;for(this[e]=255&t;++i<n&&(s*=256);)this[e+i]=t/s&255;return e+n},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(t,e,n,r){if(t=+t,e>>>=0,n>>>=0,!r){I(this,t,e,n,Math.pow(2,8*n)-1,0)}let s=n-1,i=1;for(this[e+s]=255&t;--s>=0&&(i*=256);)this[e+s]=t/i&255;return e+n},c.prototype.writeUint8=c.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||I(this,t,e,1,255,0),this[e]=255&t,e+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||I(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||I(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||I(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||I(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},c.prototype.writeBigUInt64LE=Y((function(t,e=0){return M(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),c.prototype.writeBigUInt64BE=Y((function(t,e=0){return $(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),c.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e>>>=0,!r){const r=Math.pow(2,8*n-1);I(this,t,e,n,r-1,-r)}let s=0,i=1,o=0;for(this[e]=255&t;++s<n&&(i*=256);)t<0&&0===o&&0!==this[e+s-1]&&(o=1),this[e+s]=(t/i>>0)-o&255;return e+n},c.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e>>>=0,!r){const r=Math.pow(2,8*n-1);I(this,t,e,n,r-1,-r)}let s=n-1,i=1,o=0;for(this[e+s]=255&t;--s>=0&&(i*=256);)t<0&&0===o&&0!==this[e+s+1]&&(o=1),this[e+s]=(t/i>>0)-o&255;return e+n},c.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||I(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},c.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||I(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},c.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||I(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},c.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||I(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},c.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||I(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},c.prototype.writeBigInt64LE=Y((function(t,e=0){return M(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),c.prototype.writeBigInt64BE=Y((function(t,e=0){return $(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),c.prototype.writeFloatLE=function(t,e,n){return U(this,t,e,!0,n)},c.prototype.writeFloatBE=function(t,e,n){return U(this,t,e,!1,n)},c.prototype.writeDoubleLE=function(t,e,n){return D(this,t,e,!0,n)},c.prototype.writeDoubleBE=function(t,e,n){return D(this,t,e,!1,n)},c.prototype.copy=function(t,e,n,r){if(!c.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);const s=r-n;return this===t&&"function"===typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,n,r):Uint8Array.prototype.set.call(t,this.subarray(n,r),e),s},c.prototype.fill=function(t,e,n,r){if("string"===typeof t){if("string"===typeof e?(r=e,e=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===t.length){const e=t.charCodeAt(0);("utf8"===r&&e<128||"latin1"===r)&&(t=e)}}else"number"===typeof t?t&=255:"boolean"===typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;let s;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"===typeof t)for(s=e;s<n;++s)this[s]=t;else{const i=c.isBuffer(t)?t:c.from(t,r),o=i.length;if(0===o)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(s=0;s<n-e;++s)this[s+e]=i[s%o]}return this};const B={};function N(t,e,n){B[t]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function V(t){let e="",n=t.length;const r="-"===t[0]?1:0;for(;n>=r+4;n-=3)e=`_${t.slice(n-3,n)}${e}`;return`${t.slice(0,n)}${e}`}function F(t,e,n,r,s,i){if(t>n||t<e){const r="bigint"===typeof e?"n":"";let s;throw s=i>3?0===e||e===BigInt(0)?`>= 0${r} and < 2${r} ** ${8*(i+1)}${r}`:`>= -(2${r} ** ${8*(i+1)-1}${r}) and < 2 ** ${8*(i+1)-1}${r}`:`>= ${e}${r} and <= ${n}${r}`,new B.ERR_OUT_OF_RANGE("value",s,t)}!function(t,e,n){q(e,"offset"),void 0!==t[e]&&void 0!==t[e+n]||W(e,t.length-(n+1))}(r,s,i)}function q(t,e){if("number"!==typeof t)throw new B.ERR_INVALID_ARG_TYPE(e,"number",t)}function W(t,e,n){if(Math.floor(t)!==t)throw q(t,n),new B.ERR_OUT_OF_RANGE(n||"offset","an integer",t);if(e<0)throw new B.ERR_BUFFER_OUT_OF_BOUNDS;throw new B.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${e}`,t)}N("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),N("ERR_INVALID_ARG_TYPE",(function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`}),TypeError),N("ERR_OUT_OF_RANGE",(function(t,e,n){let r=`The value of "${t}" is out of range.`,s=n;return Number.isInteger(n)&&Math.abs(n)>2**32?s=V(String(n)):"bigint"===typeof n&&(s=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(s=V(s)),s+="n"),r+=` It must be ${e}. Received ${s}`,r}),RangeError);const z=/[^+/0-9A-Za-z-_]/g;function H(t,e){let n;e=e||1/0;const r=t.length;let s=null;const i=[];for(let o=0;o<r;++o){if(n=t.charCodeAt(o),n>55295&&n<57344){if(!s){if(n>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(o+1===r){(e-=3)>-1&&i.push(239,191,189);continue}s=n;continue}if(n<56320){(e-=3)>-1&&i.push(239,191,189),s=n;continue}n=65536+(s-55296<<10|n-56320)}else s&&(e-=3)>-1&&i.push(239,191,189);if(s=null,n<128){if((e-=1)<0)break;i.push(n)}else if(n<2048){if((e-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function K(t){return r.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(z,"")).length<2)return"";for(;t.length%4!==0;)t+="=";return t}(t))}function Z(t,e,n,r){let s;for(s=0;s<r&&!(s+n>=e.length||s>=t.length);++s)e[s+n]=t[s];return s}function J(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function G(t){return t!==t}const X=function(){const t="0123456789abcdef",e=new Array(256);for(let n=0;n<16;++n){const r=16*n;for(let s=0;s<16;++s)e[r+s]=t[n]+t[s]}return e}();function Y(t){return"undefined"===typeof BigInt?Q:t}function Q(){throw new Error("BigInt not supported")}},8848:function(t,e){e.read=function(t,e,n,r,s){var i,o,a=8*s-r-1,c=(1<<a)-1,l=c>>1,u=-7,h=n?s-1:0,d=n?-1:1,f=t[e+h];for(h+=d,i=f&(1<<-u)-1,f>>=-u,u+=a;u>0;i=256*i+t[e+h],h+=d,u-=8);for(o=i&(1<<-u)-1,i>>=-u,u+=r;u>0;o=256*o+t[e+h],h+=d,u-=8);if(0===i)i=1-l;else{if(i===c)return o?NaN:1/0*(f?-1:1);o+=Math.pow(2,r),i-=l}return(f?-1:1)*o*Math.pow(2,i-r)},e.write=function(t,e,n,r,s,i){var o,a,c,l=8*i-s-1,u=(1<<l)-1,h=u>>1,d=23===s?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:i-1,p=r?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=u):(o=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-o))<1&&(o--,c*=2),(e+=o+h>=1?d/c:d*Math.pow(2,1-h))*c>=2&&(o++,c/=2),o+h>=u?(a=0,o=u):o+h>=1?(a=(e*c-1)*Math.pow(2,s),o+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,s),o=0));s>=8;t[n+f]=255&a,f+=p,a/=256,s-=8);for(o=o<<s|a,l+=s;l>0;t[n+f]=255&o,f+=p,o/=256,l-=8);t[n+f-p]|=128*m}},9205:function(t,e,n){"use strict";n.d(e,{Z:function(){return l}});var r=n(2265);const s=t=>{const e=(t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,((t,e,n)=>n?n.toUpperCase():e.toLowerCase())))(t);return e.charAt(0).toUpperCase()+e.slice(1)},i=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.filter(((t,e,n)=>Boolean(t)&&""!==t.trim()&&n.indexOf(t)===e)).join(" ").trim()},o=t=>{for(const e in t)if(e.startsWith("aria-")||"role"===e||"title"===e)return!0};var a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const c=(0,r.forwardRef)(((t,e)=>{let{color:n="currentColor",size:s=24,strokeWidth:c=2,absoluteStrokeWidth:l,className:u="",children:h,iconNode:d,...f}=t;return(0,r.createElement)("svg",{ref:e,...a,width:s,height:s,stroke:n,strokeWidth:l?24*Number(c)/Number(s):c,className:i("lucide",u),...!h&&!o(f)&&{"aria-hidden":"true"},...f},[...d.map((t=>{let[e,n]=t;return(0,r.createElement)(e,n)})),...Array.isArray(h)?h:[h]])})),l=(t,e)=>{const n=(0,r.forwardRef)(((n,o)=>{let{className:a,...l}=n;return(0,r.createElement)(c,{ref:o,iconNode:e,className:i("lucide-".concat((u=s(t),u.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase())),"lucide-".concat(t),a),...l});var u}));return n.displayName=s(t),n}},4401:function(t,e,n){"use strict";n.d(e,{Z:function(){return r}});const r=(0,n(9205).Z)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]])},1769:function(t,e,n){"use strict";n.d(e,{Z:function(){return r}});const r=(0,n(9205).Z)("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]])},4972:function(t,e,n){"use strict";n.d(e,{Z:function(){return r}});const r=(0,n(9205).Z)("brain",[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]])},6215:function(t,e,n){"use strict";n.d(e,{Z:function(){return r}});const r=(0,n(9205).Z)("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},401:function(t,e,n){"use strict";n.d(e,{Z:function(){return r}});const r=(0,n(9205).Z)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},1723:function(t,e,n){"use strict";n.d(e,{Z:function(){return r}});const r=(0,n(9205).Z)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},8867:function(t,e,n){"use strict";n.d(e,{Z:function(){return r}});const r=(0,n(9205).Z)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},3609:function(t,e,n){"use strict";n.d(e,{Z:function(){return r}});const r=(0,n(9205).Z)("droplet",[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]])},2208:function(t,e,n){"use strict";n.d(e,{Z:function(){return r}});const r=(0,n(9205).Z)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},8736:function(t,e,n){"use strict";n.d(e,{Z:function(){return r}});const r=(0,n(9205).Z)("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},6399:function(t,e,n){"use strict";n.d(e,{Z:function(){return r}});const r=(0,n(9205).Z)("flame",[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]])},8220:function(t,e,n){"use strict";n.d(e,{Z:function(){return r}});const r=(0,n(9205).Z)("flask-conical",[["path",{d:"M14 2v6a2 2 0 0 0 .245.96l5.51 10.08A2 2 0 0 1 18 22H6a2 2 0 0 1-1.755-2.96l5.51-10.08A2 2 0 0 0 10 8V2",key:"18mbvz"}],["path",{d:"M6.453 15h11.094",key:"3shlmq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}]])},8997:function(t,e,n){"use strict";n.d(e,{Z:function(){return r}});const r=(0,n(9205).Z)("heart",[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]])},1817:function(t,e,n){"use strict";n.d(e,{Z:function(){return r}});const r=(0,n(9205).Z)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},2048:function(t,e,n){"use strict";n.d(e,{Z:function(){return r}});const r=(0,n(9205).Z)("map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]])},7416:function(t,e,n){"use strict";n.d(e,{Z:function(){return r}});const r=(0,n(9205).Z)("maximize-2",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]])},6840:function(t,e,n){"use strict";n.d(e,{Z:function(){return r}});const r=(0,n(9205).Z)("menu",[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]])},3417:function(t,e,n){"use strict";n.d(e,{Z:function(){return r}});const r=(0,n(9205).Z)("message-square",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]])},8662:function(t,e,n){"use strict";n.d(e,{Z:function(){return r}});const r=(0,n(9205).Z)("mic",[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]])},7737:function(t,e,n){"use strict";n.d(e,{Z:function(){return r}});const r=(0,n(9205).Z)("mountain",[["path",{d:"m8 3 4 8 5-5 5 15H2L8 3z",key:"otkl63"}]])},6980:function(t,e,n){"use strict";n.d(e,{Z:function(){return r}});const r=(0,n(9205).Z)("paperclip",[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]])},3276:function(t,e,n){"use strict";n.d(e,{Z:function(){return r}});const r=(0,n(9205).Z)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]])},9397:function(t,e,n){"use strict";n.d(e,{Z:function(){return r}});const r=(0,n(9205).Z)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},9076:function(t,e,n){"use strict";n.d(e,{Z:function(){return r}});const r=(0,n(9205).Z)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]])},3229:function(t,e,n){"use strict";n.d(e,{Z:function(){return r}});const r=(0,n(9205).Z)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},8728:function(t,e,n){"use strict";n.d(e,{Z:function(){return r}});const r=(0,n(9205).Z)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},2023:function(t,e,n){"use strict";n.d(e,{Z:function(){return r}});const r=(0,n(9205).Z)("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]])},6379:function(t,e,n){"use strict";n.d(e,{Z:function(){return r}});const r=(0,n(9205).Z)("split",[["path",{d:"M16 3h5v5",key:"1806ms"}],["path",{d:"M8 3H3v5",key:"15dfkv"}],["path",{d:"M12 22v-8.3a4 4 0 0 0-1.172-2.872L3 3",key:"1qrqzj"}],["path",{d:"m15 9 6-6",key:"ko1vev"}]])},525:function(t,e,n){"use strict";n.d(e,{Z:function(){return r}});const r=(0,n(9205).Z)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]])},2369:function(t,e,n){"use strict";n.d(e,{Z:function(){return r}});const r=(0,n(9205).Z)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},5805:function(t,e,n){"use strict";n.d(e,{Z:function(){return r}});const r=(0,n(9205).Z)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},1706:function(t,e,n){"use strict";n.d(e,{Z:function(){return r}});const r=(0,n(9205).Z)("volume-2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]])},5395:function(t,e,n){"use strict";n.d(e,{Z:function(){return r}});const r=(0,n(9205).Z)("wifi-off",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},2926:function(t,e,n){"use strict";n.d(e,{Z:function(){return r}});const r=(0,n(9205).Z)("wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]])},2973:function(t,e,n){"use strict";n.d(e,{Z:function(){return r}});const r=(0,n(9205).Z)("wind",[["path",{d:"M12.8 19.6A2 2 0 1 0 14 16H2",key:"148xed"}],["path",{d:"M17.5 8a2.5 2.5 0 1 1 2 4H2",key:"1u4tom"}],["path",{d:"M9.8 4.4A2 2 0 1 1 11 8H2",key:"75valh"}]])},2489:function(t,e,n){"use strict";n.d(e,{Z:function(){return r}});const r=(0,n(9205).Z)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},1239:function(t,e,n){"use strict";n.d(e,{Z:function(){return r}});const r=(0,n(9205).Z)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]])},9376:function(t,e,n){"use strict";var r=n(5475);n.o(r,"useRouter")&&n.d(e,{useRouter:function(){return r.useRouter}})},4601:function(){},8975:function(t,e,n){"use strict";var r=n(5566);n(4601);var s=n(2265);function i(t){return t&&"object"===typeof t&&"default"in t?t:{default:t}}var o=i(s);function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var c="undefined"!==typeof r&&r.env&&!0,l=function(t){return"[object String]"===Object.prototype.toString.call(t)},u=function(){function t(t){var e=void 0===t?{}:t,n=e.name,r=void 0===n?"stylesheet":n,s=e.optimizeForSpeed,i=void 0===s?c:s;h(l(r),"`name` must be a string"),this._name=r,this._deletedRulePlaceholder="#"+r+"-deleted-rule____{}",h("boolean"===typeof i,"`optimizeForSpeed` must be a boolean"),this._optimizeForSpeed=i,this._serverSheet=void 0,this._tags=[],this._injected=!1,this._rulesCount=0;var o="undefined"!==typeof window&&document.querySelector('meta[property="csp-nonce"]');this._nonce=o?o.getAttribute("content"):null}var e,n,r,s=t.prototype;return s.setOptimizeForSpeed=function(t){h("boolean"===typeof t,"`setOptimizeForSpeed` accepts a boolean"),h(0===this._rulesCount,"optimizeForSpeed cannot be when rules have already been inserted"),this.flush(),this._optimizeForSpeed=t,this.inject()},s.isOptimizeForSpeed=function(){return this._optimizeForSpeed},s.inject=function(){var t=this;if(h(!this._injected,"sheet already injected"),this._injected=!0,"undefined"!==typeof window&&this._optimizeForSpeed)return this._tags[0]=this.makeStyleTag(this._name),this._optimizeForSpeed="insertRule"in this.getSheet(),void(this._optimizeForSpeed||(c||console.warn("StyleSheet: optimizeForSpeed mode not supported falling back to standard mode."),this.flush(),this._injected=!0));this._serverSheet={cssRules:[],insertRule:function(e,n){return"number"===typeof n?t._serverSheet.cssRules[n]={cssText:e}:t._serverSheet.cssRules.push({cssText:e}),n},deleteRule:function(e){t._serverSheet.cssRules[e]=null}}},s.getSheetForTag=function(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]},s.getSheet=function(){return this.getSheetForTag(this._tags[this._tags.length-1])},s.insertRule=function(t,e){if(h(l(t),"`insertRule` accepts only strings"),"undefined"===typeof window)return"number"!==typeof e&&(e=this._serverSheet.cssRules.length),this._serverSheet.insertRule(t,e),this._rulesCount++;if(this._optimizeForSpeed){var n=this.getSheet();"number"!==typeof e&&(e=n.cssRules.length);try{n.insertRule(t,e)}catch(s){return c||console.warn("StyleSheet: illegal rule: \n\n"+t+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),-1}}else{var r=this._tags[e];this._tags.push(this.makeStyleTag(this._name,t,r))}return this._rulesCount++},s.replaceRule=function(t,e){if(this._optimizeForSpeed||"undefined"===typeof window){var n="undefined"!==typeof window?this.getSheet():this._serverSheet;if(e.trim()||(e=this._deletedRulePlaceholder),!n.cssRules[t])return t;n.deleteRule(t);try{n.insertRule(e,t)}catch(s){c||console.warn("StyleSheet: illegal rule: \n\n"+e+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),n.insertRule(this._deletedRulePlaceholder,t)}}else{var r=this._tags[t];h(r,"old rule at index `"+t+"` not found"),r.textContent=e}return t},s.deleteRule=function(t){if("undefined"!==typeof window)if(this._optimizeForSpeed)this.replaceRule(t,"");else{var e=this._tags[t];h(e,"rule at index `"+t+"` not found"),e.parentNode.removeChild(e),this._tags[t]=null}else this._serverSheet.deleteRule(t)},s.flush=function(){this._injected=!1,this._rulesCount=0,"undefined"!==typeof window?(this._tags.forEach((function(t){return t&&t.parentNode.removeChild(t)})),this._tags=[]):this._serverSheet.cssRules=[]},s.cssRules=function(){var t=this;return"undefined"===typeof window?this._serverSheet.cssRules:this._tags.reduce((function(e,n){return n?e=e.concat(Array.prototype.map.call(t.getSheetForTag(n).cssRules,(function(e){return e.cssText===t._deletedRulePlaceholder?null:e}))):e.push(null),e}),[])},s.makeStyleTag=function(t,e,n){e&&h(l(e),"makeStyleTag accepts only strings as second parameter");var r=document.createElement("style");this._nonce&&r.setAttribute("nonce",this._nonce),r.type="text/css",r.setAttribute("data-"+t,""),e&&r.appendChild(document.createTextNode(e));var s=document.head||document.getElementsByTagName("head")[0];return n?s.insertBefore(r,n):s.appendChild(r),r},e=t,(n=[{key:"length",get:function(){return this._rulesCount}}])&&a(e.prototype,n),r&&a(e,r),t}();function h(t,e){if(!t)throw new Error("StyleSheet: "+e+".")}var d=function(t){for(var e=5381,n=t.length;n;)e=33*e^t.charCodeAt(--n);return e>>>0},f={};function p(t,e){if(!e)return"jsx-"+t;var n=String(e),r=t+n;return f[r]||(f[r]="jsx-"+d(t+"-"+n)),f[r]}function m(t,e){"undefined"===typeof window&&(e=e.replace(/\/style/gi,"\\/style"));var n=t+e;return f[n]||(f[n]=e.replace(/__jsx-style-dynamic-selector/g,t)),f[n]}var g=function(){function t(t){var e=void 0===t?{}:t,n=e.styleSheet,r=void 0===n?null:n,s=e.optimizeForSpeed,i=void 0!==s&&s;this._sheet=r||new u({name:"styled-jsx",optimizeForSpeed:i}),this._sheet.inject(),r&&"boolean"===typeof i&&(this._sheet.setOptimizeForSpeed(i),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),this._fromServer=void 0,this._indices={},this._instancesCounts={}}var e=t.prototype;return e.add=function(t){var e=this;void 0===this._optimizeForSpeed&&(this._optimizeForSpeed=Array.isArray(t.children),this._sheet.setOptimizeForSpeed(this._optimizeForSpeed),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),"undefined"===typeof window||this._fromServer||(this._fromServer=this.selectFromServer(),this._instancesCounts=Object.keys(this._fromServer).reduce((function(t,e){return t[e]=0,t}),{}));var n=this.getIdAndRules(t),r=n.styleId,s=n.rules;if(r in this._instancesCounts)this._instancesCounts[r]+=1;else{var i=s.map((function(t){return e._sheet.insertRule(t)})).filter((function(t){return-1!==t}));this._indices[r]=i,this._instancesCounts[r]=1}},e.remove=function(t){var e=this,n=this.getIdAndRules(t).styleId;if(function(t,e){if(!t)throw new Error("StyleSheetRegistry: "+e+".")}(n in this._instancesCounts,"styleId: `"+n+"` not found"),this._instancesCounts[n]-=1,this._instancesCounts[n]<1){var r=this._fromServer&&this._fromServer[n];r?(r.parentNode.removeChild(r),delete this._fromServer[n]):(this._indices[n].forEach((function(t){return e._sheet.deleteRule(t)})),delete this._indices[n]),delete this._instancesCounts[n]}},e.update=function(t,e){this.add(e),this.remove(t)},e.flush=function(){this._sheet.flush(),this._sheet.inject(),this._fromServer=void 0,this._indices={},this._instancesCounts={}},e.cssRules=function(){var t=this,e=this._fromServer?Object.keys(this._fromServer).map((function(e){return[e,t._fromServer[e]]})):[],n=this._sheet.cssRules();return e.concat(Object.keys(this._indices).map((function(e){return[e,t._indices[e].map((function(t){return n[t].cssText})).join(t._optimizeForSpeed?"":"\n")]})).filter((function(t){return Boolean(t[1])})))},e.styles=function(t){return function(t,e){return void 0===e&&(e={}),t.map((function(t){var n=t[0],r=t[1];return o.default.createElement("style",{id:"__"+n,key:"__"+n,nonce:e.nonce?e.nonce:void 0,dangerouslySetInnerHTML:{__html:r}})}))}(this.cssRules(),t)},e.getIdAndRules=function(t){var e=t.children,n=t.dynamic,r=t.id;if(n){var s=p(r,n);return{styleId:s,rules:Array.isArray(e)?e.map((function(t){return m(s,t)})):[m(s,e)]}}return{styleId:p(r),rules:Array.isArray(e)?e:[e]}},e.selectFromServer=function(){return Array.prototype.slice.call(document.querySelectorAll('[id^="__jsx-"]')).reduce((function(t,e){return t[e.id.slice(2)]=e,t}),{})},t}();var y=s.createContext(null);function v(){return new g}function w(){return s.useContext(y)}y.displayName="StyleSheetContext";var b=o.default.useInsertionEffect||o.default.useLayoutEffect,_="undefined"!==typeof window?v():void 0;function k(t){var e=_||w();return e?"undefined"===typeof window?(e.add(t),null):(b((function(){return e.add(t),function(){e.remove(t)}}),[t.id,String(t.dynamic)]),null):null}k.dynamic=function(t){return t.map((function(t){return p(t[0],t[1])})).join(" ")},e.style=k},29:function(t,e,n){"use strict";t.exports=n(8975).style},5566:function(t){var e,n,r=t.exports={};function s(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(t){if(e===setTimeout)return setTimeout(t,0);if((e===s||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(n){try{return e.call(null,t,0)}catch(n){return e.call(this,t,0)}}}!function(){try{e="function"===typeof setTimeout?setTimeout:s}catch(t){e=s}try{n="function"===typeof clearTimeout?clearTimeout:i}catch(t){n=i}}();var a,c=[],l=!1,u=-1;function h(){l&&a&&(l=!1,a.length?c=a.concat(c):u=-1,c.length&&d())}function d(){if(!l){var t=o(h);l=!0;for(var e=c.length;e;){for(a=c,c=[];++u<e;)a&&a[u].run();u=-1,e=c.length}a=null,l=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===i||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{return n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function p(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new f(t,e)),1!==c.length||l||o(d)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=p,r.addListener=p,r.once=p,r.off=p,r.removeListener=p,r.removeAllListeners=p,r.emit=p,r.prependListener=p,r.prependOnceListener=p,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},728:function(t,e,n){"use strict";n.d(e,{M:function(){return v}});var r=n(7437),s=n(2265),i=n(1438),o=n(2368),a=n(7164),c=n(6256),l=n(2258),u=n(7343);class h extends s.Component{getSnapshotBeforeUpdate(t){const e=this.props.childRef.current;if(e&&t.isPresent&&!this.props.isPresent){const t=e.offsetParent,n=(0,l.R)(t)&&t.offsetWidth||0,r=this.props.sizeRef.current;r.height=e.offsetHeight||0,r.width=e.offsetWidth||0,r.top=e.offsetTop,r.left=e.offsetLeft,r.right=n-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}}function d(t){let{children:e,isPresent:n,anchorX:i,root:o}=t;const a=(0,s.useId)(),c=(0,s.useRef)(null),l=(0,s.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:d}=(0,s.useContext)(u._);return(0,s.useInsertionEffect)((()=>{const{width:t,height:e,top:r,left:s,right:u}=l.current;if(n||!c.current||!t||!e)return;const h="left"===i?"left: ".concat(s):"right: ".concat(u);c.current.dataset.motionPopId=a;const f=document.createElement("style");d&&(f.nonce=d);const p=null!==o&&void 0!==o?o:document.head;return p.appendChild(f),f.sheet&&f.sheet.insertRule('\n          [data-motion-pop-id="'.concat(a,'"] {\n            position: absolute !important;\n            width: ').concat(t,"px !important;\n            height: ").concat(e,"px !important;\n            ").concat(h,"px !important;\n            top: ").concat(r,"px !important;\n          }\n        ")),()=>{p.contains(f)&&p.removeChild(f)}}),[n]),(0,r.jsx)(h,{isPresent:n,childRef:c,sizeRef:l,children:s.cloneElement(e,{ref:c})})}const f=t=>{let{children:e,initial:n,isPresent:i,onExitComplete:a,custom:l,presenceAffectsLayout:u,mode:h,anchorX:f,root:m}=t;const g=(0,o.h)(p),y=(0,s.useId)();let v=!0,w=(0,s.useMemo)((()=>(v=!1,{id:y,initial:n,isPresent:i,custom:l,onExitComplete:t=>{g.set(t,!0);for(const e of g.values())if(!e)return;a&&a()},register:t=>(g.set(t,!1),()=>g.delete(t))})),[i,g,a]);return u&&v&&(w={...w}),(0,s.useMemo)((()=>{g.forEach(((t,e)=>g.set(e,!1)))}),[i]),s.useEffect((()=>{!i&&!g.size&&a&&a()}),[i]),"popLayout"===h&&(e=(0,r.jsx)(d,{isPresent:i,anchorX:f,root:m,children:e})),(0,r.jsx)(c.O.Provider,{value:w,children:e})};function p(){return new Map}var m=n(8421);const g=t=>t.key||"";function y(t){const e=[];return s.Children.forEach(t,(t=>{(0,s.isValidElement)(t)&&e.push(t)})),e}const v=t=>{let{children:e,custom:n,initial:c=!0,onExitComplete:l,presenceAffectsLayout:u=!0,mode:h="sync",propagate:d=!1,anchorX:p="left",root:v}=t;const[w,b]=(0,m.oO)(d),_=(0,s.useMemo)((()=>y(e)),[e]),k=d&&!w?[]:_.map(g),S=(0,s.useRef)(!0),E=(0,s.useRef)(_),T=(0,o.h)((()=>new Map)),[x,A]=(0,s.useState)(_),[R,P]=(0,s.useState)(_);(0,a.L)((()=>{S.current=!1,E.current=_;for(let t=0;t<R.length;t++){const e=g(R[t]);k.includes(e)?T.delete(e):!0!==T.get(e)&&T.set(e,!1)}}),[R,k.length,k.join("-")]);const O=[];if(_!==x){let t=[..._];for(let e=0;e<R.length;e++){const n=R[e],r=g(n);k.includes(r)||(t.splice(e,0,n),O.push(n))}return"wait"===h&&O.length&&(t=O),P(y(t)),A(_),null}const{forceRender:j}=(0,s.useContext)(i.p);return(0,r.jsx)(r.Fragment,{children:R.map((t=>{const e=g(t),s=!(d&&!w)&&(_===R||k.includes(e));return(0,r.jsx)(f,{isPresent:s,initial:!(S.current&&!c)&&void 0,custom:n,presenceAffectsLayout:u,mode:h,root:v,onExitComplete:s?void 0:()=>{if(!T.has(e))return;T.set(e,!0);let t=!0;T.forEach((e=>{e||(t=!1)})),t&&(null===j||void 0===j||j(),P(E.current),d&&(null===b||void 0===b||b()),l&&l())},anchorX:p,children:t},e)}))})}},8421:function(t,e,n){"use strict";n.d(e,{oO:function(){return i}});var r=n(2265),s=n(6256);function i(t=!0){const e=(0,r.useContext)(s.O);if(null===e)return[!0,null];const{isPresent:n,onExitComplete:i,register:o}=e,a=(0,r.useId)();(0,r.useEffect)((()=>{if(t)return o(a)}),[t]);const c=(0,r.useCallback)((()=>t&&i&&i(a)),[a,i,t]);return!n&&i?[!1,c]:[!0]}},1438:function(t,e,n){"use strict";n.d(e,{p:function(){return r}});const r=(0,n(2265).createContext)({})},7343:function(t,e,n){"use strict";n.d(e,{_:function(){return r}});const r=(0,n(2265).createContext)({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"})},6256:function(t,e,n){"use strict";n.d(e,{O:function(){return r}});const r=(0,n(2265).createContext)(null)},970:function(t,e,n){"use strict";n.d(e,{E:function(){return aa}});var r=n(2265);const s=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],i=(()=>new Set(s))(),o=t=>180*t/Math.PI,a=t=>{const e=o(Math.atan2(t[1],t[0]));return l(e)},c={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:a,rotateZ:a,skewX:t=>o(Math.atan(t[1])),skewY:t=>o(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},l=t=>((t%=360)<0&&(t+=360),t),u=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),h=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),d={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:u,scaleY:h,scale:t=>(u(t)+h(t))/2,rotateX:t=>l(o(Math.atan2(t[6],t[5]))),rotateY:t=>l(o(Math.atan2(-t[2],t[0]))),rotateZ:a,rotate:a,skewX:t=>o(Math.atan(t[4])),skewY:t=>o(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function f(t){return t.includes("scale")?1:0}function p(t,e){if(!t||"none"===t)return f(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=d,s=n;else{const e=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=c,s=e}if(!s)return f(e);const i=r[e],o=s[1].split(",").map(m);return"function"===typeof i?i(o):o[i]}function m(t){return parseFloat(t.trim())}const g=t=>e=>"string"===typeof e&&e.startsWith(t),y=g("--"),v=g("var(--"),w=t=>!!v(t)&&b.test(t.split("/*")[0].trim()),b=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function _({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}const k=(t,e,n)=>t+(e-t)*n;function S(t){return void 0===t||1===t}function E({scale:t,scaleX:e,scaleY:n}){return!S(t)||!S(e)||!S(n)}function T(t){return E(t)||x(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function x(t){return A(t.x)||A(t.y)}function A(t){return t&&"0%"!==t}function R(t,e,n){return n+e*(t-n)}function P(t,e,n,r,s){return void 0!==s&&(t=R(t,s,r)),R(t,n,r)+e}function O(t,e=0,n=1,r,s){t.min=P(t.min,e,n,r,s),t.max=P(t.max,e,n,r,s)}function j(t,{x:e,y:n}){O(t.x,e.translate,e.scale,e.originPoint),O(t.y,n.translate,n.scale,n.originPoint)}const C=.999999999999,I=1.0000000000001;function M(t,e){t.min=t.min+e,t.max=t.max+e}function $(t,e,n,r,s=.5){O(t,e,n,k(t.min,t.max,s),r)}function L(t,e){$(t.x,e.x,e.scaleX,e.scale,e.originX),$(t.y,e.y,e.scaleY,e.scale,e.originY)}function U(t,e){return _(function(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}(t.getBoundingClientRect(),e))}const D=new Set(["width","height","top","left","right","bottom",...s]),B=(t,e,n)=>n>e?e:n<t?t:n,N={test:t=>"number"===typeof t,parse:parseFloat,transform:t=>t},V={...N,transform:t=>B(0,1,t)},F={...N,default:1},q=t=>({test:e=>"string"===typeof e&&e.endsWith(t)&&1===e.split(" ").length,parse:parseFloat,transform:e=>`${e}${t}`}),W=q("deg"),z=q("%"),H=q("px"),K=q("vh"),Z=q("vw"),J=(()=>({...z,parse:t=>z.parse(t)/100,transform:t=>z.transform(100*t)}))(),G=t=>e=>e.test(t),X=[N,H,z,W,Z,K,{test:t=>"auto"===t,parse:t=>t}],Y=t=>X.find(G(t));let Q=()=>{},tt=()=>{};const et=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),nt=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function rt(t,e,n=1){tt(n<=4,`Max CSS variable fallback depth detected in property "${t}". This may indicate a circular fallback dependency.`,"max-css-var-depth");const[r,s]=function(t){const e=nt.exec(t);if(!e)return[,];const[,n,r,s]=e;return[`--${n??r}`,s]}(t);if(!r)return;const i=window.getComputedStyle(e).getPropertyValue(r);if(i){const t=i.trim();return et(t)?parseFloat(t):t}return w(s)?rt(s,e,n+1):s}const st=t=>t===N||t===H,it=new Set(["x","y","z"]),ot=s.filter((t=>!it.has(t)));const at={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>p(e,"x"),y:(t,{transform:e})=>p(e,"y")};at.translateX=at.x,at.translateY=at.y;const ct=t=>t,lt={},ut=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],ht={value:null,addProjectionMetrics:null};function dt(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,o=ut.reduce(((t,n)=>(t[n]=function(t,e){let n=new Set,r=new Set,s=!1,i=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1},c=0;function l(e){o.has(e)&&(u.schedule(e),t()),c++,e(a)}const u={schedule:(t,e=!1,i=!1)=>{const a=i&&s?n:r;return e&&o.add(t),a.has(t)||a.add(t),t},cancel:t=>{r.delete(t),o.delete(t)},process:t=>{a=t,s?i=!0:(s=!0,[n,r]=[r,n],n.forEach(l),e&&ht.value&&ht.value.frameloop[e].push(c),c=0,n.clear(),s=!1,i&&(i=!1,u.process(t)))}};return u}(i,e?n:void 0),t)),{}),{setup:a,read:c,resolveKeyframes:l,preUpdate:u,update:h,preRender:d,render:f,postRender:p}=o,m=()=>{const i=lt.useManualTiming?s.timestamp:performance.now();n=!1,lt.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(i-s.timestamp,40),1)),s.timestamp=i,s.isProcessing=!0,a.process(s),c.process(s),l.process(s),u.process(s),h.process(s),d.process(s),f.process(s),p.process(s),s.isProcessing=!1,n&&e&&(r=!1,t(m))};return{schedule:ut.reduce(((e,i)=>{const a=o[i];return e[i]=(e,i=!1,o=!1)=>(n||(n=!0,r=!0,s.isProcessing||t(m)),a.schedule(e,i,o)),e}),{}),cancel:t=>{for(let e=0;e<ut.length;e++)o[ut[e]].cancel(t)},state:s,steps:o}}const{schedule:ft,cancel:pt,state:mt,steps:gt}=dt("undefined"!==typeof requestAnimationFrame?requestAnimationFrame:ct,!0),yt=new Set;let vt=!1,wt=!1,bt=!1;function _t(){if(wt){const t=Array.from(yt).filter((t=>t.needsMeasurement)),e=new Set(t.map((t=>t.element))),n=new Map;e.forEach((t=>{const e=function(t){const e=[];return ot.forEach((n=>{const r=t.getValue(n);void 0!==r&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))})),e}(t);e.length&&(n.set(t,e),t.render())})),t.forEach((t=>t.measureInitialState())),e.forEach((t=>{t.render();const e=n.get(t);e&&e.forEach((([e,n])=>{t.getValue(e)?.set(n)}))})),t.forEach((t=>t.measureEndState())),t.forEach((t=>{void 0!==t.suspendedScrollY&&window.scrollTo(0,t.suspendedScrollY)}))}wt=!1,vt=!1,yt.forEach((t=>t.complete(bt))),yt.clear()}function kt(){yt.forEach((t=>{t.readKeyframes(),t.needsMeasurement&&(wt=!0)}))}class St{constructor(t,e,n,r,s,i=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=e,this.name=n,this.motionValue=r,this.element=s,this.isAsync=i}scheduleResolve(){this.state="scheduled",this.isAsync?(yt.add(this),vt||(vt=!0,ft.read(kt),ft.resolveKeyframes(_t))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:e,element:n,motionValue:r}=this;if(null===t[0]){const s=r?.get(),i=t[t.length-1];if(void 0!==s)t[0]=s;else if(n&&e){const r=n.readValue(e,i);void 0!==r&&null!==r&&(t[0]=r)}void 0===t[0]&&(t[0]=i),r&&void 0===s&&r.set(t[0])}!function(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),yt.delete(this)}cancel(){"scheduled"===this.state&&(yt.delete(this),this.state="pending")}resume(){"pending"===this.state&&this.scheduleResolve()}}const Et=t=>/^0[^.\s]+$/u.test(t);const Tt=t=>Math.round(1e5*t)/1e5,xt=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;const At=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Rt=(t,e)=>n=>Boolean("string"===typeof n&&At.test(n)&&n.startsWith(t)||e&&!function(t){return null==t}(n)&&Object.prototype.hasOwnProperty.call(n,e)),Pt=(t,e,n)=>r=>{if("string"!==typeof r)return r;const[s,i,o,a]=r.match(xt);return{[t]:parseFloat(s),[e]:parseFloat(i),[n]:parseFloat(o),alpha:void 0!==a?parseFloat(a):1}},Ot={...N,transform:t=>Math.round((t=>B(0,255,t))(t))},jt={test:Rt("rgb","red"),parse:Pt("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Ot.transform(t)+", "+Ot.transform(e)+", "+Ot.transform(n)+", "+Tt(V.transform(r))+")"};const Ct={test:Rt("#"),parse:function(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}},transform:jt.transform},It={test:Rt("hsl","hue"),parse:Pt("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+z.transform(Tt(e))+", "+z.transform(Tt(n))+", "+Tt(V.transform(r))+")"},Mt={test:t=>jt.test(t)||Ct.test(t)||It.test(t),parse:t=>jt.test(t)?jt.parse(t):It.test(t)?It.parse(t):Ct.parse(t),transform:t=>"string"===typeof t?t:t.hasOwnProperty("red")?jt.transform(t):It.transform(t),getAnimatableNone:t=>{const e=Mt.parse(t);return e.alpha=0,Mt.transform(e)}},$t=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;const Lt="number",Ut="color",Dt="var",Bt="var(",Nt="${}",Vt=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Ft(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},s=[];let i=0;const o=e.replace(Vt,(t=>(Mt.test(t)?(r.color.push(i),s.push(Ut),n.push(Mt.parse(t))):t.startsWith(Bt)?(r.var.push(i),s.push(Dt),n.push(t)):(r.number.push(i),s.push(Lt),n.push(parseFloat(t))),++i,Nt))).split(Nt);return{values:n,split:o,indexes:r,types:s}}function qt(t){return Ft(t).values}function Wt(t){const{split:e,types:n}=Ft(t),r=e.length;return t=>{let s="";for(let i=0;i<r;i++)if(s+=e[i],void 0!==t[i]){const e=n[i];s+=e===Lt?Tt(t[i]):e===Ut?Mt.transform(t[i]):t[i]}return s}}const zt=t=>"number"===typeof t?0:Mt.test(t)?Mt.getAnimatableNone(t):t;const Ht={test:function(t){return isNaN(t)&&"string"===typeof t&&(t.match(xt)?.length||0)+(t.match($t)?.length||0)>0},parse:qt,createTransformer:Wt,getAnimatableNone:function(t){const e=qt(t);return Wt(t)(e.map(zt))}},Kt=new Set(["brightness","contrast","saturate","opacity"]);function Zt(t){const[e,n]=t.slice(0,-1).split("(");if("drop-shadow"===e)return t;const[r]=n.match(xt)||[];if(!r)return t;const s=n.replace(r,"");let i=Kt.has(e)?1:0;return r!==n&&(i*=100),e+"("+i+s+")"}const Jt=/\b([a-z-]*)\(.*?\)/gu,Gt={...Ht,getAnimatableNone:t=>{const e=t.match(Jt);return e?e.map(Zt).join(" "):t}},Xt={...N,transform:Math.round},Yt={borderWidth:H,borderTopWidth:H,borderRightWidth:H,borderBottomWidth:H,borderLeftWidth:H,borderRadius:H,radius:H,borderTopLeftRadius:H,borderTopRightRadius:H,borderBottomRightRadius:H,borderBottomLeftRadius:H,width:H,maxWidth:H,height:H,maxHeight:H,top:H,right:H,bottom:H,left:H,padding:H,paddingTop:H,paddingRight:H,paddingBottom:H,paddingLeft:H,margin:H,marginTop:H,marginRight:H,marginBottom:H,marginLeft:H,backgroundPositionX:H,backgroundPositionY:H,...{rotate:W,rotateX:W,rotateY:W,rotateZ:W,scale:F,scaleX:F,scaleY:F,scaleZ:F,skew:W,skewX:W,skewY:W,distance:H,translateX:H,translateY:H,translateZ:H,x:H,y:H,z:H,perspective:H,transformPerspective:H,opacity:V,originX:J,originY:J,originZ:H},zIndex:Xt,fillOpacity:V,strokeOpacity:V,numOctaves:Xt},Qt={...Yt,color:Mt,backgroundColor:Mt,outlineColor:Mt,fill:Mt,stroke:Mt,borderColor:Mt,borderTopColor:Mt,borderRightColor:Mt,borderBottomColor:Mt,borderLeftColor:Mt,filter:Gt,WebkitFilter:Gt},te=t=>Qt[t];function ee(t,e){let n=te(t);return n!==Gt&&(n=Ht),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const ne=new Set(["auto","none","0"]);class re extends St{constructor(t,e,n,r,s){super(t,e,n,r,s,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:e,name:n}=this;if(!e||!e.current)return;super.readKeyframes();for(let a=0;a<t.length;a++){let n=t[a];if("string"===typeof n&&(n=n.trim(),w(n))){const r=rt(n,e.current);void 0!==r&&(t[a]=r),a===t.length-1&&(this.finalKeyframe=n)}}if(this.resolveNoneKeyframes(),!D.has(n)||2!==t.length)return;const[r,s]=t,i=Y(r),o=Y(s);if(i!==o)if(st(i)&&st(o))for(let a=0;a<t.length;a++){const e=t[a];"string"===typeof e&&(t[a]=parseFloat(e))}else at[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:e}=this,n=[];for(let s=0;s<t.length;s++)(null===t[s]||("number"===typeof(r=t[s])?0===r:null===r||"none"===r||"0"===r||Et(r)))&&n.push(s);var r;n.length&&function(t,e,n){let r,s=0;for(;s<t.length&&!r;){const e=t[s];"string"===typeof e&&!ne.has(e)&&Ft(e).values.length&&(r=t[s]),s++}if(r&&n)for(const i of e)t[i]=ee(n,r)}(t,n,e)}measureInitialState(){const{element:t,unresolvedKeyframes:e,name:n}=this;if(!t||!t.current)return;"height"===n&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=at[n](t.measureViewportBox(),window.getComputedStyle(t.current)),e[0]=this.measuredOrigin;const r=e[e.length-1];void 0!==r&&t.getValue(n,r).jump(r,!1)}measureEndState(){const{element:t,name:e,unresolvedKeyframes:n}=this;if(!t||!t.current)return;const r=t.getValue(e);r&&r.jump(this.measuredOrigin,!1);const s=n.length-1,i=n[s];n[s]=at[e](t.measureViewportBox(),window.getComputedStyle(t.current)),null!==i&&void 0===this.finalKeyframe&&(this.finalKeyframe=i),this.removedTransforms?.length&&this.removedTransforms.forEach((([e,n])=>{t.getValue(e).set(n)})),this.resolveNoneKeyframes()}}const se=t=>Boolean(t&&t.getVelocity);let ie;function oe(){ie=void 0}const ae={now:()=>(void 0===ie&&ae.set(mt.isProcessing||lt.useManualTiming?mt.timestamp:performance.now()),ie),set:t=>{ie=t,queueMicrotask(oe)}};function ce(t,e){-1===t.indexOf(e)&&t.push(e)}function le(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class ue{constructor(){this.subscriptions=[]}add(t){return ce(this.subscriptions,t),()=>le(this.subscriptions,t)}notify(t,e,n){const r=this.subscriptions.length;if(r)if(1===r)this.subscriptions[0](t,e,n);else for(let s=0;s<r;s++){const r=this.subscriptions[s];r&&r(t,e,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function he(t,e){return e?t*(1e3/e):0}const de={current:void 0};class fe{constructor(t,e={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=t=>{const e=ae.now();if(this.updatedAt!==e&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(t),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const n of this.dependents)n.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=e.owner}setCurrent(t){var e;this.current=t,this.updatedAt=ae.now(),null===this.canTrackVelocity&&void 0!==t&&(this.canTrackVelocity=(e=this.current,!isNaN(parseFloat(e))))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,e){this.events[t]||(this.events[t]=new ue);const n=this.events[t].add(e);return"change"===t?()=>{n(),ft.read((()=>{this.events.change.getSize()||this.stop()}))}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,e){this.passiveEffect=t,this.stopPassiveEffect=e}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,e,n){this.set(e),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t,e=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,e&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return de.current&&de.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const t=ae.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||t-this.updatedAt>30)return 0;const e=Math.min(this.updatedAt-this.prevUpdatedAt,30);return he(parseFloat(this.current)-parseFloat(this.prevFrameValue),e)}start(t){return this.stop(),new Promise((e=>{this.hasAnimated=!0,this.animation=t(e),this.events.animationStart&&this.events.animationStart.notify()})).then((()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()}))}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function pe(t,e){return new fe(t,e)}const me=[...X,Mt,Ht],{schedule:ge,cancel:ye}=dt(queueMicrotask,!1),ve={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},we={};for(const ca in ve)we[ca]={isEnabled:t=>ve[ca].some((e=>!!t[e]))};const be=()=>({x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}}),_e=()=>({x:{min:0,max:0},y:{min:0,max:0}});var ke=n(952);const Se={current:null},Ee={current:!1};const Te=new WeakMap;function xe(t){return null!==t&&"object"===typeof t&&"function"===typeof t.start}function Ae(t){return"string"===typeof t||Array.isArray(t)}const Re=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Pe=["initial",...Re];function Oe(t){return xe(t.animate)||Pe.some((e=>Ae(t[e])))}function je(t){return Boolean(Oe(t)||t.variants)}function Ce(t){const e=[{},{}];return t?.values.forEach(((t,n)=>{e[0][n]=t.get(),e[1][n]=t.getVelocity()})),e}function Ie(t,e,n,r){if("function"===typeof e){const[s,i]=Ce(r);e=e(void 0!==n?n:t.custom,s,i)}if("string"===typeof e&&(e=t.variants&&t.variants[e]),"function"===typeof e){const[s,i]=Ce(r);e=e(void 0!==n?n:t.custom,s,i)}return e}const Me=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class $e{scrapeMotionValuesFromProps(t,e,n){return{}}constructor({parent:t,props:e,presenceContext:n,reducedMotionConfig:r,blockInitialAnimation:s,visualState:i},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=St,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const t=ae.now();this.renderScheduledAt<t&&(this.renderScheduledAt=t,ft.render(this.render,!1,!0))};const{latestValues:a,renderState:c}=i;this.latestValues=a,this.baseTarget={...a},this.initialValues=e.initial?{...a}:{},this.renderState=c,this.parent=t,this.props=e,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=r,this.options=o,this.blockInitialAnimation=Boolean(s),this.isControllingVariants=Oe(e),this.isVariantNode=je(e),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(t&&t.current);const{willChange:l,...u}=this.scrapeMotionValuesFromProps(e,{},this);for(const h in u){const t=u[h];void 0!==a[h]&&se(t)&&t.set(a[h])}}mount(t){this.current=t,Te.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach(((t,e)=>this.bindToMotionValue(e,t))),Ee.current||function(){if(Ee.current=!0,ke.j)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Se.current=t.matches;t.addEventListener("change",e),e()}else Se.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||Se.current),this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),pt(this.notifyUpdate),pt(this.render),this.valueSubscriptions.forEach((t=>t())),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const e=this.features[t];e&&(e.unmount(),e.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,e){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const n=i.has(t);n&&this.onBindTransform&&this.onBindTransform();const r=e.on("change",(e=>{this.latestValues[t]=e,this.props.onUpdate&&ft.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()}));let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,t,e)),this.valueSubscriptions.set(t,(()=>{r(),s&&s(),e.owner&&e.stop()}))}sortNodePosition(t){return this.current&&this.sortInstanceNodePosition&&this.type===t.type?this.sortInstanceNodePosition(this.current,t.current):0}updateFeatures(){let t="animation";for(t in we){const e=we[t];if(!e)continue;const{isEnabled:n,Feature:r}=e;if(!this.features[t]&&r&&n(this.props)&&(this.features[t]=new r(this)),this.features[t]){const e=this.features[t];e.isMounted?e.update():(e.mount(),e.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):_e()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,e){this.latestValues[t]=e}update(t,e){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=e;for(let n=0;n<Me.length;n++){const e=Me[n];this.propEventSubscriptions[e]&&(this.propEventSubscriptions[e](),delete this.propEventSubscriptions[e]);const r=t["on"+e];r&&(this.propEventSubscriptions[e]=this.on(e,r))}this.prevMotionValues=function(t,e,n){for(const r in e){const s=e[r],i=n[r];if(se(s))t.addValue(r,s);else if(se(i))t.addValue(r,pe(s,{owner:t}));else if(i!==s)if(t.hasValue(r)){const e=t.getValue(r);!0===e.liveStyle?e.jump(s):e.hasAnimated||e.set(s)}else{const e=t.getStaticValue(r);t.addValue(r,pe(void 0!==e?e:s,{owner:t}))}}for(const r in n)void 0===e[r]&&t.removeValue(r);return e}(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const e=this.getClosestVariantNode();if(e)return e.variantChildren&&e.variantChildren.add(t),()=>e.variantChildren.delete(t)}addValue(t,e){const n=this.values.get(t);e!==n&&(n&&this.removeValue(t),this.bindToMotionValue(t,e),this.values.set(t,e),this.latestValues[t]=e.get())}removeValue(t){this.values.delete(t);const e=this.valueSubscriptions.get(t);e&&(e(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,e){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return void 0===n&&void 0!==e&&(n=pe(null===e?void 0:e,{owner:this}),this.addValue(t,n)),n}readValue(t,e){let n=void 0===this.latestValues[t]&&this.current?this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options):this.latestValues[t];var r;return void 0!==n&&null!==n&&("string"===typeof n&&(et(n)||Et(n))?n=parseFloat(n):(r=n,!me.find(G(r))&&Ht.test(e)&&(n=ee(t,e))),this.setBaseTarget(t,se(n)?n.get():n)),se(n)?n.get():n}setBaseTarget(t,e){this.baseTarget[t]=e}getBaseTarget(t){const{initial:e}=this.props;let n;if("string"===typeof e||"object"===typeof e){const r=Ie(this.props,e,this.presenceContext?.custom);r&&(n=r[t])}if(e&&void 0!==n)return n;const r=this.getBaseTargetFromProps(this.props,t);return void 0===r||se(r)?void 0!==this.initialValues[t]&&void 0===n?void 0:this.baseTarget[t]:r}on(t,e){return this.events[t]||(this.events[t]=new ue),this.events[t].add(e)}notify(t,...e){this.events[t]&&this.events[t].notify(...e)}scheduleRenderMicrotask(){ge.render(this.render)}}class Le extends $e{constructor(){super(...arguments),this.KeyframeResolver=re}sortInstanceNodePosition(t,e){return 2&t.compareDocumentPosition(e)?1:-1}getBaseTargetFromProps(t,e){return t.style?t.style[e]:void 0}removeValueFromRenderState(t,{vars:e,style:n}){delete e[t],delete n[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;se(t)&&(this.childSubscription=t.on("change",(t=>{this.current&&(this.current.textContent=`${t}`)})))}}const Ue=(t,e)=>e&&"number"===typeof t?e.transform(t):t,De={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Be=s.length;function Ne(t,e,n){const{style:r,vars:o,transformOrigin:a}=t;let c=!1,l=!1;for(const s in e){const t=e[s];if(i.has(s))c=!0;else if(y(s))o[s]=t;else{const e=Ue(t,Yt[s]);s.startsWith("origin")?(l=!0,a[s]=e):r[s]=e}}if(e.transform||(c||n?r.transform=function(t,e,n){let r="",i=!0;for(let o=0;o<Be;o++){const a=s[o],c=t[a];if(void 0===c)continue;let l=!0;if(l="number"===typeof c?c===(a.startsWith("scale")?1:0):0===parseFloat(c),!l||n){const t=Ue(c,Yt[a]);l||(i=!1,r+=`${De[a]||a}(${t}) `),n&&(e[a]=t)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}(e,t.transform,n):r.transform&&(r.transform="none")),l){const{originX:t="50%",originY:e="50%",originZ:n=0}=a;r.transformOrigin=`${t} ${e} ${n}`}}function Ve(t,{style:e,vars:n},r,s){const i=t.style;let o;for(o in e)i[o]=e[o];for(o in s?.applyProjectionStyles(i,r),n)i.setProperty(o,n[o])}const Fe={};function qe(t,{layout:e,layoutId:n}){return i.has(t)||t.startsWith("origin")||(e||void 0!==n)&&(!!Fe[t]||"opacity"===t)}function We(t,e,n){const{style:r}=t,s={};for(const i in r)(se(r[i])||e.style&&se(e.style[i])||qe(i,t)||void 0!==n?.getValue(i)?.liveStyle)&&(s[i]=r[i]);return s}class ze extends Le{constructor(){super(...arguments),this.type="html",this.renderInstance=Ve}readValueFromInstance(t,e){if(i.has(e))return this.projection?.isProjecting?f(e):((t,e)=>{const{transform:n="none"}=getComputedStyle(t);return p(n,e)})(t,e);{const r=(n=t,window.getComputedStyle(n)),s=(y(e)?r.getPropertyValue(e):r[e])||0;return"string"===typeof s?s.trim():s}var n}measureInstanceViewportBox(t,{transformPagePoint:e}){return U(t,e)}build(t,e,n){Ne(t,e,n.transformTemplate)}scrapeMotionValuesFromProps(t,e,n){return We(t,e,n)}}const He=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Ke={offset:"stroke-dashoffset",array:"stroke-dasharray"},Ze={offset:"strokeDashoffset",array:"strokeDasharray"};function Je(t,{attrX:e,attrY:n,attrScale:r,pathLength:s,pathSpacing:i=1,pathOffset:o=0,...a},c,l,u){if(Ne(t,a,l),c)return void(t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox));t.attrs=t.style,t.style={};const{attrs:h,style:d}=t;h.transform&&(d.transform=h.transform,delete h.transform),(d.transform||h.transformOrigin)&&(d.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),d.transform&&(d.transformBox=u?.transformBox??"fill-box",delete h.transformBox),void 0!==e&&(h.x=e),void 0!==n&&(h.y=n),void 0!==r&&(h.scale=r),void 0!==s&&function(t,e,n=1,r=0,s=!0){t.pathLength=1;const i=s?Ke:Ze;t[i.offset]=H.transform(-r);const o=H.transform(e),a=H.transform(n);t[i.array]=`${o} ${a}`}(h,s,i,o,!1)}const Ge=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),Xe=t=>"string"===typeof t&&"svg"===t.toLowerCase();function Ye(t,e,n){const r=We(t,e,n);for(const i in t)if(se(t[i])||se(e[i])){r[-1!==s.indexOf(i)?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i]=t[i]}return r}class Qe extends Le{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=_e}getBaseTargetFromProps(t,e){return t[e]}readValueFromInstance(t,e){if(i.has(e)){const t=te(e);return t&&t.default||0}return e=Ge.has(e)?e:He(e),t.getAttribute(e)}scrapeMotionValuesFromProps(t,e,n){return Ye(t,e,n)}build(t,e,n){Je(t,e,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(t,e,n,r){!function(t,e,n,r){Ve(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(Ge.has(s)?s:He(s),e.attrs[s])}(t,e,0,r)}mount(t){this.isSVGTag=Xe(t.tagName),super.mount(t)}}const tn=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function en(t){return"string"===typeof t&&!t.includes("-")&&!!(tn.indexOf(t)>-1||/[A-Z]/u.test(t))}const nn=(t,e)=>en(t)?new Qe(e):new ze(e,{allowProjection:t!==r.Fragment});var rn=n(7437),sn=n(1438);const on=(0,r.createContext)({strict:!1});var an=n(7343);const cn=(0,r.createContext)({});function ln(t){const{initial:e,animate:n}=function(t,e){if(Oe(t)){const{initial:e,animate:n}=t;return{initial:!1===e||Ae(e)?e:void 0,animate:Ae(n)?n:void 0}}return!1!==t.inherit?e:{}}(t,(0,r.useContext)(cn));return(0,r.useMemo)((()=>({initial:e,animate:n})),[un(e),un(n)])}function un(t){return Array.isArray(t)?t.join(" "):t}const hn=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function dn(t,e,n){for(const r in e)se(e[r])||qe(r,n)||(t[r]=e[r])}function fn(t,e){const n={};return dn(n,t.style||{},t),Object.assign(n,function({transformTemplate:t},e){return(0,r.useMemo)((()=>{const n=hn();return Ne(n,e,t),Object.assign({},n.vars,n.style)}),[e])}(t,e)),n}function pn(t,e){const n={},r=fn(t,e);return t.drag&&!1!==t.dragListener&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=!0===t.drag?"none":"pan-"+("x"===t.drag?"y":"x")),void 0===t.tabIndex&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const mn=()=>({...hn(),attrs:{}});function gn(t,e,n,s){const i=(0,r.useMemo)((()=>{const n=mn();return Je(n,e,Xe(s),t.transformTemplate,t.style),{...n.attrs,style:{...n.style}}}),[e]);if(t.style){const e={};dn(e,t.style,t),i.style={...e,...i.style}}return i}const yn=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function vn(t){return t.startsWith("while")||t.startsWith("drag")&&"draggable"!==t||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||yn.has(t)}let wn=t=>!vn(t);try{"function"===typeof(bn=require("@emotion/is-prop-valid").default)&&(wn=t=>t.startsWith("on")?!vn(t):bn(t))}catch{}var bn;function _n(t,e,n,{latestValues:s},i,o=!1){const a=(en(t)?gn:pn)(e,s,i,t),c=function(t,e,n){const r={};for(const s in t)"values"===s&&"object"===typeof t.values||(wn(s)||!0===n&&vn(s)||!e&&!vn(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}(e,"string"===typeof t,o),l=t!==r.Fragment?{...c,...a,ref:n}:{},{children:u}=e,h=(0,r.useMemo)((()=>se(u)?u.get():u),[u]);return(0,r.createElement)(t,{...l,children:h})}var kn=n(6256),Sn=n(2368);function En(t){return se(t)?t.get():t}function Tn(t,e,n,r){const s={},i=r(t,{});for(const d in i)s[d]=En(i[d]);let{initial:o,animate:a}=t;const c=Oe(t),l=je(t);e&&l&&!c&&!1!==t.inherit&&(void 0===o&&(o=e.initial),void 0===a&&(a=e.animate));let u=!!n&&!1===n.initial;u=u||!1===o;const h=u?a:o;if(h&&"boolean"!==typeof h&&!xe(h)){const e=Array.isArray(h)?h:[h];for(let n=0;n<e.length;n++){const r=Ie(t,e[n]);if(r){const{transitionEnd:t,transition:e,...n}=r;for(const r in n){let t=n[r];if(Array.isArray(t)){t=t[u?t.length-1:0]}null!==t&&(s[r]=t)}for(const r in t)s[r]=t[r]}}}return s}const xn=t=>(e,n)=>{const s=(0,r.useContext)(cn),i=(0,r.useContext)(kn.O),o=()=>function({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,s){return{latestValues:Tn(n,r,s,t),renderState:e()}}(t,e,s,i);return n?o():(0,Sn.h)(o)},An=xn({scrapeMotionValuesFromProps:We,createRenderState:hn}),Rn=xn({scrapeMotionValuesFromProps:Ye,createRenderState:mn});const Pn=Symbol.for("motionComponentSymbol");function On(t){return t&&"object"===typeof t&&Object.prototype.hasOwnProperty.call(t,"current")}function jn(t,e,n){return(0,r.useCallback)((r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&("function"===typeof n?n(r):On(n)&&(n.current=r))}),[e])}const Cn="data-"+He("framerAppearId"),In=(0,r.createContext)({});var Mn=n(7164);function $n(t,e,n,s,i){const{visualElement:o}=(0,r.useContext)(cn),a=(0,r.useContext)(on),c=(0,r.useContext)(kn.O),l=(0,r.useContext)(an._).reducedMotion,u=(0,r.useRef)(null);s=s||a.renderer,!u.current&&s&&(u.current=s(t,{visualState:e,parent:o,props:n,presenceContext:c,blockInitialAnimation:!!c&&!1===c.initial,reducedMotionConfig:l}));const h=u.current,d=(0,r.useContext)(In);!h||h.projection||!i||"html"!==h.type&&"svg"!==h.type||function(t,e,n,r){const{layoutId:s,layout:i,drag:o,dragConstraints:a,layoutScroll:c,layoutRoot:l,layoutCrossfade:u}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:Ln(t.parent)),t.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:Boolean(o)||a&&On(a),visualElement:t,animationType:"string"===typeof i?i:"both",initialPromotionConfig:r,crossfade:u,layoutScroll:c,layoutRoot:l})}(u.current,n,i,d);const f=(0,r.useRef)(!1);(0,r.useInsertionEffect)((()=>{h&&f.current&&h.update(n,c)}));const p=n[Cn],m=(0,r.useRef)(Boolean(p)&&!window.MotionHandoffIsComplete?.(p)&&window.MotionHasOptimisedAnimation?.(p));return(0,Mn.L)((()=>{h&&(f.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),h.scheduleRenderMicrotask(),m.current&&h.animationState&&h.animationState.animateChanges())})),(0,r.useEffect)((()=>{h&&(!m.current&&h.animationState&&h.animationState.animateChanges(),m.current&&(queueMicrotask((()=>{window.MotionHandoffMarkAsComplete?.(p)})),m.current=!1),h.enteringChildren=void 0)})),h}function Ln(t){if(t)return!1!==t.options.allowProjection?t.projection:Ln(t.parent)}function Un(t){let{forwardMotionProps:e=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;n&&function(t){for(const e in t)we[e]={...we[e],...t[e]}}(n);const i=en(t)?Rn:An;function o(n,o){let a;const c={...(0,r.useContext)(an._),...n,layoutId:Dn(n)},{isStatic:l}=c,u=ln(n),h=i(n,l);if(!l&&ke.j){!function(t,e){(0,r.useContext)(on).strict;0}();const e=function(t){const{drag:e,layout:n}=we;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:(null===e||void 0===e?void 0:e.isEnabled(t))||(null===n||void 0===n?void 0:n.isEnabled(t))?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}(c);a=e.MeasureLayout,u.visualElement=$n(t,h,c,s,e.ProjectionNode)}return(0,rn.jsxs)(cn.Provider,{value:u,children:[a&&u.visualElement?(0,rn.jsx)(a,{visualElement:u.visualElement,...c}):null,_n(t,n,jn(h,u.visualElement,o),h,l,e)]})}var a,c;o.displayName="motion.".concat("string"===typeof t?t:"create(".concat(null!==(c=null!==(a=t.displayName)&&void 0!==a?a:t.name)&&void 0!==c?c:"",")"));const l=(0,r.forwardRef)(o);return l[Pn]=t,l}function Dn(t){let{layoutId:e}=t;const n=(0,r.useContext)(sn.p).id;return n&&void 0!==e?n+"-"+e:e}function Bn(t,e){if("undefined"===typeof Proxy)return Un;const n=new Map,r=(n,r)=>Un(n,r,t,e);return new Proxy(((t,e)=>r(t,e)),{get:(s,i)=>"create"===i?r:(n.has(i)||n.set(i,Un(i,void 0,t,e)),n.get(i))})}function Nn(t,e,n){const r=t.getProps();return Ie(r,e,void 0!==n?n:r.custom,t)}function Vn(t,e){return t?.[e]??t?.default??t}const Fn=t=>Array.isArray(t);function qn(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,pe(n))}function Wn(t,e){const n=t.getValue("willChange");if(r=n,Boolean(se(r)&&r.add))return n.add(e);if(!n&&lt.WillChange){const n=new lt.WillChange("auto");t.addValue("willChange",n),n.add(e)}var r}function zn(t){return t.props[Cn]}function Hn(t){t.duration=0,t.type}const Kn=(t,e)=>n=>e(t(n)),Zn=(...t)=>t.reduce(Kn),Jn=t=>1e3*t,Gn=t=>t/1e3,Xn={layout:0,mainThread:0,waapi:0};function Yn(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function Qn(t,e){return n=>n>0?e:t}const tr=(t,e,n)=>{const r=t*t,s=n*(e*e-r)+r;return s<0?0:Math.sqrt(s)},er=[Ct,jt,It];function nr(t){const e=(n=t,er.find((t=>t.test(n))));var n;if(Q(Boolean(e),`'${t}' is not an animatable color. Use the equivalent color code instead.`,"color-not-animatable"),!Boolean(e))return!1;let r=e.parse(t);return e===It&&(r=function({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,n/=100;let s=0,i=0,o=0;if(e/=100){const r=n<.5?n*(1+e):n+e-n*e,a=2*n-r;s=Yn(a,r,t+1/3),i=Yn(a,r,t),o=Yn(a,r,t-1/3)}else s=i=o=n;return{red:Math.round(255*s),green:Math.round(255*i),blue:Math.round(255*o),alpha:r}}(r)),r}const rr=(t,e)=>{const n=nr(t),r=nr(e);if(!n||!r)return Qn(t,e);const s={...n};return t=>(s.red=tr(n.red,r.red,t),s.green=tr(n.green,r.green,t),s.blue=tr(n.blue,r.blue,t),s.alpha=k(n.alpha,r.alpha,t),jt.transform(s))},sr=new Set(["none","hidden"]);function ir(t,e){return n=>k(t,e,n)}function or(t){return"number"===typeof t?ir:"string"===typeof t?w(t)?Qn:Mt.test(t)?rr:lr:Array.isArray(t)?ar:"object"===typeof t?Mt.test(t)?rr:cr:Qn}function ar(t,e){const n=[...t],r=n.length,s=t.map(((t,n)=>or(t)(t,e[n])));return t=>{for(let e=0;e<r;e++)n[e]=s[e](t);return n}}function cr(t,e){const n={...t,...e},r={};for(const s in n)void 0!==t[s]&&void 0!==e[s]&&(r[s]=or(t[s])(t[s],e[s]));return t=>{for(const e in r)n[e]=r[e](t);return n}}const lr=(t,e)=>{const n=Ht.createTransformer(e),r=Ft(t),s=Ft(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?sr.has(t)&&!s.values.length||sr.has(e)&&!r.values.length?function(t,e){return sr.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}(t,e):Zn(ar(function(t,e){const n=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const i=e.types[s],o=t.indexes[i][r[i]],a=t.values[o]??0;n[s]=a,r[i]++}return n}(r,s),s.values),n):(Q(!0,`Complex values '${t}' and '${e}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`,"complex-values-different"),Qn(t,e))};function ur(t,e,n){if("number"===typeof t&&"number"===typeof e&&"number"===typeof n)return k(t,e,n);return or(t)(t,e)}const hr=t=>{const e=({timestamp:e})=>t(e);return{start:(t=!0)=>ft.update(e,t),stop:()=>pt(e),now:()=>mt.isProcessing?mt.timestamp:ae.now()}},dr=(t,e,n=10)=>{let r="";const s=Math.max(Math.round(e/n),2);for(let i=0;i<s;i++)r+=Math.round(1e4*t(i/(s-1)))/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},fr=2e4;function pr(t){let e=0;let n=t.next(e);for(;!n.done&&e<fr;)e+=50,n=t.next(e);return e>=fr?1/0:e}const mr=5;function gr(t,e,n){const r=Math.max(e-mr,0);return he(n-t(r),e-r)}const yr={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},vr=.001;function wr({duration:t=yr.duration,bounce:e=yr.bounce,velocity:n=yr.velocity,mass:r=yr.mass}){let s,i;Q(t<=Jn(yr.maxDuration),"Spring duration must be 10 seconds or less","spring-duration-limit");let o=1-e;o=B(yr.minDamping,yr.maxDamping,o),t=B(yr.minDuration,yr.maxDuration,Gn(t)),o<1?(s=e=>{const r=e*o,s=r*t,i=r-n,a=_r(e,o),c=Math.exp(-s);return vr-i/a*c},i=e=>{const r=e*o*t,i=r*n+n,a=Math.pow(o,2)*Math.pow(e,2)*t,c=Math.exp(-r),l=_r(Math.pow(e,2),o);return(-s(e)+vr>0?-1:1)*((i-a)*c)/l}):(s=e=>Math.exp(-e*t)*((e-n)*t+1)-vr,i=e=>Math.exp(-e*t)*(t*t*(n-e)));const a=function(t,e,n){let r=n;for(let s=1;s<br;s++)r-=t(r)/e(r);return r}(s,i,5/t);if(t=Jn(t),isNaN(a))return{stiffness:yr.stiffness,damping:yr.damping,duration:t};{const e=Math.pow(a,2)*r;return{stiffness:e,damping:2*o*Math.sqrt(r*e),duration:t}}}const br=12;function _r(t,e){return t*Math.sqrt(1-e*e)}const kr=["duration","bounce"],Sr=["stiffness","damping","mass"];function Er(t,e){return e.some((e=>void 0!==t[e]))}function Tr(t=yr.visualDuration,e=yr.bounce){const n="object"!==typeof t?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:s}=n;const i=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:i},{stiffness:c,damping:l,mass:u,duration:h,velocity:d,isResolvedFromDuration:f}=function(t){let e={velocity:yr.velocity,stiffness:yr.stiffness,damping:yr.damping,mass:yr.mass,isResolvedFromDuration:!1,...t};if(!Er(t,Sr)&&Er(t,kr))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(1.2*n),s=r*r,i=2*B(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:yr.mass,stiffness:s,damping:i}}else{const n=wr(t);e={...e,...n,mass:yr.mass},e.isResolvedFromDuration=!0}return e}({...n,velocity:-Gn(n.velocity||0)}),p=d||0,m=l/(2*Math.sqrt(c*u)),g=o-i,y=Gn(Math.sqrt(c/u)),v=Math.abs(g)<5;let w;if(r||(r=v?yr.restSpeed.granular:yr.restSpeed.default),s||(s=v?yr.restDelta.granular:yr.restDelta.default),m<1){const t=_r(y,m);w=e=>{const n=Math.exp(-m*y*e);return o-n*((p+m*y*g)/t*Math.sin(t*e)+g*Math.cos(t*e))}}else if(1===m)w=t=>o-Math.exp(-y*t)*(g+(p+y*g)*t);else{const t=y*Math.sqrt(m*m-1);w=e=>{const n=Math.exp(-m*y*e),r=Math.min(t*e,300);return o-n*((p+m*y*g)*Math.sinh(r)+t*g*Math.cosh(r))/t}}const b={calculatedDuration:f&&h||null,next:t=>{const e=w(t);if(f)a.done=t>=h;else{let n=0===t?p:0;m<1&&(n=0===t?Jn(p):gr(w,t,e));const i=Math.abs(n)<=r,c=Math.abs(o-e)<=s;a.done=i&&c}return a.value=a.done?o:e,a},toString:()=>{const t=Math.min(pr(b),fr),e=dr((e=>b.next(t*e).value),t,30);return t+"ms "+e},toTransition:()=>{}};return b}function xr({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:c,restDelta:l=.5,restSpeed:u}){const h=t[0],d={done:!1,value:h},f=t=>void 0===a?c:void 0===c||Math.abs(a-t)<Math.abs(c-t)?a:c;let p=n*e;const m=h+p,g=void 0===o?m:o(m);g!==m&&(p=g-h);const y=t=>-p*Math.exp(-t/r),v=t=>g+y(t),w=t=>{const e=y(t),n=v(t);d.done=Math.abs(e)<=l,d.value=d.done?g:n};let b,_;const k=t=>{var e;(e=d.value,void 0!==a&&e<a||void 0!==c&&e>c)&&(b=t,_=Tr({keyframes:[d.value,f(d.value)],velocity:gr(v,t,d.value),damping:s,stiffness:i,restDelta:l,restSpeed:u}))};return k(0),{calculatedDuration:null,next:t=>{let e=!1;return _||void 0!==b||(e=!0,w(t),k(t)),void 0!==b&&t>=b?_.next(t-b):(!e&&w(t),d)}}}Tr.applyToOptions=t=>{const e=function(t,e=100,n){const r=n({...t,keyframes:[0,e]}),s=Math.min(pr(r),fr);return{type:"keyframes",ease:t=>r.next(s*t).value/e,duration:Gn(s)}}(t,100,Tr);return t.ease=e.ease,t.duration=Jn(e.duration),t.type="keyframes",t};const Ar=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,Rr=1e-7,Pr=12;function Or(t,e,n,r){if(t===e&&n===r)return ct;const s=e=>function(t,e,n,r,s){let i,o,a=0;do{o=e+(n-e)/2,i=Ar(o,r,s)-t,i>0?n=o:e=o}while(Math.abs(i)>Rr&&++a<Pr);return o}(e,0,1,t,n);return t=>0===t||1===t?t:Ar(s(t),e,r)}const jr=Or(.42,0,1,1),Cr=Or(0,0,.58,1),Ir=Or(.42,0,.58,1),Mr=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,$r=t=>e=>1-t(1-e),Lr=Or(.33,1.53,.69,.99),Ur=$r(Lr),Dr=Mr(Ur),Br=t=>(t*=2)<1?.5*Ur(t):.5*(2-Math.pow(2,-10*(t-1))),Nr=t=>1-Math.sin(Math.acos(t)),Vr=$r(Nr),Fr=Mr(Nr),qr=t=>Array.isArray(t)&&"number"===typeof t[0],Wr={linear:ct,easeIn:jr,easeInOut:Ir,easeOut:Cr,circIn:Nr,circInOut:Fr,circOut:Vr,backIn:Ur,backInOut:Dr,backOut:Lr,anticipate:Br},zr=t=>{if(qr(t)){tt(4===t.length,"Cubic bezier arrays must contain four numerical values.","cubic-bezier-length");const[e,n,r,s]=t;return Or(e,n,r,s)}return"string"===typeof t?(tt(void 0!==Wr[t],`Invalid easing type '${t}'`,"invalid-easing-type"),Wr[t]):t},Hr=(t,e,n)=>{const r=e-t;return 0===r?1:(n-t)/r};function Kr(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const i=t.length;if(tt(i===e.length,"Both input and output ranges must be the same length","range-length"),1===i)return()=>e[0];if(2===i&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=function(t,e,n){const r=[],s=n||lt.mix||ur,i=t.length-1;for(let o=0;o<i;o++){let n=s(t[o],t[o+1]);if(e){const t=Array.isArray(e)?e[o]||ct:e;n=Zn(t,n)}r.push(n)}return r}(e,r,s),c=a.length,l=n=>{if(o&&n<t[0])return e[0];let r=0;if(c>1)for(;r<t.length-2&&!(n<t[r+1]);r++);const s=Hr(t[r],t[r+1],n);return a[r](s)};return n?e=>l(B(t[0],t[i-1],e)):l}function Zr(t){const e=[0];return function(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=Hr(0,e,r);t.push(k(n,1,s))}}(e,t.length-1),e}function Jr({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=(t=>Array.isArray(t)&&"number"!==typeof t[0])(r)?r.map(zr):zr(r),i={done:!1,value:e[0]},o=function(t,e){return t.map((t=>t*e))}(n&&n.length===e.length?n:Zr(e),t),a=Kr(o,e,{ease:Array.isArray(s)?s:(c=e,l=s,c.map((()=>l||Ir)).splice(0,c.length-1))});var c,l;return{calculatedDuration:t,next:e=>(i.value=a(e),i.done=e>=t,i)}}const Gr=t=>null!==t;function Xr(t,{repeat:e,repeatType:n="loop"},r,s=1){const i=t.filter(Gr),o=s<0||e&&"loop"!==n&&e%2===1?0:i.length-1;return o&&void 0!==r?r:i[o]}const Yr={decay:xr,inertia:xr,tween:Jr,keyframes:Jr,spring:Tr};function Qr(t){"string"===typeof t.type&&(t.type=Yr[t.type])}class ts{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise((t=>{this.resolve=t}))}notifyFinished(){this.resolve()}then(t,e){return this.finished.then(t,e)}}const es=t=>t/100;class ns extends ts{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:t}=this.options;t&&t.updatedAt!==ae.now()&&this.tick(ae.now()),this.isStopped=!0,"idle"!==this.state&&(this.teardown(),this.options.onStop?.())},Xn.mainThread++,this.options=t,this.initAnimation(),this.play(),!1===t.autoplay&&this.pause()}initAnimation(){const{options:t}=this;Qr(t);const{type:e=Jr,repeat:n=0,repeatDelay:r=0,repeatType:s,velocity:i=0}=t;let{keyframes:o}=t;const a=e||Jr;a!==Jr&&"number"!==typeof o[0]&&(this.mixKeyframes=Zn(es,ur(o[0],o[1])),o=[0,100]);const c=a({...t,keyframes:o});"mirror"===s&&(this.mirroredGenerator=a({...t,keyframes:[...o].reverse(),velocity:-i})),null===c.calculatedDuration&&(c.calculatedDuration=pr(c));const{calculatedDuration:l}=c;this.calculatedDuration=l,this.resolvedDuration=l+r,this.totalDuration=this.resolvedDuration*(n+1)-r,this.generator=c}updateTime(t){const e=Math.round(t-this.startTime)*this.playbackSpeed;null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=e}tick(t,e=!1){const{generator:n,totalDuration:r,mixKeyframes:s,mirroredGenerator:i,resolvedDuration:o,calculatedDuration:a}=this;if(null===this.startTime)return n.next(0);const{delay:c=0,keyframes:l,repeat:u,repeatType:h,repeatDelay:d,type:f,onUpdate:p,finalKeyframe:m}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-r/this.speed,this.startTime)),e?this.currentTime=t:this.updateTime(t);const g=this.currentTime-c*(this.playbackSpeed>=0?1:-1),y=this.playbackSpeed>=0?g<0:g>r;this.currentTime=Math.max(g,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=r);let v=this.currentTime,w=n;if(u){const t=Math.min(this.currentTime,r)/o;let e=Math.floor(t),n=t%1;!n&&t>=1&&(n=1),1===n&&e--,e=Math.min(e,u+1);Boolean(e%2)&&("reverse"===h?(n=1-n,d&&(n-=d/o)):"mirror"===h&&(w=i)),v=B(0,1,n)*o}const b=y?{done:!1,value:l[0]}:w.next(v);s&&(b.value=s(b.value));let{done:_}=b;y||null===a||(_=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);const k=null===this.holdTime&&("finished"===this.state||"running"===this.state&&_);return k&&f!==xr&&(b.value=Xr(l,this.options,m,this.speed)),p&&p(b.value),k&&this.finish(),b}then(t,e){return this.finished.then(t,e)}get duration(){return Gn(this.calculatedDuration)}get time(){return Gn(this.currentTime)}set time(t){t=Jn(t),this.currentTime=t,null===this.startTime||null!==this.holdTime||0===this.playbackSpeed?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(ae.now());const e=this.playbackSpeed!==t;this.playbackSpeed=t,e&&(this.time=Gn(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=hr,startTime:e}=this.options;this.driver||(this.driver=t((t=>this.tick(t)))),this.options.onPlay?.();const n=this.driver.now();"finished"===this.state?(this.updateFinished(),this.startTime=n):null!==this.holdTime?this.startTime=n-this.holdTime:this.startTime||(this.startTime=e??n),"finished"===this.state&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(ae.now()),this.holdTime=this.currentTime}complete(){"running"!==this.state&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null,Xn.mainThread--}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function rs(t){let e;return()=>(void 0===e&&(e=t()),e)}const ss=rs((()=>void 0!==window.ScrollTimeline)),is={};function os(t,e){const n=rs(t);return()=>is[e]??n()}const as=os((()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(t){return!1}return!0}),"linearEasing"),cs=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,ls={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:cs([0,.65,.55,1]),circOut:cs([.55,0,1,.45]),backIn:cs([.31,.01,.66,-.59]),backOut:cs([.33,1.53,.69,.99])};function us(t,e){return t?"function"===typeof t?as()?dr(t,e):"ease-out":qr(t)?cs(t):Array.isArray(t)?t.map((t=>us(t,e)||ls.easeOut)):ls[t]:void 0}function hs(t,e,n,{delay:r=0,duration:s=300,repeat:i=0,repeatType:o="loop",ease:a="easeOut",times:c}={},l=void 0){const u={[e]:n};c&&(u.offset=c);const h=us(a,s);Array.isArray(h)&&(u.easing=h),ht.value&&Xn.waapi++;const d={delay:r,duration:s,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:i+1,direction:"reverse"===o?"alternate":"normal"};l&&(d.pseudoElement=l);const f=t.animate(u,d);return ht.value&&f.finished.finally((()=>{Xn.waapi--})),f}function ds(t){return"function"===typeof t&&"applyToOptions"in t}class fs extends ts{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:e,name:n,keyframes:r,pseudoElement:s,allowFlatten:i=!1,finalKeyframe:o,onComplete:a}=t;this.isPseudoElement=Boolean(s),this.allowFlatten=i,this.options=t,tt("string"!==typeof t.type,'Mini animate() doesn\'t support "type" as a string.',"mini-spring");const c=function({type:t,...e}){return ds(t)&&as()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}(t);this.animation=hs(e,n,r,c,s),!1===c.autoplay&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const t=Xr(r,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(t):function(t,e,n){(t=>t.startsWith("--"))(e)?t.style.setProperty(e,n):t.style[e]=n}(e,n,t),this.animation.cancel()}a?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),"finished"===this.state&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch(t){}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;"idle"!==t&&"finished"!==t&&(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return Gn(Number(t))}get time(){return Gn(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=Jn(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return null!==this.finishedTime?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:e}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&ss()?(this.animation.timeline=t,ct):e(this)}}const ps={anticipate:Br,backInOut:Dr,circInOut:Fr};function ms(t){"string"===typeof t.ease&&t.ease in ps&&(t.ease=ps[t.ease])}class gs extends fs{constructor(t){ms(t),Qr(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:e,onUpdate:n,onComplete:r,element:s,...i}=this.options;if(!e)return;if(void 0!==t)return void e.set(t);const o=new ns({...i,autoplay:!1}),a=Jn(this.finishedTime??this.time);e.setWithVelocity(o.sample(a-10).value,o.sample(a).value,10),o.stop()}}const ys=(t,e)=>"zIndex"!==e&&(!("number"!==typeof t&&!Array.isArray(t))||!("string"!==typeof t||!Ht.test(t)&&"0"!==t||t.startsWith("url(")));const vs=new Set(["opacity","clipPath","filter","transform"]),ws=rs((()=>Object.hasOwnProperty.call(Element.prototype,"animate")));class bs extends ts{constructor({autoplay:t=!0,delay:e=0,type:n="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:i="loop",keyframes:o,name:a,motionValue:c,element:l,...u}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=ae.now();const h={autoplay:t,delay:e,type:n,repeat:r,repeatDelay:s,repeatType:i,name:a,motionValue:c,element:l,...u},d=l?.KeyframeResolver||St;this.keyframeResolver=new d(o,((t,e,n)=>this.onKeyframesResolved(t,e,h,!n)),a,c,l),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,e,n,r){this.keyframeResolver=void 0;const{name:s,type:i,velocity:o,delay:a,isHandoff:c,onUpdate:l}=n;this.resolvedAt=ae.now(),function(t,e,n,r){const s=t[0];if(null===s)return!1;if("display"===e||"visibility"===e)return!0;const i=t[t.length-1],o=ys(s,e),a=ys(i,e);return Q(o===a,`You are trying to animate ${e} from "${s}" to "${i}". "${o?i:s}" is not an animatable value.`,"value-not-animatable"),!(!o||!a)&&(function(t){const e=t[0];if(1===t.length)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}(t)||("spring"===n||ds(n))&&r)}(t,s,i,o)||(!lt.instantAnimations&&a||l?.(Xr(t,n,e)),t[0]=t[t.length-1],Hn(n),n.repeat=0);const u={startTime:r?this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt:void 0,finalKeyframe:e,...n,keyframes:t},h=!c&&function(t){const{motionValue:e,name:n,repeatDelay:r,repeatType:s,damping:i,type:o}=t,a=e?.owner?.current;if(!(a instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:l}=e.owner.getProps();return ws()&&n&&vs.has(n)&&("transform"!==n||!l)&&!c&&!r&&"mirror"!==s&&0!==i&&"inertia"!==o}(u)?new gs({...u,element:u.motionValue.owner.current}):new ns(u);h.finished.then((()=>this.notifyFinished())).catch(ct),this.pendingTimeline&&(this.stopTimeline=h.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=h}get finished(){return this._animation?this.animation.finished:this._finished}then(t,e){return this.finished.finally(t).then((()=>{}))}get animation(){return this._animation||(this.keyframeResolver?.resume(),bt=!0,kt(),_t(),bt=!1),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const _s=t=>null!==t;const ks={type:"spring",stiffness:500,damping:25,restSpeed:10},Ss={type:"keyframes",duration:.8},Es={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Ts=(t,{keyframes:e})=>e.length>2?Ss:i.has(t)?t.startsWith("scale")?{type:"spring",stiffness:550,damping:0===e[1]?2*Math.sqrt(550):30,restSpeed:10}:ks:Es;const xs=(t,e,n,r={},s,i)=>o=>{const a=Vn(r,t)||{},c=a.delay||r.delay||0;let{elapsed:l=0}=r;l-=Jn(c);const u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-l,onUpdate:t=>{e.set(t),a.onUpdate&&a.onUpdate(t)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:i?void 0:s};(function({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:a,from:c,elapsed:l,...u}){return!!Object.keys(u).length})(a)||Object.assign(u,Ts(t,u)),u.duration&&(u.duration=Jn(u.duration)),u.repeatDelay&&(u.repeatDelay=Jn(u.repeatDelay)),void 0!==u.from&&(u.keyframes[0]=u.from);let h=!1;if((!1===u.type||0===u.duration&&!u.repeatDelay)&&(Hn(u),0===u.delay&&(h=!0)),(lt.instantAnimations||lt.skipAnimations)&&(h=!0,Hn(u),u.delay=0),u.allowFlatten=!a.type&&!a.ease,h&&!i&&void 0!==e.get()){const t=function(t,{repeat:e,repeatType:n="loop"},r){const s=t.filter(_s),i=e&&"loop"!==n&&e%2===1?0:s.length-1;return i&&void 0!==r?r:s[i]}(u.keyframes,a);if(void 0!==t)return void ft.update((()=>{u.onUpdate(t),u.onComplete()}))}return a.isSync?new ns(u):new bs(u)};function As({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&!0!==e[n];return e[n]=!1,r}function Rs(t,e,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:i=t.getDefaultTransition(),transitionEnd:o,...a}=e;r&&(i=r);const c=[],l=s&&t.animationState&&t.animationState.getState()[s];for(const u in a){const e=t.getValue(u,t.latestValues[u]??null),r=a[u];if(void 0===r||l&&As(l,u))continue;const s={delay:n,...Vn(i||{},u)},o=e.get();if(void 0!==o&&!e.isAnimating&&!Array.isArray(r)&&r===o&&!s.velocity)continue;let h=!1;if(window.MotionHandoffAnimation){const e=zn(t);if(e){const t=window.MotionHandoffAnimation(e,u,ft);null!==t&&(s.startTime=t,h=!0)}}Wn(t,u),e.start(xs(u,e,r,t.shouldReduceMotion&&D.has(u)?{type:!1}:s,t,h));const d=e.animation;d&&c.push(d)}return o&&Promise.all(c).then((()=>{ft.update((()=>{o&&function(t,e){const n=Nn(t,e);let{transitionEnd:r={},transition:s={},...i}=n||{};i={...i,...r};for(const a in i)qn(t,a,(o=i[a],Fn(o)?o[o.length-1]||0:o));var o}(t,o)}))})),c}function Ps(t,e,n,r=0,s=1){const i=Array.from(t).sort(((t,e)=>t.sortNodePosition(e))).indexOf(e),o=t.size,a=(o-1)*r;return"function"===typeof n?n(i,o):1===s?i*r:a-i*r}function Os(t,e,n={}){const r=Nn(t,e,"exit"===n.type?t.presenceContext?.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const i=r?()=>Promise.all(Rs(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(r=0)=>{const{delayChildren:i=0,staggerChildren:o,staggerDirection:a}=s;return function(t,e,n=0,r=0,s=0,i=1,o){const a=[];for(const c of t.variantChildren)c.notify("AnimationStart",e),a.push(Os(c,e,{...o,delay:n+("function"===typeof r?0:r)+Ps(t.variantChildren,c,r,s,i)}).then((()=>c.notify("AnimationComplete",e))));return Promise.all(a)}(t,e,r,i,o,a,n)}:()=>Promise.resolve(),{when:a}=s;if(a){const[t,e]="beforeChildren"===a?[i,o]:[o,i];return t().then((()=>e()))}return Promise.all([i(),o(n.delay)])}function js(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const Cs=Pe.length;function Is(t){if(!t)return;if(!t.isControllingVariants){const e=t.parent&&Is(t.parent)||{};return void 0!==t.props.initial&&(e.initial=t.props.initial),e}const e={};for(let n=0;n<Cs;n++){const r=Pe[n],s=t.props[r];(Ae(s)||!1===s)&&(e[r]=s)}return e}const Ms=[...Re].reverse(),$s=Re.length;function Ls(t){return e=>Promise.all(e.map((({animation:e,options:n})=>function(t,e,n={}){let r;if(t.notify("AnimationStart",e),Array.isArray(e)){const s=e.map((e=>Os(t,e,n)));r=Promise.all(s)}else if("string"===typeof e)r=Os(t,e,n);else{const s="function"===typeof e?Nn(t,e,n.custom):e;r=Promise.all(Rs(t,s,n))}return r.then((()=>{t.notify("AnimationComplete",e)}))}(t,e,n))))}function Us(t){let e=Ls(t),n=Ns(),r=!0;const s=e=>(n,r)=>{const s=Nn(t,r,"exit"===e?t.presenceContext?.custom:void 0);if(s){const{transition:t,transitionEnd:e,...r}=s;n={...n,...r,...e}}return n};function i(i){const{props:o}=t,a=Is(t.parent)||{},c=[],l=new Set;let u={},h=1/0;for(let e=0;e<$s;e++){const d=Ms[e],f=n[d],p=void 0!==o[d]?o[d]:a[d],m=Ae(p),g=d===i?f.isActive:null;!1===g&&(h=e);let y=p===a[d]&&p!==o[d]&&m;if(y&&r&&t.manuallyAnimateOnMount&&(y=!1),f.protectedKeys={...u},!f.isActive&&null===g||!p&&!f.prevProp||xe(p)||"boolean"===typeof p)continue;const v=Ds(f.prevProp,p);let w=v||d===i&&f.isActive&&!y&&m||e>h&&m,b=!1;const _=Array.isArray(p)?p:[p];let k=_.reduce(s(d),{});!1===g&&(k={});const{prevResolvedValues:S={}}=f,E={...S,...k},T=e=>{w=!0,l.has(e)&&(b=!0,l.delete(e)),f.needsAnimating[e]=!0;const n=t.getValue(e);n&&(n.liveStyle=!1)};for(const t in E){const e=k[t],n=S[t];if(u.hasOwnProperty(t))continue;let r=!1;r=Fn(e)&&Fn(n)?!js(e,n):e!==n,r?void 0!==e&&null!==e?T(t):l.add(t):void 0!==e&&l.has(t)?T(t):f.protectedKeys[t]=!0}f.prevProp=p,f.prevResolvedValues=k,f.isActive&&(u={...u,...k}),r&&t.blockInitialAnimation&&(w=!1);const x=y&&v;w&&(!x||b)&&c.push(..._.map((e=>{const n={type:d};if("string"===typeof e&&r&&!x&&t.manuallyAnimateOnMount&&t.parent){const{parent:r}=t,s=Nn(r,e);if(r.enteringChildren&&s){const{delayChildren:e}=s.transition||{};n.delay=Ps(r.enteringChildren,t,e)}}return{animation:e,options:n}})))}if(l.size){const e={};if("boolean"!==typeof o.initial){const n=Nn(t,Array.isArray(o.initial)?o.initial[0]:o.initial);n&&n.transition&&(e.transition=n.transition)}l.forEach((n=>{const r=t.getBaseTarget(n),s=t.getValue(n);s&&(s.liveStyle=!0),e[n]=r??null})),c.push({animation:e})}let d=Boolean(c.length);return!r||!1!==o.initial&&o.initial!==o.animate||t.manuallyAnimateOnMount||(d=!1),r=!1,d?e(c):Promise.resolve()}return{animateChanges:i,setActive:function(e,r){if(n[e].isActive===r)return Promise.resolve();t.variantChildren?.forEach((t=>t.animationState?.setActive(e,r))),n[e].isActive=r;const s=i(e);for(const t in n)n[t].protectedKeys={};return s},setAnimateFunction:function(n){e=n(t)},getState:()=>n,reset:()=>{n=Ns(),r=!0}}}function Ds(t,e){return"string"===typeof e?e!==t:!!Array.isArray(e)&&!js(e,t)}function Bs(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Ns(){return{animate:Bs(!0),whileInView:Bs(),whileHover:Bs(),whileTap:Bs(),whileDrag:Bs(),whileFocus:Bs(),exit:Bs()}}class Vs{constructor(t){this.isMounted=!1,this.node=t}update(){}}let Fs=0;const qs={animation:{Feature:class extends Vs{constructor(t){super(t),t.animationState||(t.animationState=Us(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();xe(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:e}=this.node.prevProps||{};t!==e&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}},exit:{Feature:class extends Vs{constructor(){super(...arguments),this.id=Fs++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:e}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const r=this.node.animationState.setActive("exit",!t);e&&!t&&r.then((()=>{e(this.id)}))}mount(){const{register:t,onExitComplete:e}=this.node.presenceContext||{};e&&e(this.id),t&&(this.unmount=t(this.id))}unmount(){}}}},Ws={x:!1,y:!1};function zs(){return Ws.x||Ws.y}function Hs(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const Ks=t=>"mouse"===t.pointerType?"number"!==typeof t.button||t.button<=0:!1!==t.isPrimary;function Zs(t){return{point:{x:t.pageX,y:t.pageY}}}function Js(t,e,n,r){return Hs(t,e,(t=>e=>Ks(e)&&t(e,Zs(e)))(n),r)}const Gs=.9999,Xs=1.0001,Ys=-.01,Qs=.01;function ti(t){return t.max-t.min}function ei(t,e,n,r=.5){t.origin=r,t.originPoint=k(e.min,e.max,t.origin),t.scale=ti(n)/ti(e),t.translate=k(n.min,n.max,t.origin)-t.originPoint,(t.scale>=Gs&&t.scale<=Xs||isNaN(t.scale))&&(t.scale=1),(t.translate>=Ys&&t.translate<=Qs||isNaN(t.translate))&&(t.translate=0)}function ni(t,e,n,r){ei(t.x,e.x,n.x,r?r.originX:void 0),ei(t.y,e.y,n.y,r?r.originY:void 0)}function ri(t,e,n){t.min=n.min+e.min,t.max=t.min+ti(e)}function si(t,e,n){t.min=e.min-n.min,t.max=t.min+ti(e)}function ii(t,e,n){si(t.x,e.x,n.x),si(t.y,e.y,n.y)}function oi(t){return[t("x"),t("y")]}const ai=({current:t})=>t?t.ownerDocument.defaultView:null,ci=(t,e)=>Math.abs(t-e);class li{constructor(t,e,{transformPagePoint:n,contextWindow:r=window,dragSnapToOrigin:s=!1,distanceThreshold:i=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const t=di(this.lastMoveEventInfo,this.history),e=null!==this.startEvent,n=function(t,e){const n=ci(t.x,e.x),r=ci(t.y,e.y);return Math.sqrt(n**2+r**2)}(t.offset,{x:0,y:0})>=this.distanceThreshold;if(!e&&!n)return;const{point:r}=t,{timestamp:s}=mt;this.history.push({...r,timestamp:s});const{onStart:i,onMove:o}=this.handlers;e||(i&&i(this.lastMoveEvent,t),this.startEvent=this.lastMoveEvent),o&&o(this.lastMoveEvent,t)},this.handlePointerMove=(t,e)=>{this.lastMoveEvent=t,this.lastMoveEventInfo=ui(e,this.transformPagePoint),ft.update(this.updatePoint,!0)},this.handlePointerUp=(t,e)=>{this.end();const{onEnd:n,onSessionEnd:r,resumeAnimation:s}=this.handlers;if(this.dragSnapToOrigin&&s&&s(),!this.lastMoveEvent||!this.lastMoveEventInfo)return;const i=di("pointercancel"===t.type?this.lastMoveEventInfo:ui(e,this.transformPagePoint),this.history);this.startEvent&&n&&n(t,i),r&&r(t,i)},!Ks(t))return;this.dragSnapToOrigin=s,this.handlers=e,this.transformPagePoint=n,this.distanceThreshold=i,this.contextWindow=r||window;const o=ui(Zs(t),this.transformPagePoint),{point:a}=o,{timestamp:c}=mt;this.history=[{...a,timestamp:c}];const{onSessionStart:l}=e;l&&l(t,di(o,this.history)),this.removeListeners=Zn(Js(this.contextWindow,"pointermove",this.handlePointerMove),Js(this.contextWindow,"pointerup",this.handlePointerUp),Js(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),pt(this.updatePoint)}}function ui(t,e){return e?{point:e(t.point)}:t}function hi(t,e){return{x:t.x-e.x,y:t.y-e.y}}function di({point:t},e){return{point:t,delta:hi(t,pi(e)),offset:hi(t,fi(e)),velocity:mi(e,.1)}}function fi(t){return t[0]}function pi(t){return t[t.length-1]}function mi(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=pi(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>Jn(e)));)n--;if(!r)return{x:0,y:0};const i=Gn(s.timestamp-r.timestamp);if(0===i)return{x:0,y:0};const o={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function gi(t,e,n){return{min:void 0!==e?t.min+e:void 0,max:void 0!==n?t.max+n-(t.max-t.min):void 0}}function yi(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}const vi=.35;function wi(t,e,n){return{min:bi(t,e),max:bi(t,n)}}function bi(t,e){return"number"===typeof t?t:t[e]||0}const _i=new WeakMap;class ki{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=_e(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:e=!1,distanceThreshold:n}={}){const{presenceContext:r}=this.visualElement;if(r&&!1===r.isPresent)return;const{dragSnapToOrigin:s}=this.getProps();this.panSession=new li(t,{onSessionStart:t=>{const{dragSnapToOrigin:n}=this.getProps();n?this.pauseAnimation():this.stopAnimation(),e&&this.snapToCursor(Zs(t).point)},onStart:(t,e)=>{const{drag:n,dragPropagation:r,onDragStart:s}=this.getProps();if(n&&!r&&(this.openDragLock&&this.openDragLock(),this.openDragLock="x"===(i=n)||"y"===i?Ws[i]?null:(Ws[i]=!0,()=>{Ws[i]=!1}):Ws.x||Ws.y?null:(Ws.x=Ws.y=!0,()=>{Ws.x=Ws.y=!1}),!this.openDragLock))return;var i;this.latestPointerEvent=t,this.latestPanInfo=e,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),oi((t=>{let e=this.getAxisMotionValue(t).get()||0;if(z.test(e)){const{projection:n}=this.visualElement;if(n&&n.layout){const r=n.layout.layoutBox[t];if(r){e=ti(r)*(parseFloat(e)/100)}}}this.originPoint[t]=e})),s&&ft.postRender((()=>s(t,e))),Wn(this.visualElement,"transform");const{animationState:o}=this.visualElement;o&&o.setActive("whileDrag",!0)},onMove:(t,e)=>{this.latestPointerEvent=t,this.latestPanInfo=e;const{dragPropagation:n,dragDirectionLock:r,onDirectionLock:s,onDrag:i}=this.getProps();if(!n&&!this.openDragLock)return;const{offset:o}=e;if(r&&null===this.currentDirection)return this.currentDirection=function(t,e=10){let n=null;Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x");return n}(o),void(null!==this.currentDirection&&s&&s(this.currentDirection));this.updateAxis("x",e.point,o),this.updateAxis("y",e.point,o),this.visualElement.render(),i&&i(t,e)},onSessionEnd:(t,e)=>{this.latestPointerEvent=t,this.latestPanInfo=e,this.stop(t,e),this.latestPointerEvent=null,this.latestPanInfo=null},resumeAnimation:()=>oi((t=>"paused"===this.getAnimationState(t)&&this.getAxisMotionValue(t).animation?.play()))},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:s,distanceThreshold:n,contextWindow:ai(this.visualElement)})}stop(t,e){const n=t||this.latestPointerEvent,r=e||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!r||!n)return;const{velocity:i}=r;this.startAnimation(i);const{onDragEnd:o}=this.getProps();o&&ft.postRender((()=>o(n,r)))}cancel(){this.isDragging=!1;const{projection:t,animationState:e}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),e&&e.setActive("whileDrag",!1)}updateAxis(t,e,n){const{drag:r}=this.getProps();if(!n||!Si(t,r,this.currentDirection))return;const s=this.getAxisMotionValue(t);let i=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(i=function(t,{min:e,max:n},r){return void 0!==e&&t<e?t=r?k(e,t,r.min):Math.max(t,e):void 0!==n&&t>n&&(t=r?k(n,t,r.max):Math.min(t,n)),t}(i,this.constraints[t],this.elastic[t])),s.set(i)}resolveConstraints(){const{dragConstraints:t,dragElastic:e}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,r=this.constraints;t&&On(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!t||!n)&&function(t,{top:e,left:n,bottom:r,right:s}){return{x:gi(t.x,n,s),y:gi(t.y,e,r)}}(n.layoutBox,t),this.elastic=function(t=vi){return!1===t?t=0:!0===t&&(t=vi),{x:wi(t,"left","right"),y:wi(t,"top","bottom")}}(e),r!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&oi((t=>{!1!==this.constraints&&this.getAxisMotionValue(t)&&(this.constraints[t]=function(t,e){const n={};return void 0!==e.min&&(n.min=e.min-t.min),void 0!==e.max&&(n.max=e.max-t.min),n}(n.layoutBox[t],this.constraints[t]))}))}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:e}=this.getProps();if(!t||!On(t))return!1;const n=t.current;tt(null!==n,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.","drag-constraints-ref");const{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const s=function(t,e,n){const r=U(t,n),{scroll:s}=e;return s&&(M(r.x,s.offset.x),M(r.y,s.offset.y)),r}(n,r.root,this.visualElement.getTransformPagePoint());let i=function(t,e){return{x:yi(t.x,e.x),y:yi(t.y,e.y)}}(r.layout.layoutBox,s);if(e){const t=e(function({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}(i));this.hasMutatedConstraints=!!t,t&&(i=_(t))}return i}startAnimation(t){const{drag:e,dragMomentum:n,dragElastic:r,dragTransition:s,dragSnapToOrigin:i,onDragTransitionEnd:o}=this.getProps(),a=this.constraints||{},c=oi((o=>{if(!Si(o,e,this.currentDirection))return;let c=a&&a[o]||{};i&&(c={min:0,max:0});const l=r?200:1e6,u=r?40:1e7,h={type:"inertia",velocity:n?t[o]:0,bounceStiffness:l,bounceDamping:u,timeConstant:750,restDelta:1,restSpeed:10,...s,...c};return this.startAxisValueAnimation(o,h)}));return Promise.all(c).then(o)}startAxisValueAnimation(t,e){const n=this.getAxisMotionValue(t);return Wn(this.visualElement,t),n.start(xs(t,n,0,e,this.visualElement,!1))}stopAnimation(){oi((t=>this.getAxisMotionValue(t).stop()))}pauseAnimation(){oi((t=>this.getAxisMotionValue(t).animation?.pause()))}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const e=`_drag${t.toUpperCase()}`,n=this.visualElement.getProps(),r=n[e];return r||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){oi((e=>{const{drag:n}=this.getProps();if(!Si(e,n,this.currentDirection))return;const{projection:r}=this.visualElement,s=this.getAxisMotionValue(e);if(r&&r.layout){const{min:n,max:i}=r.layout.layoutBox[e];s.set(t[e]-k(n,i,.5))}}))}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:e}=this.getProps(),{projection:n}=this.visualElement;if(!On(e)||!n||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};oi((t=>{const e=this.getAxisMotionValue(t);if(e&&!1!==this.constraints){const n=e.get();r[t]=function(t,e){let n=.5;const r=ti(t),s=ti(e);return s>r?n=Hr(e.min,e.max-r,t.min):r>s&&(n=Hr(t.min,t.max-s,e.min)),B(0,1,n)}({min:n,max:n},this.constraints[t])}}));const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),oi((e=>{if(!Si(e,t,null))return;const n=this.getAxisMotionValue(e),{min:s,max:i}=this.constraints[e];n.set(k(s,i,r[e]))}))}addListeners(){if(!this.visualElement.current)return;_i.set(this.visualElement,this);const t=Js(this.visualElement.current,"pointerdown",(t=>{const{drag:e,dragListener:n=!0}=this.getProps();e&&n&&this.start(t)})),e=()=>{const{dragConstraints:t}=this.getProps();On(t)&&t.current&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,r=n.addEventListener("measure",e);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),ft.read(e);const s=Hs(window,"resize",(()=>this.scalePositionWithinConstraints())),i=n.addEventListener("didUpdate",(({delta:t,hasLayoutChanged:e})=>{this.isDragging&&e&&(oi((e=>{const n=this.getAxisMotionValue(e);n&&(this.originPoint[e]+=t[e].translate,n.set(n.get()+t[e].translate))})),this.visualElement.render())}));return()=>{s(),t(),r(),i&&i()}}getProps(){const t=this.visualElement.getProps(),{drag:e=!1,dragDirectionLock:n=!1,dragPropagation:r=!1,dragConstraints:s=!1,dragElastic:i=vi,dragMomentum:o=!0}=t;return{...t,drag:e,dragDirectionLock:n,dragPropagation:r,dragConstraints:s,dragElastic:i,dragMomentum:o}}}function Si(t,e,n){return(!0===e||e===t)&&(null===n||n===t)}const Ei=t=>(e,n)=>{t&&ft.postRender((()=>t(e,n)))};var Ti=n(8421);const xi={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Ai(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Ri={correct:(t,e)=>{if(!e.target)return t;if("string"===typeof t){if(!H.test(t))return t;t=parseFloat(t)}return`${Ai(t,e.target.x)}% ${Ai(t,e.target.y)}%`}},Pi={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=Ht.parse(t);if(s.length>5)return r;const i=Ht.createTransformer(t),o="number"!==typeof s[0]?1:0,a=n.x.scale*e.x,c=n.y.scale*e.y;s[0+o]/=a,s[1+o]/=c;const l=k(a,c,.5);return"number"===typeof s[2+o]&&(s[2+o]/=l),"number"===typeof s[3+o]&&(s[3+o]/=l),i(s)}};let Oi=!1;class ji extends r.Component{componentDidMount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:n,layoutId:r}=this.props,{projection:s}=t;!function(t){for(const e in t)Fe[e]=t[e],y(e)&&(Fe[e].isCSSVariable=!0)}(Ii),s&&(e.group&&e.group.add(s),n&&n.register&&r&&n.register(s),Oi&&s.root.didUpdate(),s.addEventListener("animationComplete",(()=>{this.safeToRemove()})),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),xi.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:e,visualElement:n,drag:r,isPresent:s}=this.props,{projection:i}=n;return i?(i.isPresent=s,Oi=!0,r||t.layoutDependency!==e||void 0===e||t.isPresent!==s?i.willUpdate():this.safeToRemove(),t.isPresent!==s&&(s?i.promote():i.relegate()||ft.postRender((()=>{const t=i.getStack();t&&t.members.length||this.safeToRemove()}))),null):null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),ge.postRender((()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()})))}componentWillUnmount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:n}=this.props,{projection:r}=t;Oi=!0,r&&(r.scheduleCheckAfterUnmount(),e&&e.group&&e.group.remove(r),n&&n.deregister&&n.deregister(r))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function Ci(t){const[e,n]=(0,Ti.oO)(),s=(0,r.useContext)(sn.p);return(0,rn.jsx)(ji,{...t,layoutGroup:s,switchLayoutGroup:(0,r.useContext)(In),isPresent:e,safeToRemove:n})}const Ii={borderRadius:{...Ri,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ri,borderTopRightRadius:Ri,borderBottomLeftRadius:Ri,borderBottomRightRadius:Ri,boxShadow:Pi};var Mi=n(8106);function $i(t){return(0,Mi.K)(t)&&"ownerSVGElement"in t}const Li=(t,e)=>t.depth-e.depth;class Ui{constructor(){this.children=[],this.isDirty=!1}add(t){ce(this.children,t),this.isDirty=!0}remove(t){le(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(Li),this.isDirty=!1,this.children.forEach(t)}}function Di(t,e){const n=ae.now(),r=({timestamp:s})=>{const i=s-n;i>=e&&(pt(r),t(i-e))};return ft.setup(r,!0),()=>pt(r)}const Bi=["TopLeft","TopRight","BottomLeft","BottomRight"],Ni=Bi.length,Vi=t=>"string"===typeof t?parseFloat(t):t,Fi=t=>"number"===typeof t||H.test(t);function qi(t,e){return void 0!==t[e]?t[e]:t.borderRadius}const Wi=Hi(0,.5,Vr),zi=Hi(.5,.95,ct);function Hi(t,e,n){return r=>r<t?0:r>e?1:n(Hr(t,e,r))}function Ki(t,e){t.min=e.min,t.max=e.max}function Zi(t,e){Ki(t.x,e.x),Ki(t.y,e.y)}function Ji(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function Gi(t,e,n,r,s){return t=R(t-=e,1/n,r),void 0!==s&&(t=R(t,1/s,r)),t}function Xi(t,e,[n,r,s],i,o){!function(t,e=0,n=1,r=.5,s,i=t,o=t){z.test(e)&&(e=parseFloat(e),e=k(o.min,o.max,e/100)-o.min);if("number"!==typeof e)return;let a=k(i.min,i.max,r);t===i&&(a-=e),t.min=Gi(t.min,e,n,a,s),t.max=Gi(t.max,e,n,a,s)}(t,e[n],e[r],e[s],e.scale,i,o)}const Yi=["x","scaleX","originX"],Qi=["y","scaleY","originY"];function to(t,e,n,r){Xi(t.x,e,Yi,n?n.x:void 0,r?r.x:void 0),Xi(t.y,e,Qi,n?n.y:void 0,r?r.y:void 0)}function eo(t){return 0===t.translate&&1===t.scale}function no(t){return eo(t.x)&&eo(t.y)}function ro(t,e){return t.min===e.min&&t.max===e.max}function so(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function io(t,e){return so(t.x,e.x)&&so(t.y,e.y)}function oo(t){return ti(t.x)/ti(t.y)}function ao(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class co{constructor(){this.members=[]}add(t){ce(this.members,t),t.scheduleRender()}remove(t){if(le(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(t){const e=this.members.findIndex((e=>t===e));if(0===e)return!1;let n;for(let r=e;r>=0;r--){const t=this.members[r];if(!1!==t.isPresent){n=t;break}}return!!n&&(this.promote(n),!0)}promote(t,e){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,e&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:r}=t.options;!1===r&&n.hide()}}exitAnimationComplete(){this.members.forEach((t=>{const{options:e,resumingFrom:n}=t;e.onExitComplete&&e.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()}))}scheduleRender(){this.members.forEach((t=>{t.instance&&t.scheduleRender(!1)}))}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const lo={nodes:0,calculatedTargetDeltas:0,calculatedProjections:0},uo=["","X","Y","Z"];let ho=0;function fo(t,e,n,r){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),r&&(r[t]=0))}function po(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=zn(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:e,layoutId:r}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",ft,!(e||r))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&po(r)}function mo({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(t={},n=e?.()){this.id=ho++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,ht.value&&(lo.nodes=lo.calculatedTargetDeltas=lo.calculatedProjections=0),this.nodes.forEach(vo),this.nodes.forEach(To),this.nodes.forEach(xo),this.nodes.forEach(wo),ht.addProjectionMetrics&&ht.addProjectionMetrics(lo)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=t,this.root=n?n.root||n:this,this.path=n?[...n.path,n]:[],this.parent=n,this.depth=n?n.depth+1:0;for(let e=0;e<this.path.length;e++)this.path[e].shouldResetTransform=!0;this.root===this&&(this.nodes=new Ui)}addEventListener(t,e){return this.eventHandlers.has(t)||this.eventHandlers.set(t,new ue),this.eventHandlers.get(t).add(e)}notifyListeners(t,...e){const n=this.eventHandlers.get(t);n&&n.notify(...e)}hasListeners(t){return this.eventHandlers.has(t)}mount(e){if(this.instance)return;var n;this.isSVG=$i(e)&&!($i(n=e)&&"svg"===n.tagName),this.instance=e;const{layoutId:r,layout:s,visualElement:i}=this.options;if(i&&!i.current&&i.mount(e),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(s||r)&&(this.isLayoutDirty=!0),t){let n,r=0;const s=()=>this.root.updateBlockedByResize=!1;ft.read((()=>{r=window.innerWidth})),t(e,(()=>{const t=window.innerWidth;t!==r&&(r=t,this.root.updateBlockedByResize=!0,n&&n(),n=Di(s,250),xi.hasAnimatedSinceResize&&(xi.hasAnimatedSinceResize=!1,this.nodes.forEach(Eo)))}))}r&&this.root.registerSharedNode(r,this),!1!==this.options.animate&&i&&(r||s)&&this.addEventListener("didUpdate",(({delta:t,hasLayoutChanged:e,hasRelativeLayoutChanged:n,layout:r})=>{if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const s=this.options.transition||i.getDefaultTransition()||Co,{onLayoutAnimationStart:o,onLayoutAnimationComplete:a}=i.getProps(),c=!this.targetLayout||!io(this.targetLayout,r),l=!e&&n;if(this.options.layoutRoot||this.resumeFrom||l||e&&(c||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const e={...Vn(s,"layout"),onPlay:o,onComplete:a};(i.shouldReduceMotion||this.options.layoutRoot)&&(e.delay=0,e.type=!1),this.startAnimation(e),this.setAnimationOrigin(t,l)}else e||Eo(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=r}))}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const t=this.getStack();t&&t.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),pt(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Ao),this.animationId++)}getTransformTemplate(){const{visualElement:t}=this.options;return t&&t.getProps().transformTemplate}willUpdate(t=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&po(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let s=0;s<this.path.length;s++){const t=this.path[s];t.shouldResetTransform=!0,t.updateScroll("snapshot"),t.options.layoutRoot&&t.willUpdate(!1)}const{layoutId:e,layout:n}=this.options;if(void 0===e&&!n)return;const r=this.getTransformTemplate();this.prevTransformTemplateValue=r?r(this.latestValues,""):void 0,this.updateSnapshot(),t&&this.notifyListeners("willUpdate")}update(){this.updateScheduled=!1;if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(_o);if(this.animationId<=this.animationCommitId)return void this.nodes.forEach(ko);this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(So),this.nodes.forEach(go),this.nodes.forEach(yo)):this.nodes.forEach(ko),this.clearAllSnapshots();const t=ae.now();mt.delta=B(0,1e3/60,t-mt.timestamp),mt.timestamp=t,mt.isProcessing=!0,gt.update.process(mt),gt.preRender.process(mt),gt.render.process(mt),mt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,ge.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(bo),this.sharedNodes.forEach(Ro)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ft.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ft.postRender((()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()}))}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure(),!this.snapshot||ti(this.snapshot.measuredBox.x)||ti(this.snapshot.measuredBox.y)||(this.snapshot=void 0))}updateLayout(){if(!this.instance)return;if(this.updateScroll(),(!this.options.alwaysMeasureLayout||!this.isLead())&&!this.isLayoutDirty)return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let n=0;n<this.path.length;n++){this.path[n].updateScroll()}const t=this.layout;this.layout=this.measure(!1),this.layoutCorrected=_e(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:e}=this.options;e&&e.notify("LayoutMeasure",this.layout.layoutBox,t?t.layoutBox:void 0)}updateScroll(t="measure"){let e=Boolean(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===t&&(e=!1),e&&this.instance){const e=r(this.instance);this.scroll={animationId:this.root.animationId,phase:t,isRoot:e,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:e}}}resetTransform(){if(!s)return;const t=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,e=this.projectionDelta&&!no(this.projectionDelta),n=this.getTransformTemplate(),r=n?n(this.latestValues,""):void 0,i=r!==this.prevTransformTemplateValue;t&&this.instance&&(e||T(this.latestValues)||i)&&(s(this.instance,r),this.shouldResetTransform=!1,this.scheduleRender())}measure(t=!0){const e=this.measurePageBox();let n=this.removeElementScroll(e);var r;return t&&(n=this.removeTransform(n)),$o((r=n).x),$o(r.y),{animationId:this.root.animationId,measuredBox:e,layoutBox:n,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:t}=this.options;if(!t)return _e();const e=t.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(Uo))){const{scroll:t}=this.root;t&&(M(e.x,t.offset.x),M(e.y,t.offset.y))}return e}removeElementScroll(t){const e=_e();if(Zi(e,t),this.scroll?.wasRoot)return e;for(let n=0;n<this.path.length;n++){const r=this.path[n],{scroll:s,options:i}=r;r!==this.root&&s&&i.layoutScroll&&(s.wasRoot&&Zi(e,t),M(e.x,s.offset.x),M(e.y,s.offset.y))}return e}applyTransform(t,e=!1){const n=_e();Zi(n,t);for(let r=0;r<this.path.length;r++){const t=this.path[r];!e&&t.options.layoutScroll&&t.scroll&&t!==t.root&&L(n,{x:-t.scroll.offset.x,y:-t.scroll.offset.y}),T(t.latestValues)&&L(n,t.latestValues)}return T(this.latestValues)&&L(n,this.latestValues),n}removeTransform(t){const e=_e();Zi(e,t);for(let n=0;n<this.path.length;n++){const t=this.path[n];if(!t.instance)continue;if(!T(t.latestValues))continue;E(t.latestValues)&&t.updateSnapshot();const r=_e();Zi(r,t.measurePageBox()),to(e,t.latestValues,t.snapshot?t.snapshot.layoutBox:void 0,r)}return T(this.latestValues)&&to(e,this.latestValues),e}setTargetDelta(t){this.targetDelta=t,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(t){this.options={...this.options,...t,crossfade:void 0===t.crossfade||t.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==mt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(t=!1){const e=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=e.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=e.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=e.isSharedProjectionDirty);const n=Boolean(this.resumingFrom)||this!==e;if(!(t||n&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:r,layoutId:s}=this.options;if(this.layout&&(r||s)){if(this.resolvedRelativeTargetAt=mt.timestamp,!this.targetDelta&&!this.relativeTarget){const t=this.getClosestProjectingParent();t&&t.layout&&1!==this.animationProgress?(this.relativeParent=t,this.forceRelativeParentToResolveTarget(),this.relativeTarget=_e(),this.relativeTargetOrigin=_e(),ii(this.relativeTargetOrigin,this.layout.layoutBox,t.layout.layoutBox),Zi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){var i,o,a;if(this.target||(this.target=_e(),this.targetWithTransforms=_e()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),i=this.target,o=this.relativeTarget,a=this.relativeParent.target,ri(i.x,o.x,a.x),ri(i.y,o.y,a.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):Zi(this.target,this.layout.layoutBox),j(this.target,this.targetDelta)):Zi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const t=this.getClosestProjectingParent();t&&Boolean(t.resumingFrom)===Boolean(this.resumingFrom)&&!t.options.layoutScroll&&t.target&&1!==this.animationProgress?(this.relativeParent=t,this.forceRelativeParentToResolveTarget(),this.relativeTarget=_e(),this.relativeTargetOrigin=_e(),ii(this.relativeTargetOrigin,this.target,t.target),Zi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}ht.value&&lo.calculatedTargetDeltas++}}}getClosestProjectingParent(){if(this.parent&&!E(this.parent.latestValues)&&!x(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const t=this.getLead(),e=Boolean(this.resumingFrom)||this!==t;let n=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(n=!1),e&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(n=!1),this.resolvedRelativeTargetAt===mt.timestamp&&(n=!1),n)return;const{layout:r,layoutId:s}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!r&&!s)return;Zi(this.layoutCorrected,this.layout.layoutBox);const i=this.treeScale.x,o=this.treeScale.y;!function(t,e,n,r=!1){const s=n.length;if(!s)return;let i,o;e.x=e.y=1;for(let a=0;a<s;a++){i=n[a],o=i.projectionDelta;const{visualElement:s}=i.options;s&&s.props.style&&"contents"===s.props.style.display||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&L(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,j(t,o)),r&&T(i.latestValues)&&L(t,i.latestValues))}e.x<I&&e.x>C&&(e.x=1),e.y<I&&e.y>C&&(e.y=1)}(this.layoutCorrected,this.treeScale,this.path,e),!t.layout||t.target||1===this.treeScale.x&&1===this.treeScale.y||(t.target=t.layout.layoutBox,t.targetWithTransforms=_e());const{target:a}=t;a?(this.projectionDelta&&this.prevProjectionDelta?(Ji(this.prevProjectionDelta.x,this.projectionDelta.x),Ji(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),ni(this.projectionDelta,this.layoutCorrected,a,this.latestValues),this.treeScale.x===i&&this.treeScale.y===o&&ao(this.projectionDelta.x,this.prevProjectionDelta.x)&&ao(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",a)),ht.value&&lo.calculatedProjections++):this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender())}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(t=!0){if(this.options.visualElement?.scheduleRender(),t){const t=this.getStack();t&&t.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=be(),this.projectionDelta=be(),this.projectionDeltaWithTransform=be()}setAnimationOrigin(t,e=!1){const n=this.snapshot,r=n?n.latestValues:{},s={...this.latestValues},i=be();this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!e;const o=_e(),a=(n?n.source:void 0)!==(this.layout?this.layout.source:void 0),c=this.getStack(),l=!c||c.members.length<=1,u=Boolean(a&&!l&&!0===this.options.crossfade&&!this.path.some(jo));let h;this.animationProgress=0,this.mixTargetDelta=e=>{const n=e/1e3;var c,d,f,p;Po(i.x,t.x,n),Po(i.y,t.y,n),this.setTargetDelta(i),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ii(o,this.layout.layoutBox,this.relativeParent.layout.layoutBox),c=this.relativeTarget,d=this.relativeTargetOrigin,f=o,p=n,Oo(c.x,d.x,f.x,p),Oo(c.y,d.y,f.y,p),h&&function(t,e){return ro(t.x,e.x)&&ro(t.y,e.y)}(this.relativeTarget,h)&&(this.isProjectionDirty=!1),h||(h=_e()),Zi(h,this.relativeTarget)),a&&(this.animationValues=s,function(t,e,n,r,s,i){s?(t.opacity=k(0,n.opacity??1,Wi(r)),t.opacityExit=k(e.opacity??1,0,zi(r))):i&&(t.opacity=k(e.opacity??1,n.opacity??1,r));for(let o=0;o<Ni;o++){const s=`border${Bi[o]}Radius`;let i=qi(e,s),a=qi(n,s);void 0===i&&void 0===a||(i||(i=0),a||(a=0),0===i||0===a||Fi(i)===Fi(a)?(t[s]=Math.max(k(Vi(i),Vi(a),r),0),(z.test(a)||z.test(i))&&(t[s]+="%")):t[s]=a)}(e.rotate||n.rotate)&&(t.rotate=k(e.rotate||0,n.rotate||0,r))}(s,r,this.latestValues,n,u,l)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=n},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(t){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(pt(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ft.update((()=>{xi.hasAnimatedSinceResize=!0,Xn.layout++,this.motionValue||(this.motionValue=pe(0)),this.currentAnimation=function(t,e,n){const r=se(t)?t:pe(t);return r.start(xs("",r,e,n)),r.animation}(this.motionValue,[0,1e3],{...t,velocity:0,isSync:!0,onUpdate:e=>{this.mixTargetDelta(e),t.onUpdate&&t.onUpdate(e)},onStop:()=>{Xn.layout--},onComplete:()=>{Xn.layout--,t.onComplete&&t.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0}))}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const t=this.getStack();t&&t.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const t=this.getLead();let{targetWithTransforms:e,target:n,layout:r,latestValues:s}=t;if(e&&n&&r){if(this!==t&&this.layout&&r&&Lo(this.options.animationType,this.layout.layoutBox,r.layoutBox)){n=this.target||_e();const e=ti(this.layout.layoutBox.x);n.x.min=t.target.x.min,n.x.max=n.x.min+e;const r=ti(this.layout.layoutBox.y);n.y.min=t.target.y.min,n.y.max=n.y.min+r}Zi(e,n),L(e,s),ni(this.projectionDeltaWithTransform,this.layoutCorrected,e,s)}}registerSharedNode(t,e){this.sharedNodes.has(t)||this.sharedNodes.set(t,new co);this.sharedNodes.get(t).add(e);const n=e.options.initialPromotionConfig;e.promote({transition:n?n.transition:void 0,preserveFollowOpacity:n&&n.shouldPreserveFollowOpacity?n.shouldPreserveFollowOpacity(e):void 0})}isLead(){const t=this.getStack();return!t||t.lead===this}getLead(){const{layoutId:t}=this.options;return t&&this.getStack()?.lead||this}getPrevLead(){const{layoutId:t}=this.options;return t?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:t}=this.options;if(t)return this.root.sharedNodes.get(t)}promote({needsReset:t,transition:e,preserveFollowOpacity:n}={}){const r=this.getStack();r&&r.promote(this,n),t&&(this.projectionDelta=void 0,this.needsReset=!0),e&&this.setOptions({transition:e})}relegate(){const t=this.getStack();return!!t&&t.relegate(this)}resetSkewAndRotation(){const{visualElement:t}=this.options;if(!t)return;let e=!1;const{latestValues:n}=t;if((n.z||n.rotate||n.rotateX||n.rotateY||n.rotateZ||n.skewX||n.skewY)&&(e=!0),!e)return;const r={};n.z&&fo("z",t,r,this.animationValues);for(let s=0;s<uo.length;s++)fo(`rotate${uo[s]}`,t,r,this.animationValues),fo(`skew${uo[s]}`,t,r,this.animationValues);t.render();for(const s in r)t.setStaticValue(s,r[s]),this.animationValues&&(this.animationValues[s]=r[s]);t.scheduleRender()}applyProjectionStyles(t,e){if(!this.instance||this.isSVG)return;if(!this.isVisible)return void(t.visibility="hidden");const n=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,t.visibility="",t.opacity="",t.pointerEvents=En(e?.pointerEvents)||"",void(t.transform=n?n(this.latestValues,""):"none");const r=this.getLead();if(!this.projectionDelta||!this.layout||!r.target)return this.options.layoutId&&(t.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,t.pointerEvents=En(e?.pointerEvents)||""),void(this.hasProjected&&!T(this.latestValues)&&(t.transform=n?n({},""):"none",this.hasProjected=!1));t.visibility="";const s=r.animationValues||r.latestValues;this.applyTransformsToTarget();let i=function(t,e,n){let r="";const s=t.x.translate/e.x,i=t.y.translate/e.y,o=n?.z||0;if((s||i||o)&&(r=`translate3d(${s}px, ${i}px, ${o}px) `),1===e.x&&1===e.y||(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:t,rotate:e,rotateX:s,rotateY:i,skewX:o,skewY:a}=n;t&&(r=`perspective(${t}px) ${r}`),e&&(r+=`rotate(${e}deg) `),s&&(r+=`rotateX(${s}deg) `),i&&(r+=`rotateY(${i}deg) `),o&&(r+=`skewX(${o}deg) `),a&&(r+=`skewY(${a}deg) `)}const a=t.x.scale*e.x,c=t.y.scale*e.y;return 1===a&&1===c||(r+=`scale(${a}, ${c})`),r||"none"}(this.projectionDeltaWithTransform,this.treeScale,s);n&&(i=n(s,i)),t.transform=i;const{x:o,y:a}=this.projectionDelta;t.transformOrigin=`${100*o.origin}% ${100*a.origin}% 0`,r.animationValues?t.opacity=r===this?s.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:s.opacityExit:t.opacity=r===this?void 0!==s.opacity?s.opacity:"":void 0!==s.opacityExit?s.opacityExit:0;for(const c in Fe){if(void 0===s[c])continue;const{correct:e,applyTo:n,isCSSVariable:o}=Fe[c],a="none"===i?s[c]:e(s[c],r);if(n){const e=n.length;for(let r=0;r<e;r++)t[n[r]]=a}else o?this.options.visualElement.renderState.vars[c]=a:t[c]=a}this.options.layoutId&&(t.pointerEvents=r===this?En(e?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach((t=>t.currentAnimation?.stop())),this.root.nodes.forEach(_o),this.root.sharedNodes.clear()}}}function go(t){t.updateLayout()}function yo(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=t.layout,{animationType:s}=t.options,i=e.source!==t.layout.source;"size"===s?oi((t=>{const r=i?e.measuredBox[t]:e.layoutBox[t],s=ti(r);r.min=n[t].min,r.max=r.min+s})):Lo(s,e.layoutBox,n)&&oi((r=>{const s=i?e.measuredBox[r]:e.layoutBox[r],o=ti(n[r]);s.max=s.min+o,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[r].max=t.relativeTarget[r].min+o)}));const o=be();ni(o,n,e.layoutBox);const a=be();i?ni(a,t.applyTransform(r,!0),e.measuredBox):ni(a,n,e.layoutBox);const c=!no(o);let l=!1;if(!t.resumeFrom){const r=t.getClosestProjectingParent();if(r&&!r.resumeFrom){const{snapshot:s,layout:i}=r;if(s&&i){const o=_e();ii(o,e.layoutBox,s.layoutBox);const a=_e();ii(a,n,i.layoutBox),io(o,a)||(l=!0),r.options.layoutRoot&&(t.relativeTarget=a,t.relativeTargetOrigin=o,t.relativeParent=r)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:a,layoutDelta:o,hasLayoutChanged:c,hasRelativeLayoutChanged:l})}else if(t.isLead()){const{onExitComplete:e}=t.options;e&&e()}t.options.transition=void 0}function vo(t){ht.value&&lo.nodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=Boolean(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function wo(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function bo(t){t.clearSnapshot()}function _o(t){t.clearMeasurements()}function ko(t){t.isLayoutDirty=!1}function So(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Eo(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function To(t){t.resolveTargetDelta()}function xo(t){t.calcProjection()}function Ao(t){t.resetSkewAndRotation()}function Ro(t){t.removeLeadSnapshot()}function Po(t,e,n){t.translate=k(e.translate,0,n),t.scale=k(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function Oo(t,e,n,r){t.min=k(e.min,n.min,r),t.max=k(e.max,n.max,r)}function jo(t){return t.animationValues&&void 0!==t.animationValues.opacityExit}const Co={duration:.45,ease:[.4,0,.1,1]},Io=t=>"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Mo=Io("applewebkit/")&&!Io("chrome/")?Math.round:ct;function $o(t){t.min=Mo(t.min),t.max=Mo(t.max)}function Lo(t,e,n){return"position"===t||"preserve-aspect"===t&&(r=oo(e),s=oo(n),i=.2,!(Math.abs(r-s)<=i));var r,s,i}function Uo(t){return t!==t.root&&t.scroll?.wasRoot}const Do=mo({attachResizeListener:(t,e)=>Hs(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Bo={current:void 0},No=mo({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Bo.current){const t=new Do({});t.mount(window),t.setOptions({layoutScroll:!0}),Bo.current=t}return Bo.current},resetTransform:(t,e)=>{t.style.transform=void 0!==e?e:"none"},checkIsScrollRoot:t=>Boolean("fixed"===window.getComputedStyle(t).position)}),Vo={pan:{Feature:class extends Vs{constructor(){super(...arguments),this.removePointerDownListener=ct}onPointerDown(t){this.session=new li(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:ai(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:e,onPan:n,onPanEnd:r}=this.node.getProps();return{onSessionStart:Ei(t),onStart:Ei(e),onMove:n,onEnd:(t,e)=>{delete this.session,r&&ft.postRender((()=>r(t,e)))}}}mount(){this.removePointerDownListener=Js(this.node.current,"pointerdown",(t=>this.onPointerDown(t)))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends Vs{constructor(t){super(t),this.removeGroupControls=ct,this.removeListeners=ct,this.controls=new ki(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ct}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:No,MeasureLayout:Ci}};function Fo(t,e){const n=function(t,e,n){if(t instanceof EventTarget)return[t];if("string"===typeof t){let r=document;e&&(r=e.current);const s=n?.[t]??r.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}(t),r=new AbortController;return[n,{passive:!0,...e,signal:r.signal},()=>r.abort()]}function qo(t){return!("touch"===t.pointerType||zs())}function Wo(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover","Start"===n);const s=r["onHover"+n];s&&ft.postRender((()=>s(e,Zs(e))))}var zo=n(2258);const Ho=(t,e)=>!!e&&(t===e||Ho(t,e.parentElement)),Ko=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);const Zo=new WeakSet;function Jo(t){return e=>{"Enter"===e.key&&t(e)}}function Go(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}function Xo(t){return Ks(t)&&!zs()}function Yo(t,e,n={}){const[r,s,i]=Fo(t,n),o=t=>{const r=t.currentTarget;if(!Xo(t))return;Zo.add(r);const i=e(r,t),o=(t,e)=>{window.removeEventListener("pointerup",a),window.removeEventListener("pointercancel",c),Zo.has(r)&&Zo.delete(r),Xo(t)&&"function"===typeof i&&i(t,{success:e})},a=t=>{o(t,r===window||r===document||n.useGlobalTarget||Ho(r,t.target))},c=t=>{o(t,!1)};window.addEventListener("pointerup",a,s),window.addEventListener("pointercancel",c,s)};return r.forEach((t=>{var e;(n.useGlobalTarget?window:t).addEventListener("pointerdown",o,s),(0,zo.R)(t)&&(t.addEventListener("focus",(t=>((t,e)=>{const n=t.currentTarget;if(!n)return;const r=Jo((()=>{if(Zo.has(n))return;Go(n,"down");const t=Jo((()=>{Go(n,"up")}));n.addEventListener("keyup",t,e),n.addEventListener("blur",(()=>Go(n,"cancel")),e)}));n.addEventListener("keydown",r,e),n.addEventListener("blur",(()=>n.removeEventListener("keydown",r)),e)})(t,s))),e=t,Ko.has(e.tagName)||-1!==e.tabIndex||t.hasAttribute("tabindex")||(t.tabIndex=0))})),i}function Qo(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap","Start"===n);const s=r["onTap"+("End"===n?"":n)];s&&ft.postRender((()=>s(e,Zs(e))))}const ta=new WeakMap,ea=new WeakMap,na=t=>{const e=ta.get(t.target);e&&e(t)},ra=t=>{t.forEach(na)};function sa(t,e,n){const r=function({root:t,...e}){const n=t||document;ea.has(n)||ea.set(n,{});const r=ea.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(ra,{root:t,...e})),r[s]}(e);return ta.set(t,n),r.observe(t),()=>{ta.delete(t),r.unobserve(t)}}const ia={some:0,all:1};const oa={inView:{Feature:class extends Vs{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:e,margin:n,amount:r="some",once:s}=t,i={root:e?e.current:void 0,rootMargin:n,threshold:"number"===typeof r?r:ia[r]};return sa(this.node.current,i,(t=>{const{isIntersecting:e}=t;if(this.isInView===e)return;if(this.isInView=e,s&&!e&&this.hasEnteredView)return;e&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",e);const{onViewportEnter:n,onViewportLeave:r}=this.node.getProps(),i=e?n:r;i&&i(t)}))}mount(){this.startObserver()}update(){if("undefined"===typeof IntersectionObserver)return;const{props:t,prevProps:e}=this.node;["amount","margin","root"].some(function({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}(t,e))&&this.startObserver()}unmount(){}}},tap:{Feature:class extends Vs{mount(){const{current:t}=this.node;t&&(this.unmount=Yo(t,((t,e)=>(Qo(this.node,e,"Start"),(t,{success:e})=>Qo(this.node,t,e?"End":"Cancel"))),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}},focus:{Feature:class extends Vs{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch(e){t=!0}t&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Zn(Hs(this.node.current,"focus",(()=>this.onFocus())),Hs(this.node.current,"blur",(()=>this.onBlur())))}unmount(){}}},hover:{Feature:class extends Vs{mount(){const{current:t}=this.node;t&&(this.unmount=function(t,e,n={}){const[r,s,i]=Fo(t,n),o=t=>{if(!qo(t))return;const{target:n}=t,r=e(n,t);if("function"!==typeof r||!n)return;const i=t=>{qo(t)&&(r(t),n.removeEventListener("pointerleave",i))};n.addEventListener("pointerleave",i,s)};return r.forEach((t=>{t.addEventListener("pointerenter",o,s)})),i}(t,((t,e)=>(Wo(this.node,e,"Start"),t=>Wo(this.node,t,"End")))))}unmount(){}}}},aa=Bn({...qs,...oa,...Vo,...{layout:{ProjectionNode:No,MeasureLayout:Ci}}},nn)},952:function(t,e,n){"use strict";n.d(e,{j:function(){return r}});const r="undefined"!==typeof window},2368:function(t,e,n){"use strict";n.d(e,{h:function(){return s}});var r=n(2265);function s(t){const e=(0,r.useRef)(null);return null===e.current&&(e.current=t()),e.current}},7164:function(t,e,n){"use strict";n.d(e,{L:function(){return s}});var r=n(2265);const s=n(952).j?r.useLayoutEffect:r.useEffect},2258:function(t,e,n){"use strict";n.d(e,{R:function(){return s}});var r=n(8106);function s(t){return(0,r.K)(t)&&"offsetHeight"in t}},8106:function(t,e,n){"use strict";function r(t){return"object"===typeof t&&null!==t}n.d(e,{K:function(){return r}})},5498:function(t,e,n){"use strict";function r(t,e,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(t,n):s?s.value=n:e.set(t,n),n}function s(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)}n.d(e,{ZP:function(){return We}});let i=function(){const{crypto:t}=globalThis;if(t?.randomUUID)return i=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>255*Math.random()&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,(t=>(+t^n()&15>>+t/4).toString(16)))};function o(t){return"object"===typeof t&&null!==t&&("name"in t&&"AbortError"===t.name||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const a=t=>{if(t instanceof Error)return t;if("object"===typeof t&&null!==t){try{if("[object Error]"===Object.prototype.toString.call(t)){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};class c extends Error{}class l extends c{constructor(t,e,n,r){super(`${l.makeMessage(t,e,n)}`),this.status=t,this.headers=r,this.requestID=r?.get("request-id"),this.error=e}static makeMessage(t,e,n){const r=e?.message?"string"===typeof e.message?e.message:JSON.stringify(e.message):e?JSON.stringify(e):n;return t&&r?`${t} ${r}`:t?`${t} status code (no body)`:r||"(no status code or body)"}static generate(t,e,n,r){if(!t||!r)return new h({message:n,cause:a(e)});const s=e;return 400===t?new f(t,s,n,r):401===t?new p(t,s,n,r):403===t?new m(t,s,n,r):404===t?new g(t,s,n,r):409===t?new y(t,s,n,r):422===t?new v(t,s,n,r):429===t?new w(t,s,n,r):t>=500?new b(t,s,n,r):new l(t,s,n,r)}}class u extends l{constructor({message:t}={}){super(void 0,void 0,t||"Request was aborted.",void 0)}}class h extends l{constructor({message:t,cause:e}){super(void 0,void 0,t||"Connection error.",void 0),e&&(this.cause=e)}}class d extends h{constructor({message:t}={}){super({message:t??"Request timed out."})}}class f extends l{}class p extends l{}class m extends l{}class g extends l{}class y extends l{}class v extends l{}class w extends l{}class b extends l{}const _=/^[a-z][a-z0-9+.-]*:/i;let k=t=>(k=Array.isArray,k(t)),S=k;function E(t){return"object"!==typeof t?{}:t??{}}const T=t=>{try{return JSON.parse(t)}catch(e){return}},x="0.61.0";const A=()=>{const t="undefined"!==typeof Deno&&null!=Deno.build?"deno":"undefined"!==typeof EdgeRuntime?"edge":"[object process]"===Object.prototype.toString.call("undefined"!==typeof globalThis.process?globalThis.process:0)?"node":"unknown";if("deno"===t)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":x,"X-Stainless-OS":P(Deno.build.os),"X-Stainless-Arch":R(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":"string"===typeof Deno.version?Deno.version:Deno.version?.deno??"unknown"};if("undefined"!==typeof EdgeRuntime)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":x,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if("node"===t)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":x,"X-Stainless-OS":P(globalThis.process.platform??"unknown"),"X-Stainless-Arch":R(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const e=function(){if("undefined"===typeof navigator||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const t=n.exec(navigator.userAgent);if(t){return{browser:e,version:`${t[1]||0}.${t[2]||0}.${t[3]||0}`}}}return null}();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":x,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":x,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};const R=t=>"x32"===t?"x32":"x86_64"===t||"x64"===t?"x64":"arm"===t?"arm":"aarch64"===t||"arm64"===t?"arm64":t?`other:${t}`:"unknown",P=t=>(t=t.toLowerCase()).includes("ios")?"iOS":"android"===t?"Android":"darwin"===t?"MacOS":"win32"===t?"Windows":"freebsd"===t?"FreeBSD":"openbsd"===t?"OpenBSD":"linux"===t?"Linux":t?`Other:${t}`:"Unknown";let O;function j(...t){const e=globalThis.ReadableStream;if("undefined"===typeof e)throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function C(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return j({start(){},async pull(t){const{done:n,value:r}=await e.next();n?t.close():t.enqueue(r)},async cancel(){await(e.return?.())}})}function I(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const t=await e.read();return t?.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}const M=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});let $,L;function U(t){let e;return($??(e=new globalThis.TextEncoder,$=e.encode.bind(e)))(t)}function D(t){let e;return(L??(e=new globalThis.TextDecoder,L=e.decode.bind(e)))(t)}var B,N;class V{constructor(){B.set(this,void 0),N.set(this,void 0),r(this,B,new Uint8Array,"f"),r(this,N,null,"f")}decode(t){if(null==t)return[];const e=t instanceof ArrayBuffer?new Uint8Array(t):"string"===typeof t?U(t):t;r(this,B,function(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}([s(this,B,"f"),e]),"f");const n=[];let i;for(;null!=(i=F(s(this,B,"f"),s(this,N,"f")));){if(i.carriage&&null==s(this,N,"f")){r(this,N,i.index,"f");continue}if(null!=s(this,N,"f")&&(i.index!==s(this,N,"f")+1||i.carriage)){n.push(D(s(this,B,"f").subarray(0,s(this,N,"f")-1))),r(this,B,s(this,B,"f").subarray(s(this,N,"f")),"f"),r(this,N,null,"f");continue}const t=null!==s(this,N,"f")?i.preceding-1:i.preceding,e=D(s(this,B,"f").subarray(0,t));n.push(e),r(this,B,s(this,B,"f").subarray(i.index),"f"),r(this,N,null,"f")}return n}flush(){return s(this,B,"f").length?this.decode("\n"):[]}}function F(t,e){for(let n=e??0;n<t.length;n++){if(10===t[n])return{preceding:n,index:n+1,carriage:!1};if(13===t[n])return{preceding:n,index:n+1,carriage:!0}}return null}function q(t){for(let e=0;e<t.length-1;e++){if(10===t[e]&&10===t[e+1])return e+2;if(13===t[e]&&13===t[e+1])return e+2;if(13===t[e]&&10===t[e+1]&&e+3<t.length&&13===t[e+2]&&10===t[e+3])return e+4}return-1}B=new WeakMap,N=new WeakMap,V.NEWLINE_CHARS=new Set(["\n","\r"]),V.NEWLINE_REGEXP=/\r\n|[\n\r]/g;const W={off:0,error:200,warn:300,info:400,debug:500},z=(t,e,n)=>{var r,s;if(t)return r=W,s=t,Object.prototype.hasOwnProperty.call(r,s)?t:void G(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(W))}`)};function H(){}function K(t,e,n){return!e||W[t]>W[n]?H:e[t].bind(e)}const Z={error:H,warn:H,info:H,debug:H};let J=new WeakMap;function G(t){const e=t.logger,n=t.logLevel??"off";if(!e)return Z;const r=J.get(e);if(r&&r[0]===n)return r[1];const s={error:K("error",e,n),warn:K("warn",e,n),info:K("info",e,n),debug:K("debug",e,n)};return J.set(e,[n,s]),s}const X=t=>(t.options&&(t.options={...t.options},delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map((([t,e])=>[t,"x-api-key"===t.toLowerCase()||"authorization"===t.toLowerCase()||"cookie"===t.toLowerCase()||"set-cookie"===t.toLowerCase()?"***":e])))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);var Y,Q,tt;class et{constructor(t,e,n){this.iterator=t,Y.set(this,void 0),this.controller=e,r(this,Y,n,"f")}static fromSSEResponse(t,e,n){let r=!1;const s=n?G(n):console;return new et((async function*(){if(r)throw new c("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let n=!1;try{for await(const n of async function*(t,e){if(!t.body){if(e.abort(),"undefined"!==typeof globalThis.navigator&&"ReactNative"===globalThis.navigator.product)throw new c("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api");throw new c("Attempted to iterate over a response with no body")}const n=new nt,r=new V,s=I(t.body);for await(const i of async function*(t){let e=new Uint8Array;for await(const n of t){if(null==n)continue;const t=n instanceof ArrayBuffer?new Uint8Array(n):"string"===typeof n?U(n):n;let r,s=new Uint8Array(e.length+t.length);for(s.set(e),s.set(t,e.length),e=s;-1!==(r=q(e));)yield e.slice(0,r),e=e.slice(r)}e.length>0&&(yield e)}(s))for(const t of r.decode(i)){const e=n.decode(t);e&&(yield e)}for(const i of r.flush()){const t=n.decode(i);t&&(yield t)}}(t,e)){if("completion"===n.event)try{yield JSON.parse(n.data)}catch(i){throw s.error("Could not parse message into JSON:",n.data),s.error("From chunk:",n.raw),i}if("message_start"===n.event||"message_delta"===n.event||"message_stop"===n.event||"content_block_start"===n.event||"content_block_delta"===n.event||"content_block_stop"===n.event)try{yield JSON.parse(n.data)}catch(i){throw s.error("Could not parse message into JSON:",n.data),s.error("From chunk:",n.raw),i}if("ping"!==n.event&&"error"===n.event)throw new l(void 0,T(n.data)??n.data,void 0,t.headers)}n=!0}catch(i){if(o(i))return;throw i}finally{n||e.abort()}}),e,n)}static fromReadableStream(t,e,n){let r=!1;return new et((async function*(){if(r)throw new c("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let n=!1;try{for await(const e of async function*(){const e=new V,n=I(t);for await(const t of n)for(const n of e.decode(t))yield n;for(const t of e.flush())yield t}())n||e&&(yield JSON.parse(e));n=!0}catch(s){if(o(s))return;throw s}finally{n||e.abort()}}),e,n)}[(Y=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const t=[],e=[],n=this.iterator(),r=r=>({next:()=>{if(0===r.length){const r=n.next();t.push(r),e.push(r)}return r.shift()}});return[new et((()=>r(t)),this.controller,s(this,Y,"f")),new et((()=>r(e)),this.controller,s(this,Y,"f"))]}toReadableStream(){const t=this;let e;return j({async start(){e=t[Symbol.asyncIterator]()},async pull(t){try{const{value:n,done:r}=await e.next();if(r)return t.close();const s=U(JSON.stringify(n)+"\n");t.enqueue(s)}catch(n){t.error(n)}},async cancel(){await(e.return?.())}})}}class nt{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(t){if(t.endsWith("\r")&&(t=t.substring(0,t.length-1)),!t){if(!this.event&&!this.data.length)return null;const t={event:this.event,data:this.data.join("\n"),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],t}if(this.chunks.push(t),t.startsWith(":"))return null;let[e,n,r]=function(t,e){const n=t.indexOf(e);if(-1!==n)return[t.substring(0,n),e,t.substring(n+e.length)];return[t,"",""]}(t,":");return r.startsWith(" ")&&(r=r.substring(1)),"event"===e?this.event=r:"data"===e&&this.data.push(r),null}}async function rt(t,e){const{response:n,requestLogID:r,retryOfRequestLogID:s,startTime:i}=e,o=await(async()=>{if(e.options.stream)return G(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller):et.fromSSEResponse(n,e.controller);if(204===n.status)return null;if(e.options.__binaryResponse)return n;const r=n.headers.get("content-type"),s=r?.split(";")[0]?.trim();if(s?.includes("application/json")||s?.endsWith("+json")){return st(await n.json(),n)}return await n.text()})();return G(t).debug(`[${r}] response parsed`,X({retryOfRequestLogID:s,url:n.url,status:n.status,body:o,durationMs:Date.now()-i})),o}function st(t,e){return!t||"object"!==typeof t||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("request-id"),enumerable:!1})}class it extends Promise{constructor(t,e,n=rt){super((t=>{t(null)})),this.responsePromise=e,this.parseResponse=n,Q.set(this,void 0),r(this,Q,t,"f")}_thenUnwrap(t){return new it(s(this,Q,"f"),this.responsePromise,(async(e,n)=>st(t(await this.parseResponse(e,n),n),n.response)))}asResponse(){return this.responsePromise.then((t=>t.response))}async withResponse(){const[t,e]=await Promise.all([this.parse(),this.asResponse()]);return{data:t,response:e,request_id:e.headers.get("request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then((t=>this.parseResponse(s(this,Q,"f"),t)))),this.parsedPromise}then(t,e){return this.parse().then(t,e)}catch(t){return this.parse().catch(t)}finally(t){return this.parse().finally(t)}}Q=new WeakMap;class ot{constructor(t,e,n,s){tt.set(this,void 0),r(this,tt,t,"f"),this.options=s,this.response=e,this.body=n}hasNextPage(){return!!this.getPaginatedItems().length&&null!=this.nextPageRequestOptions()}async getNextPage(){const t=this.nextPageRequestOptions();if(!t)throw new c("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await s(this,tt,"f").requestAPIList(this.constructor,t)}async*iterPages(){let t=this;for(yield t;t.hasNextPage();)t=await t.getNextPage(),yield t}async*[(tt=new WeakMap,Symbol.asyncIterator)](){for await(const t of this.iterPages())for(const e of t.getPaginatedItems())yield e}}class at extends it{constructor(t,e,n){super(t,e,(async(t,e)=>new n(t,e.response,await rt(t,e),e.options)))}async*[Symbol.asyncIterator](){const t=await(this);for await(const e of t)yield e}}class ct extends ot{constructor(t,e,n,r){super(t,e,n,r),this.data=n.data||[],this.has_more=n.has_more||!1,this.first_id=n.first_id||null,this.last_id=n.last_id||null}getPaginatedItems(){return this.data??[]}hasNextPage(){return!1!==this.has_more&&super.hasNextPage()}nextPageRequestOptions(){if(this.options.query?.before_id){const t=this.first_id;return t?{...this.options,query:{...E(this.options.query),before_id:t}}:null}const t=this.last_id;return t?{...this.options,query:{...E(this.options.query),after_id:t}}:null}}const lt=()=>{if("undefined"===typeof File){const{process:t}=globalThis,e="string"===typeof t?.versions?.node&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(e?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function ut(t,e,n){return lt(),new File(t,e??"unknown_file",n)}function ht(t){return("object"===typeof t&&null!==t&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const dt=t=>null!=t&&"object"===typeof t&&"function"===typeof t[Symbol.asyncIterator],ft=new WeakMap;const pt=async(t,e)=>{if(!(await function(t){const e="function"===typeof t?t:t.fetch,n=ft.get(e);if(n)return n;const r=(async()=>{try{const t="Response"in e?e.Response:(await e("data:,")).constructor,n=new FormData;return n.toString()!==await new t(n).text()}catch{return!0}})();return ft.set(e,r),r}(e)))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const n=new FormData;return await Promise.all(Object.entries(t||{}).map((([t,e])=>gt(n,t,e)))),n},mt=t=>t instanceof Blob&&"name"in t,gt=async(t,e,n)=>{if(void 0!==n){if(null==n)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if("string"===typeof n||"number"===typeof n||"boolean"===typeof n)t.append(e,String(n));else if(n instanceof Response){let r={};const s=n.headers.get("Content-Type");s&&(r={type:s}),t.append(e,ut([await n.blob()],ht(n),r))}else if(dt(n))t.append(e,ut([await new Response(C(n)).blob()],ht(n)));else if(mt(n))t.append(e,ut([n],ht(n),{type:n.type}));else if(Array.isArray(n))await Promise.all(n.map((n=>gt(t,e+"[]",n))));else{if("object"!==typeof n)throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`);await Promise.all(Object.entries(n).map((([n,r])=>gt(t,`${e}[${n}]`,r))))}}},yt=t=>null!=t&&"object"===typeof t&&"number"===typeof t.size&&"string"===typeof t.type&&"function"===typeof t.text&&"function"===typeof t.slice&&"function"===typeof t.arrayBuffer;async function vt(t){let e=[];if("string"===typeof t||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(yt(t))e.push(t instanceof Blob?t:await t.arrayBuffer());else{if(!dt(t)){const e=t?.constructor?.name;throw new Error(`Unexpected data type: ${typeof t}${e?`; constructor: ${e}`:""}${function(t){if("object"!==typeof t||null===t)return"";const e=Object.getOwnPropertyNames(t);return`; props: [${e.map((t=>`"${t}"`)).join(", ")}]`}(t)}`)}for await(const n of t)e.push(...await vt(n))}return e}class wt{constructor(t){this._client=t}}const bt=Symbol.for("brand.privateNullableHeaders");function*_t(t){if(!t)return;if(bt in t){const{values:e,nulls:n}=t;yield*e.entries();for(const t of n)yield[t,null];return}let e,n=!1;t instanceof Headers?e=t.entries():S(t)?e=t:(n=!0,e=Object.entries(t??{}));for(let r of e){const t=r[0];if("string"!==typeof t)throw new TypeError("expected header name to be a string");const e=S(r[1])?r[1]:[r[1]];let s=!1;for(const r of e)void 0!==r&&(n&&!s&&(s=!0,yield[t,null]),yield[t,r])}}const kt=t=>{const e=new Headers,n=new Set;for(const r of t){const t=new Set;for(const[s,i]of _t(r)){const r=s.toLowerCase();t.has(r)||(e.delete(s),t.add(r)),null===i?(e.delete(s),n.add(r)):(e.append(s,i),n.delete(r))}}return{[bt]:!0,values:e,nulls:n}};function St(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Et=Object.freeze(Object.create(null)),Tt=(t=St)=>function(e,...n){if(1===e.length)return e[0];let r=!1;const s=[],i=e.reduce(((e,i,o)=>{/[?#]/.test(i)&&(r=!0);const a=n[o];let c=(r?encodeURIComponent:t)(""+a);return o!==n.length&&(null==a||"object"===typeof a&&a.toString===Object.getPrototypeOf(Object.getPrototypeOf(a.hasOwnProperty??Et)??Et)?.toString)&&(c=a+"",s.push({start:e.length+i.length,length:c.length,error:`Value of type ${Object.prototype.toString.call(a).slice(8,-1)} is not a valid path parameter`})),e+i+(o===n.length?"":c)}),""),o=i.split(/[?#]/,1)[0],a=/(?<=^|\/)(?:\.|%2e){1,2}(?=\/|$)/gi;let l;for(;null!==(l=a.exec(o));)s.push({start:l.index,length:l[0].length,error:`Value "${l[0]}" can't be safely passed as a path parameter`});if(s.sort(((t,e)=>t.start-e.start)),s.length>0){let t=0;const e=s.reduce(((e,n)=>{const r=" ".repeat(n.start-t),s="^".repeat(n.length);return t=n.start+n.length,e+r+s}),"");throw new c(`Path parameters result in path with invalid segments:\n${s.map((t=>t.error)).join("\n")}\n${i}\n${e}`)}return i},xt=Tt(St);class At extends wt{list(t={},e){const{betas:n,...r}=t??{};return this._client.getAPIList("/v1/files",ct,{query:r,...e,headers:kt([{"anthropic-beta":[...n??[],"files-api-2025-04-14"].toString()},e?.headers])})}delete(t,e={},n){const{betas:r}=e??{};return this._client.delete(xt`/v1/files/${t}`,{...n,headers:kt([{"anthropic-beta":[...r??[],"files-api-2025-04-14"].toString()},n?.headers])})}download(t,e={},n){const{betas:r}=e??{};return this._client.get(xt`/v1/files/${t}/content`,{...n,headers:kt([{"anthropic-beta":[...r??[],"files-api-2025-04-14"].toString(),Accept:"application/binary"},n?.headers]),__binaryResponse:!0})}retrieveMetadata(t,e={},n){const{betas:r}=e??{};return this._client.get(xt`/v1/files/${t}`,{...n,headers:kt([{"anthropic-beta":[...r??[],"files-api-2025-04-14"].toString()},n?.headers])})}upload(t,e){const{betas:n,...r}=t;return this._client.post("/v1/files",(async(t,e)=>({...t,body:await pt(t.body,e)}))({body:r,...e,headers:kt([{"anthropic-beta":[...n??[],"files-api-2025-04-14"].toString()},e?.headers])},this._client))}}class Rt extends wt{retrieve(t,e={},n){const{betas:r}=e??{};return this._client.get(xt`/v1/models/${t}?beta=true`,{...n,headers:kt([{...null!=r?.toString()?{"anthropic-beta":r?.toString()}:void 0},n?.headers])})}list(t={},e){const{betas:n,...r}=t??{};return this._client.getAPIList("/v1/models?beta=true",ct,{query:r,...e,headers:kt([{...null!=n?.toString()?{"anthropic-beta":n?.toString()}:void 0},e?.headers])})}}class Pt{constructor(t,e){this.iterator=t,this.controller=e}async*decoder(){const t=new V;for await(const e of this.iterator)for(const n of t.decode(e))yield JSON.parse(n);for(const e of t.flush())yield JSON.parse(e)}[Symbol.asyncIterator](){return this.decoder()}static fromResponse(t,e){if(!t.body){if(e.abort(),"undefined"!==typeof globalThis.navigator&&"ReactNative"===globalThis.navigator.product)throw new c("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api");throw new c("Attempted to iterate over a response with no body")}return new Pt(I(t.body),e)}}class Ot extends wt{create(t,e){const{betas:n,...r}=t;return this._client.post("/v1/messages/batches?beta=true",{body:r,...e,headers:kt([{"anthropic-beta":[...n??[],"message-batches-2024-09-24"].toString()},e?.headers])})}retrieve(t,e={},n){const{betas:r}=e??{};return this._client.get(xt`/v1/messages/batches/${t}?beta=true`,{...n,headers:kt([{"anthropic-beta":[...r??[],"message-batches-2024-09-24"].toString()},n?.headers])})}list(t={},e){const{betas:n,...r}=t??{};return this._client.getAPIList("/v1/messages/batches?beta=true",ct,{query:r,...e,headers:kt([{"anthropic-beta":[...n??[],"message-batches-2024-09-24"].toString()},e?.headers])})}delete(t,e={},n){const{betas:r}=e??{};return this._client.delete(xt`/v1/messages/batches/${t}?beta=true`,{...n,headers:kt([{"anthropic-beta":[...r??[],"message-batches-2024-09-24"].toString()},n?.headers])})}cancel(t,e={},n){const{betas:r}=e??{};return this._client.post(xt`/v1/messages/batches/${t}/cancel?beta=true`,{...n,headers:kt([{"anthropic-beta":[...r??[],"message-batches-2024-09-24"].toString()},n?.headers])})}async results(t,e={},n){const r=await this.retrieve(t);if(!r.results_url)throw new c(`No batch \`results_url\`; Has it finished processing? ${r.processing_status} - ${r.id}`);const{betas:s}=e??{};return this._client.get(r.results_url,{...n,headers:kt([{"anthropic-beta":[...s??[],"message-batches-2024-09-24"].toString(),Accept:"application/binary"},n?.headers]),stream:!0,__binaryResponse:!0})._thenUnwrap(((t,e)=>Pt.fromResponse(e.response,e.controller)))}}const jt=t=>{if(0===t.length)return t;let e=t[t.length-1];switch(e.type){case"separator":return t=t.slice(0,t.length-1),jt(t);case"number":let n=e.value[e.value.length-1];if("."===n||"-"===n)return t=t.slice(0,t.length-1),jt(t);case"string":let r=t[t.length-2];if("delimiter"===r?.type)return t=t.slice(0,t.length-1),jt(t);if("brace"===r?.type&&"{"===r.value)return t=t.slice(0,t.length-1),jt(t);break;case"delimiter":return t=t.slice(0,t.length-1),jt(t)}return t},Ct=t=>JSON.parse((t=>{let e="";return t.map((t=>{"string"===t.type?e+='"'+t.value+'"':e+=t.value})),e})((t=>{let e=[];return t.map((t=>{"brace"===t.type&&("{"===t.value?e.push("}"):e.splice(e.lastIndexOf("}"),1)),"paren"===t.type&&("["===t.value?e.push("]"):e.splice(e.lastIndexOf("]"),1))})),e.length>0&&e.reverse().map((e=>{"}"===e?t.push({type:"brace",value:"}"}):"]"===e&&t.push({type:"paren",value:"]"})})),t})(jt((t=>{let e=0,n=[];for(;e<t.length;){let r=t[e];if("\\"===r){e++;continue}if("{"===r){n.push({type:"brace",value:"{"}),e++;continue}if("}"===r){n.push({type:"brace",value:"}"}),e++;continue}if("["===r){n.push({type:"paren",value:"["}),e++;continue}if("]"===r){n.push({type:"paren",value:"]"}),e++;continue}if(":"===r){n.push({type:"separator",value:":"}),e++;continue}if(","===r){n.push({type:"delimiter",value:","}),e++;continue}if('"'===r){let s="",i=!1;for(r=t[++e];'"'!==r;){if(e===t.length){i=!0;break}if("\\"===r){if(e++,e===t.length){i=!0;break}s+=r+t[e],r=t[++e]}else s+=r,r=t[++e]}r=t[++e],i||n.push({type:"string",value:s});continue}if(r&&/\s/.test(r)){e++;continue}let s=/[0-9]/;if(r&&s.test(r)||"-"===r||"."===r){let i="";for("-"===r&&(i+=r,r=t[++e]);r&&s.test(r)||"."===r;)i+=r,r=t[++e];n.push({type:"number",value:i});continue}let i=/[a-z]/i;if(r&&i.test(r)){let s="";for(;r&&i.test(r)&&e!==t.length;)s+=r,r=t[++e];if("true"!=s&&"false"!=s&&"null"!==s){e++;continue}n.push({type:"name",value:s})}else e++}return n})(t)))));var It,Mt,$t,Lt,Ut,Dt,Bt,Nt,Vt,Ft,qt,Wt,zt,Ht,Kt,Zt,Jt,Gt,Xt,Yt,Qt,te;const ee="__json_buf";function ne(t){return"tool_use"===t.type||"server_tool_use"===t.type||"mcp_tool_use"===t.type}class re{constructor(){It.add(this),this.messages=[],this.receivedMessages=[],Mt.set(this,void 0),this.controller=new AbortController,$t.set(this,void 0),Lt.set(this,(()=>{})),Ut.set(this,(()=>{})),Dt.set(this,void 0),Bt.set(this,(()=>{})),Nt.set(this,(()=>{})),Vt.set(this,{}),Ft.set(this,!1),qt.set(this,!1),Wt.set(this,!1),zt.set(this,!1),Ht.set(this,void 0),Kt.set(this,void 0),Gt.set(this,(t=>{if(r(this,qt,!0,"f"),o(t)&&(t=new u),t instanceof u)return r(this,Wt,!0,"f"),this._emit("abort",t);if(t instanceof c)return this._emit("error",t);if(t instanceof Error){const e=new c(t.message);return e.cause=t,this._emit("error",e)}return this._emit("error",new c(String(t)))})),r(this,$t,new Promise(((t,e)=>{r(this,Lt,t,"f"),r(this,Ut,e,"f")})),"f"),r(this,Dt,new Promise(((t,e)=>{r(this,Bt,t,"f"),r(this,Nt,e,"f")})),"f"),s(this,$t,"f").catch((()=>{})),s(this,Dt,"f").catch((()=>{}))}get response(){return s(this,Ht,"f")}get request_id(){return s(this,Kt,"f")}async withResponse(){const t=await s(this,$t,"f");if(!t)throw new Error("Could not resolve a `Response` object");return{data:this,response:t,request_id:t.headers.get("request-id")}}static fromReadableStream(t){const e=new re;return e._run((()=>e._fromReadableStream(t))),e}static createMessage(t,e,n){const r=new re;for(const s of e.messages)r._addMessageParam(s);return r._run((()=>r._createMessage(t,{...e,stream:!0},{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"stream"}}))),r}_run(t){t().then((()=>{this._emitFinal(),this._emit("end")}),s(this,Gt,"f"))}_addMessageParam(t){this.messages.push(t)}_addMessage(t,e=!0){this.receivedMessages.push(t),e&&this._emit("message",t)}async _createMessage(t,e,n){const r=n?.signal;let i;r&&(r.aborted&&this.controller.abort(),i=this.controller.abort.bind(this.controller),r.addEventListener("abort",i));try{s(this,It,"m",Xt).call(this);const{response:r,data:i}=await t.create({...e,stream:!0},{...n,signal:this.controller.signal}).withResponse();this._connected(r);for await(const t of i)s(this,It,"m",Yt).call(this,t);if(i.controller.signal?.aborted)throw new u;s(this,It,"m",Qt).call(this)}finally{r&&i&&r.removeEventListener("abort",i)}}_connected(t){this.ended||(r(this,Ht,t,"f"),r(this,Kt,t?.headers.get("request-id"),"f"),s(this,Lt,"f").call(this,t),this._emit("connect"))}get ended(){return s(this,Ft,"f")}get errored(){return s(this,qt,"f")}get aborted(){return s(this,Wt,"f")}abort(){this.controller.abort()}on(t,e){return(s(this,Vt,"f")[t]||(s(this,Vt,"f")[t]=[])).push({listener:e}),this}off(t,e){const n=s(this,Vt,"f")[t];if(!n)return this;const r=n.findIndex((t=>t.listener===e));return r>=0&&n.splice(r,1),this}once(t,e){return(s(this,Vt,"f")[t]||(s(this,Vt,"f")[t]=[])).push({listener:e,once:!0}),this}emitted(t){return new Promise(((e,n)=>{r(this,zt,!0,"f"),"error"!==t&&this.once("error",n),this.once(t,e)}))}async done(){r(this,zt,!0,"f"),await s(this,Dt,"f")}get currentMessage(){return s(this,Mt,"f")}async finalMessage(){return await this.done(),s(this,It,"m",Zt).call(this)}async finalText(){return await this.done(),s(this,It,"m",Jt).call(this)}_emit(t,...e){if(s(this,Ft,"f"))return;"end"===t&&(r(this,Ft,!0,"f"),s(this,Bt,"f").call(this));const n=s(this,Vt,"f")[t];if(n&&(s(this,Vt,"f")[t]=n.filter((t=>!t.once)),n.forEach((({listener:t})=>t(...e)))),"abort"===t){const t=e[0];return s(this,zt,"f")||n?.length||Promise.reject(t),s(this,Ut,"f").call(this,t),s(this,Nt,"f").call(this,t),void this._emit("end")}if("error"===t){const t=e[0];s(this,zt,"f")||n?.length||Promise.reject(t),s(this,Ut,"f").call(this,t),s(this,Nt,"f").call(this,t),this._emit("end")}}_emitFinal(){this.receivedMessages.at(-1)&&this._emit("finalMessage",s(this,It,"m",Zt).call(this))}async _fromReadableStream(t,e){const n=e?.signal;let r;n&&(n.aborted&&this.controller.abort(),r=this.controller.abort.bind(this.controller),n.addEventListener("abort",r));try{s(this,It,"m",Xt).call(this),this._connected(null);const e=et.fromReadableStream(t,this.controller);for await(const t of e)s(this,It,"m",Yt).call(this,t);if(e.controller.signal?.aborted)throw new u;s(this,It,"m",Qt).call(this)}finally{n&&r&&n.removeEventListener("abort",r)}}[(Mt=new WeakMap,$t=new WeakMap,Lt=new WeakMap,Ut=new WeakMap,Dt=new WeakMap,Bt=new WeakMap,Nt=new WeakMap,Vt=new WeakMap,Ft=new WeakMap,qt=new WeakMap,Wt=new WeakMap,zt=new WeakMap,Ht=new WeakMap,Kt=new WeakMap,Gt=new WeakMap,It=new WeakSet,Zt=function(){if(0===this.receivedMessages.length)throw new c("stream ended without producing a Message with role=assistant");return this.receivedMessages.at(-1)},Jt=function(){if(0===this.receivedMessages.length)throw new c("stream ended without producing a Message with role=assistant");const t=this.receivedMessages.at(-1).content.filter((t=>"text"===t.type)).map((t=>t.text));if(0===t.length)throw new c("stream ended without producing a content block with type=text");return t.join(" ")},Xt=function(){this.ended||r(this,Mt,void 0,"f")},Yt=function(t){if(this.ended)return;const e=s(this,It,"m",te).call(this,t);switch(this._emit("streamEvent",t,e),t.type){case"content_block_delta":{const n=e.content.at(-1);switch(t.delta.type){case"text_delta":"text"===n.type&&this._emit("text",t.delta.text,n.text||"");break;case"citations_delta":"text"===n.type&&this._emit("citation",t.delta.citation,n.citations??[]);break;case"input_json_delta":ne(n)&&n.input&&this._emit("inputJson",t.delta.partial_json,n.input);break;case"thinking_delta":"thinking"===n.type&&this._emit("thinking",t.delta.thinking,n.thinking);break;case"signature_delta":"thinking"===n.type&&this._emit("signature",n.signature);break;default:t.delta}break}case"message_stop":this._addMessageParam(e),this._addMessage(e,!0);break;case"content_block_stop":this._emit("contentBlock",e.content.at(-1));break;case"message_start":r(this,Mt,e,"f")}},Qt=function(){if(this.ended)throw new c("stream has ended, this shouldn't happen");const t=s(this,Mt,"f");if(!t)throw new c("request ended without sending any chunks");return r(this,Mt,void 0,"f"),t},te=function(t){let e=s(this,Mt,"f");if("message_start"===t.type){if(e)throw new c(`Unexpected event order, got ${t.type} before receiving "message_stop"`);return t.message}if(!e)throw new c(`Unexpected event order, got ${t.type} before "message_start"`);switch(t.type){case"message_stop":case"content_block_stop":return e;case"message_delta":return e.container=t.delta.container,e.stop_reason=t.delta.stop_reason,e.stop_sequence=t.delta.stop_sequence,e.usage.output_tokens=t.usage.output_tokens,null!=t.usage.input_tokens&&(e.usage.input_tokens=t.usage.input_tokens),null!=t.usage.cache_creation_input_tokens&&(e.usage.cache_creation_input_tokens=t.usage.cache_creation_input_tokens),null!=t.usage.cache_read_input_tokens&&(e.usage.cache_read_input_tokens=t.usage.cache_read_input_tokens),null!=t.usage.server_tool_use&&(e.usage.server_tool_use=t.usage.server_tool_use),e;case"content_block_start":return e.content.push(t.content_block),e;case"content_block_delta":{const r=e.content.at(t.index);switch(t.delta.type){case"text_delta":"text"===r?.type&&(e.content[t.index]={...r,text:(r.text||"")+t.delta.text});break;case"citations_delta":"text"===r?.type&&(e.content[t.index]={...r,citations:[...r.citations??[],t.delta.citation]});break;case"input_json_delta":if(r&&ne(r)){let i=r[ee]||"";i+=t.delta.partial_json;const o={...r};if(Object.defineProperty(o,ee,{value:i,enumerable:!1,writable:!0}),i)try{o.input=Ct(i)}catch(n){const t=new c(`Unable to parse tool parameter JSON from model. Please retry your request or adjust your prompt. Error: ${n}. JSON: ${i}`);s(this,Gt,"f").call(this,t)}e.content[t.index]=o}break;case"thinking_delta":"thinking"===r?.type&&(e.content[t.index]={...r,thinking:r.thinking+t.delta.thinking});break;case"signature_delta":"thinking"===r?.type&&(e.content[t.index]={...r,signature:t.delta.signature});break;default:t.delta}return e}}},Symbol.asyncIterator)](){const t=[],e=[];let n=!1;return this.on("streamEvent",(n=>{const r=e.shift();r?r.resolve(n):t.push(n)})),this.on("end",(()=>{n=!0;for(const t of e)t.resolve(void 0);e.length=0})),this.on("abort",(t=>{n=!0;for(const n of e)n.reject(t);e.length=0})),this.on("error",(t=>{n=!0;for(const n of e)n.reject(t);e.length=0})),{next:async()=>{if(!t.length)return n?{value:void 0,done:!0}:new Promise(((t,n)=>e.push({resolve:t,reject:n}))).then((t=>t?{value:t,done:!1}:{value:void 0,done:!0}));return{value:t.shift(),done:!1}},return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new et(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}const se={"claude-opus-4-20250514":8192,"claude-opus-4-0":8192,"claude-4-opus-20250514":8192,"anthropic.claude-opus-4-20250514-v1:0":8192,"claude-opus-4@20250514":8192,"claude-opus-4-1-20250805":8192,"anthropic.claude-opus-4-1-20250805-v1:0":8192,"claude-opus-4-1@20250805":8192},ie={"claude-1.3":"November 6th, 2024","claude-1.3-100k":"November 6th, 2024","claude-instant-1.1":"November 6th, 2024","claude-instant-1.1-100k":"November 6th, 2024","claude-instant-1.2":"November 6th, 2024","claude-3-sonnet-20240229":"July 21st, 2025","claude-3-opus-20240229":"January 5th, 2026","claude-2.1":"July 21st, 2025","claude-2.0":"July 21st, 2025","claude-3-5-sonnet-20241022":"October 22, 2025","claude-3-5-sonnet-20240620":"October 22, 2025"};class oe extends wt{constructor(){super(...arguments),this.batches=new Ot(this._client)}create(t,e){const{betas:n,...r}=t;r.model in ie&&console.warn(`The model '${r.model}' is deprecated and will reach end-of-life on ${ie[r.model]}\nPlease migrate to a newer model. Visit https://docs.anthropic.com/en/docs/resources/model-deprecations for more information.`);let s=this._client._options.timeout;if(!r.stream&&null==s){const t=se[r.model]??void 0;s=this._client.calculateNonstreamingTimeout(r.max_tokens,t)}return this._client.post("/v1/messages?beta=true",{body:r,timeout:s??6e5,...e,headers:kt([{...null!=n?.toString()?{"anthropic-beta":n?.toString()}:void 0},e?.headers]),stream:t.stream??!1})}stream(t,e){return re.createMessage(this,t,e)}countTokens(t,e){const{betas:n,...r}=t;return this._client.post("/v1/messages/count_tokens?beta=true",{body:r,...e,headers:kt([{"anthropic-beta":[...n??[],"token-counting-2024-11-01"].toString()},e?.headers])})}}oe.Batches=Ot;class ae extends wt{constructor(){super(...arguments),this.models=new Rt(this._client),this.messages=new oe(this._client),this.files=new At(this._client)}}ae.Models=Rt,ae.Messages=oe,ae.Files=At;class ce extends wt{create(t,e){const{betas:n,...r}=t;return this._client.post("/v1/complete",{body:r,timeout:this._client._options.timeout??6e5,...e,headers:kt([{...null!=n?.toString()?{"anthropic-beta":n?.toString()}:void 0},e?.headers]),stream:t.stream??!1})}}var le,ue,he,de,fe,pe,me,ge,ye,ve,we,be,_e,ke,Se,Ee,Te,xe,Ae,Re,Pe,Oe;const je="__json_buf";function Ce(t){return"tool_use"===t.type||"server_tool_use"===t.type}class Ie{constructor(){le.add(this),this.messages=[],this.receivedMessages=[],ue.set(this,void 0),this.controller=new AbortController,he.set(this,void 0),de.set(this,(()=>{})),fe.set(this,(()=>{})),pe.set(this,void 0),me.set(this,(()=>{})),ge.set(this,(()=>{})),ye.set(this,{}),ve.set(this,!1),we.set(this,!1),be.set(this,!1),_e.set(this,!1),ke.set(this,void 0),Se.set(this,void 0),xe.set(this,(t=>{if(r(this,we,!0,"f"),o(t)&&(t=new u),t instanceof u)return r(this,be,!0,"f"),this._emit("abort",t);if(t instanceof c)return this._emit("error",t);if(t instanceof Error){const e=new c(t.message);return e.cause=t,this._emit("error",e)}return this._emit("error",new c(String(t)))})),r(this,he,new Promise(((t,e)=>{r(this,de,t,"f"),r(this,fe,e,"f")})),"f"),r(this,pe,new Promise(((t,e)=>{r(this,me,t,"f"),r(this,ge,e,"f")})),"f"),s(this,he,"f").catch((()=>{})),s(this,pe,"f").catch((()=>{}))}get response(){return s(this,ke,"f")}get request_id(){return s(this,Se,"f")}async withResponse(){const t=await s(this,he,"f");if(!t)throw new Error("Could not resolve a `Response` object");return{data:this,response:t,request_id:t.headers.get("request-id")}}static fromReadableStream(t){const e=new Ie;return e._run((()=>e._fromReadableStream(t))),e}static createMessage(t,e,n){const r=new Ie;for(const s of e.messages)r._addMessageParam(s);return r._run((()=>r._createMessage(t,{...e,stream:!0},{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"stream"}}))),r}_run(t){t().then((()=>{this._emitFinal(),this._emit("end")}),s(this,xe,"f"))}_addMessageParam(t){this.messages.push(t)}_addMessage(t,e=!0){this.receivedMessages.push(t),e&&this._emit("message",t)}async _createMessage(t,e,n){const r=n?.signal;let i;r&&(r.aborted&&this.controller.abort(),i=this.controller.abort.bind(this.controller),r.addEventListener("abort",i));try{s(this,le,"m",Ae).call(this);const{response:r,data:i}=await t.create({...e,stream:!0},{...n,signal:this.controller.signal}).withResponse();this._connected(r);for await(const t of i)s(this,le,"m",Re).call(this,t);if(i.controller.signal?.aborted)throw new u;s(this,le,"m",Pe).call(this)}finally{r&&i&&r.removeEventListener("abort",i)}}_connected(t){this.ended||(r(this,ke,t,"f"),r(this,Se,t?.headers.get("request-id"),"f"),s(this,de,"f").call(this,t),this._emit("connect"))}get ended(){return s(this,ve,"f")}get errored(){return s(this,we,"f")}get aborted(){return s(this,be,"f")}abort(){this.controller.abort()}on(t,e){return(s(this,ye,"f")[t]||(s(this,ye,"f")[t]=[])).push({listener:e}),this}off(t,e){const n=s(this,ye,"f")[t];if(!n)return this;const r=n.findIndex((t=>t.listener===e));return r>=0&&n.splice(r,1),this}once(t,e){return(s(this,ye,"f")[t]||(s(this,ye,"f")[t]=[])).push({listener:e,once:!0}),this}emitted(t){return new Promise(((e,n)=>{r(this,_e,!0,"f"),"error"!==t&&this.once("error",n),this.once(t,e)}))}async done(){r(this,_e,!0,"f"),await s(this,pe,"f")}get currentMessage(){return s(this,ue,"f")}async finalMessage(){return await this.done(),s(this,le,"m",Ee).call(this)}async finalText(){return await this.done(),s(this,le,"m",Te).call(this)}_emit(t,...e){if(s(this,ve,"f"))return;"end"===t&&(r(this,ve,!0,"f"),s(this,me,"f").call(this));const n=s(this,ye,"f")[t];if(n&&(s(this,ye,"f")[t]=n.filter((t=>!t.once)),n.forEach((({listener:t})=>t(...e)))),"abort"===t){const t=e[0];return s(this,_e,"f")||n?.length||Promise.reject(t),s(this,fe,"f").call(this,t),s(this,ge,"f").call(this,t),void this._emit("end")}if("error"===t){const t=e[0];s(this,_e,"f")||n?.length||Promise.reject(t),s(this,fe,"f").call(this,t),s(this,ge,"f").call(this,t),this._emit("end")}}_emitFinal(){this.receivedMessages.at(-1)&&this._emit("finalMessage",s(this,le,"m",Ee).call(this))}async _fromReadableStream(t,e){const n=e?.signal;let r;n&&(n.aborted&&this.controller.abort(),r=this.controller.abort.bind(this.controller),n.addEventListener("abort",r));try{s(this,le,"m",Ae).call(this),this._connected(null);const e=et.fromReadableStream(t,this.controller);for await(const t of e)s(this,le,"m",Re).call(this,t);if(e.controller.signal?.aborted)throw new u;s(this,le,"m",Pe).call(this)}finally{n&&r&&n.removeEventListener("abort",r)}}[(ue=new WeakMap,he=new WeakMap,de=new WeakMap,fe=new WeakMap,pe=new WeakMap,me=new WeakMap,ge=new WeakMap,ye=new WeakMap,ve=new WeakMap,we=new WeakMap,be=new WeakMap,_e=new WeakMap,ke=new WeakMap,Se=new WeakMap,xe=new WeakMap,le=new WeakSet,Ee=function(){if(0===this.receivedMessages.length)throw new c("stream ended without producing a Message with role=assistant");return this.receivedMessages.at(-1)},Te=function(){if(0===this.receivedMessages.length)throw new c("stream ended without producing a Message with role=assistant");const t=this.receivedMessages.at(-1).content.filter((t=>"text"===t.type)).map((t=>t.text));if(0===t.length)throw new c("stream ended without producing a content block with type=text");return t.join(" ")},Ae=function(){this.ended||r(this,ue,void 0,"f")},Re=function(t){if(this.ended)return;const e=s(this,le,"m",Oe).call(this,t);switch(this._emit("streamEvent",t,e),t.type){case"content_block_delta":{const n=e.content.at(-1);switch(t.delta.type){case"text_delta":"text"===n.type&&this._emit("text",t.delta.text,n.text||"");break;case"citations_delta":"text"===n.type&&this._emit("citation",t.delta.citation,n.citations??[]);break;case"input_json_delta":Ce(n)&&n.input&&this._emit("inputJson",t.delta.partial_json,n.input);break;case"thinking_delta":"thinking"===n.type&&this._emit("thinking",t.delta.thinking,n.thinking);break;case"signature_delta":"thinking"===n.type&&this._emit("signature",n.signature);break;default:t.delta}break}case"message_stop":this._addMessageParam(e),this._addMessage(e,!0);break;case"content_block_stop":this._emit("contentBlock",e.content.at(-1));break;case"message_start":r(this,ue,e,"f")}},Pe=function(){if(this.ended)throw new c("stream has ended, this shouldn't happen");const t=s(this,ue,"f");if(!t)throw new c("request ended without sending any chunks");return r(this,ue,void 0,"f"),t},Oe=function(t){let e=s(this,ue,"f");if("message_start"===t.type){if(e)throw new c(`Unexpected event order, got ${t.type} before receiving "message_stop"`);return t.message}if(!e)throw new c(`Unexpected event order, got ${t.type} before "message_start"`);switch(t.type){case"message_stop":case"content_block_stop":return e;case"message_delta":return e.stop_reason=t.delta.stop_reason,e.stop_sequence=t.delta.stop_sequence,e.usage.output_tokens=t.usage.output_tokens,null!=t.usage.input_tokens&&(e.usage.input_tokens=t.usage.input_tokens),null!=t.usage.cache_creation_input_tokens&&(e.usage.cache_creation_input_tokens=t.usage.cache_creation_input_tokens),null!=t.usage.cache_read_input_tokens&&(e.usage.cache_read_input_tokens=t.usage.cache_read_input_tokens),null!=t.usage.server_tool_use&&(e.usage.server_tool_use=t.usage.server_tool_use),e;case"content_block_start":return e.content.push({...t.content_block}),e;case"content_block_delta":{const n=e.content.at(t.index);switch(t.delta.type){case"text_delta":"text"===n?.type&&(e.content[t.index]={...n,text:(n.text||"")+t.delta.text});break;case"citations_delta":"text"===n?.type&&(e.content[t.index]={...n,citations:[...n.citations??[],t.delta.citation]});break;case"input_json_delta":if(n&&Ce(n)){let r=n[je]||"";r+=t.delta.partial_json;const s={...n};Object.defineProperty(s,je,{value:r,enumerable:!1,writable:!0}),r&&(s.input=Ct(r)),e.content[t.index]=s}break;case"thinking_delta":"thinking"===n?.type&&(e.content[t.index]={...n,thinking:n.thinking+t.delta.thinking});break;case"signature_delta":"thinking"===n?.type&&(e.content[t.index]={...n,signature:t.delta.signature});break;default:t.delta}return e}}},Symbol.asyncIterator)](){const t=[],e=[];let n=!1;return this.on("streamEvent",(n=>{const r=e.shift();r?r.resolve(n):t.push(n)})),this.on("end",(()=>{n=!0;for(const t of e)t.resolve(void 0);e.length=0})),this.on("abort",(t=>{n=!0;for(const n of e)n.reject(t);e.length=0})),this.on("error",(t=>{n=!0;for(const n of e)n.reject(t);e.length=0})),{next:async()=>{if(!t.length)return n?{value:void 0,done:!0}:new Promise(((t,n)=>e.push({resolve:t,reject:n}))).then((t=>t?{value:t,done:!1}:{value:void 0,done:!0}));return{value:t.shift(),done:!1}},return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new et(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}class Me extends wt{create(t,e){return this._client.post("/v1/messages/batches",{body:t,...e})}retrieve(t,e){return this._client.get(xt`/v1/messages/batches/${t}`,e)}list(t={},e){return this._client.getAPIList("/v1/messages/batches",ct,{query:t,...e})}delete(t,e){return this._client.delete(xt`/v1/messages/batches/${t}`,e)}cancel(t,e){return this._client.post(xt`/v1/messages/batches/${t}/cancel`,e)}async results(t,e){const n=await this.retrieve(t);if(!n.results_url)throw new c(`No batch \`results_url\`; Has it finished processing? ${n.processing_status} - ${n.id}`);return this._client.get(n.results_url,{...e,headers:kt([{Accept:"application/binary"},e?.headers]),stream:!0,__binaryResponse:!0})._thenUnwrap(((t,e)=>Pt.fromResponse(e.response,e.controller)))}}class $e extends wt{constructor(){super(...arguments),this.batches=new Me(this._client)}create(t,e){t.model in Le&&console.warn(`The model '${t.model}' is deprecated and will reach end-of-life on ${Le[t.model]}\nPlease migrate to a newer model. Visit https://docs.anthropic.com/en/docs/resources/model-deprecations for more information.`);let n=this._client._options.timeout;if(!t.stream&&null==n){const e=se[t.model]??void 0;n=this._client.calculateNonstreamingTimeout(t.max_tokens,e)}return this._client.post("/v1/messages",{body:t,timeout:n??6e5,...e,stream:t.stream??!1})}stream(t,e){return Ie.createMessage(this,t,e)}countTokens(t,e){return this._client.post("/v1/messages/count_tokens",{body:t,...e})}}const Le={"claude-1.3":"November 6th, 2024","claude-1.3-100k":"November 6th, 2024","claude-instant-1.1":"November 6th, 2024","claude-instant-1.1-100k":"November 6th, 2024","claude-instant-1.2":"November 6th, 2024","claude-3-sonnet-20240229":"July 21st, 2025","claude-3-opus-20240229":"January 5th, 2026","claude-2.1":"July 21st, 2025","claude-2.0":"July 21st, 2025","claude-3-5-sonnet-20241022":"October 22, 2025","claude-3-5-sonnet-20240620":"October 22, 2025"};$e.Batches=Me;class Ue extends wt{retrieve(t,e={},n){const{betas:r}=e??{};return this._client.get(xt`/v1/models/${t}`,{...n,headers:kt([{...null!=r?.toString()?{"anthropic-beta":r?.toString()}:void 0},n?.headers])})}list(t={},e){const{betas:n,...r}=t??{};return this._client.getAPIList("/v1/models",ct,{query:r,...e,headers:kt([{...null!=n?.toString()?{"anthropic-beta":n?.toString()}:void 0},e?.headers])})}}const De=t=>"undefined"!==typeof globalThis.process?globalThis.process.env?.[t]?.trim()??void 0:"undefined"!==typeof globalThis.Deno?globalThis.Deno.env?.get?.(t)?.trim():void 0;var Be,Ne,Ve,Fe;class qe{constructor({baseURL:t=De("ANTHROPIC_BASE_URL"),apiKey:e=De("ANTHROPIC_API_KEY")??null,authToken:n=De("ANTHROPIC_AUTH_TOKEN")??null,...s}={}){Be.add(this),Ve.set(this,void 0);const i={apiKey:e,authToken:n,...s,baseURL:t||"https://api.anthropic.com"};if(!i.dangerouslyAllowBrowser&&"undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof navigator)throw new c("It looks like you're running in a browser-like environment.\n\nThis is disabled by default, as it risks exposing your secret API credentials to attackers.\nIf you understand the risks and have appropriate mitigations in place,\nyou can set the `dangerouslyAllowBrowser` option to `true`, e.g.,\n\nnew Anthropic({ apiKey, dangerouslyAllowBrowser: true });\n");this.baseURL=i.baseURL,this.timeout=i.timeout??Ne.DEFAULT_TIMEOUT,this.logger=i.logger??console;const o="warn";this.logLevel=o,this.logLevel=z(i.logLevel,"ClientOptions.logLevel",this)??z(De("ANTHROPIC_LOG"),"process.env['ANTHROPIC_LOG']",this)??o,this.fetchOptions=i.fetchOptions,this.maxRetries=i.maxRetries??2,this.fetch=i.fetch??function(){if("undefined"!==typeof fetch)return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new Anthropic({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}(),r(this,Ve,M,"f"),this._options=i,this.apiKey=e,this.authToken=n}withOptions(t){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,authToken:this.authToken,...t})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:t,nulls:e}){if((!this.apiKey||!t.get("x-api-key"))&&!e.has("x-api-key")&&(!this.authToken||!t.get("authorization"))&&!e.has("authorization"))throw new Error('Could not resolve authentication method. Expected either apiKey or authToken to be set. Or for one of the "X-Api-Key" or "Authorization" headers to be explicitly omitted')}async authHeaders(t){return kt([await this.apiKeyAuth(t),await this.bearerAuth(t)])}async apiKeyAuth(t){if(null!=this.apiKey)return kt([{"X-Api-Key":this.apiKey}])}async bearerAuth(t){if(null!=this.authToken)return kt([{Authorization:`Bearer ${this.authToken}`}])}stringifyQuery(t){return Object.entries(t).filter((([t,e])=>"undefined"!==typeof e)).map((([t,e])=>{if("string"===typeof e||"number"===typeof e||"boolean"===typeof e)return`${encodeURIComponent(t)}=${encodeURIComponent(e)}`;if(null===e)return`${encodeURIComponent(t)}=`;throw new c(`Cannot stringify type ${typeof e}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)})).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${x}`}defaultIdempotencyKey(){return`stainless-node-retry-${i()}`}makeStatusError(t,e,n,r){return l.generate(t,e,n,r)}buildURL(t,e,n){const r=!s(this,Be,"m",Fe).call(this)&&n||this.baseURL,i=(t=>_.test(t))(t)?new URL(t):new URL(r+(r.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),o=this.defaultQuery();return function(t){if(!t)return!0;for(const e in t)return!1;return!0}(o)||(e={...o,...e}),"object"===typeof e&&e&&!Array.isArray(e)&&(i.search=this.stringifyQuery(e)),i.toString()}_calculateNonstreamingTimeout(t){if(3600*t/128e3>600)throw new c("Streaming is required for operations that may take longer than 10 minutes. See https://github.com/anthropics/anthropic-sdk-typescript#streaming-responses for more details");return 6e5}async prepareOptions(t){}async prepareRequest(t,{url:e,options:n}){}get(t,e){return this.methodRequest("get",t,e)}post(t,e){return this.methodRequest("post",t,e)}patch(t,e){return this.methodRequest("patch",t,e)}put(t,e){return this.methodRequest("put",t,e)}delete(t,e){return this.methodRequest("delete",t,e)}methodRequest(t,e,n){return this.request(Promise.resolve(n).then((n=>({method:t,path:e,...n}))))}request(t,e=null){return new it(this,this.makeRequest(t,e,void 0))}async makeRequest(t,e,n){const r=await t,s=r.maxRetries??this.maxRetries;null==e&&(e=s),await this.prepareOptions(r);const{req:i,url:c,timeout:l}=await this.buildRequest(r,{retryCount:s-e});await this.prepareRequest(i,{url:c,options:r});const f="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),p=void 0===n?"":`, retryOf: ${n}`,m=Date.now();if(G(this).debug(`[${f}] sending request`,X({retryOfRequestLogID:n,method:r.method,url:c,options:r,headers:i.headers})),r.signal?.aborted)throw new u;const g=new AbortController,y=await this.fetchWithTimeout(c,i,l,g).catch(a),v=Date.now();if(y instanceof globalThis.Error){const t=`retrying, ${e} attempts remaining`;if(r.signal?.aborted)throw new u;const s=o(y)||/timed? ?out/i.test(String(y)+("cause"in y?String(y.cause):""));if(e)return G(this).info(`[${f}] connection ${s?"timed out":"failed"} - ${t}`),G(this).debug(`[${f}] connection ${s?"timed out":"failed"} (${t})`,X({retryOfRequestLogID:n,url:c,durationMs:v-m,message:y.message})),this.retryRequest(r,e,n??f);if(G(this).info(`[${f}] connection ${s?"timed out":"failed"} - error; no more retries left`),G(this).debug(`[${f}] connection ${s?"timed out":"failed"} (error; no more retries left)`,X({retryOfRequestLogID:n,url:c,durationMs:v-m,message:y.message})),s)throw new d;throw new h({cause:y})}const w=`[${f}${p}${[...y.headers.entries()].filter((([t])=>"request-id"===t)).map((([t,e])=>", "+t+": "+JSON.stringify(e))).join("")}] ${i.method} ${c} ${y.ok?"succeeded":"failed"} with status ${y.status} in ${v-m}ms`;if(!y.ok){const t=await this.shouldRetry(y);if(e&&t){const t=`retrying, ${e} attempts remaining`;return await async function(t){if(null===t||"object"!==typeof t)return;if(t[Symbol.asyncIterator])return void(await(t[Symbol.asyncIterator]().return?.()));const e=t.getReader(),n=e.cancel();e.releaseLock(),await n}(y.body),G(this).info(`${w} - ${t}`),G(this).debug(`[${f}] response error (${t})`,X({retryOfRequestLogID:n,url:y.url,status:y.status,headers:y.headers,durationMs:v-m})),this.retryRequest(r,e,n??f,y.headers)}const s=t?"error; no more retries left":"error; not retryable";G(this).info(`${w} - ${s}`);const i=await y.text().catch((t=>a(t).message)),o=T(i),c=o?void 0:i;G(this).debug(`[${f}] response error (${s})`,X({retryOfRequestLogID:n,url:y.url,status:y.status,headers:y.headers,message:c,durationMs:Date.now()-m}));throw this.makeStatusError(y.status,o,c,y.headers)}return G(this).info(w),G(this).debug(`[${f}] response start`,X({retryOfRequestLogID:n,url:y.url,status:y.status,headers:y.headers,durationMs:v-m})),{response:y,options:r,controller:g,requestLogID:f,retryOfRequestLogID:n,startTime:m}}getAPIList(t,e,n){return this.requestAPIList(e,{method:"get",path:t,...n})}requestAPIList(t,e){const n=this.makeRequest(e,null,void 0);return new at(this,n,t)}async fetchWithTimeout(t,e,n,r){const{signal:s,method:i,...o}=e||{};s&&s.addEventListener("abort",(()=>r.abort()));const a=setTimeout((()=>r.abort()),n),c=globalThis.ReadableStream&&o.body instanceof globalThis.ReadableStream||"object"===typeof o.body&&null!==o.body&&Symbol.asyncIterator in o.body,l={signal:r.signal,...c?{duplex:"half"}:{},method:"GET",...o};i&&(l.method=i.toUpperCase());try{return await this.fetch.call(void 0,t,l)}finally{clearTimeout(a)}}async shouldRetry(t){const e=t.headers.get("x-should-retry");return"true"===e||"false"!==e&&(408===t.status||(409===t.status||(429===t.status||t.status>=500)))}async retryRequest(t,e,n,r){let s;const i=r?.get("retry-after-ms");if(i){const t=parseFloat(i);Number.isNaN(t)||(s=t)}const o=r?.get("retry-after");if(o&&!s){const t=parseFloat(o);s=Number.isNaN(t)?Date.parse(o)-Date.now():1e3*t}if(!(s&&0<=s&&s<6e4)){const n=t.maxRetries??this.maxRetries;s=this.calculateDefaultRetryTimeoutMillis(e,n)}var a;return await(a=s,new Promise((t=>setTimeout(t,a)))),this.makeRequest(t,e-1,n)}calculateDefaultRetryTimeoutMillis(t,e){const n=e-t;return Math.min(.5*Math.pow(2,n),8)*(1-.25*Math.random())*1e3}calculateNonstreamingTimeout(t,e){const n=6e5;if(36e5*t/128e3>n||null!=e&&t>e)throw new c("Streaming is required for operations that may take longer than 10 minutes. See https://github.com/anthropics/anthropic-sdk-typescript#long-requests for more details");return n}async buildRequest(t,{retryCount:e=0}={}){const n={...t},{method:r,path:s,query:i,defaultBaseURL:o}=n,a=this.buildURL(s,i,o);"timeout"in n&&((t,e)=>{if("number"!==typeof e||!Number.isInteger(e))throw new c(`${t} must be an integer`);if(e<0)throw new c(`${t} must be a positive integer`)})("timeout",n.timeout),n.timeout=n.timeout??this.timeout;const{bodyHeaders:l,body:u}=this.buildBody({options:n});return{req:{method:r,headers:await this.buildHeaders({options:t,method:r,bodyHeaders:l,retryCount:e}),...n.signal&&{signal:n.signal},...globalThis.ReadableStream&&u instanceof globalThis.ReadableStream&&{duplex:"half"},...u&&{body:u},...this.fetchOptions??{},...n.fetchOptions??{}},url:a,timeout:n.timeout}}async buildHeaders({options:t,method:e,bodyHeaders:n,retryCount:r}){let s={};this.idempotencyHeader&&"get"!==e&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=t.idempotencyKey);const i=kt([s,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r),...t.timeout?{"X-Stainless-Timeout":String(Math.trunc(t.timeout/1e3))}:{},...O??(O=A()),...this._options.dangerouslyAllowBrowser?{"anthropic-dangerous-direct-browser-access":"true"}:void 0,"anthropic-version":"2023-06-01"},await this.authHeaders(t),this._options.defaultHeaders,n,t.headers]);return this.validateHeaders(i),i.values}buildBody({options:{body:t,headers:e}}){if(!t)return{bodyHeaders:void 0,body:void 0};const n=kt([e]);return ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof DataView||"string"===typeof t&&n.values.has("content-type")||globalThis.Blob&&t instanceof globalThis.Blob||t instanceof FormData||t instanceof URLSearchParams||globalThis.ReadableStream&&t instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:t}:"object"===typeof t&&(Symbol.asyncIterator in t||Symbol.iterator in t&&"next"in t&&"function"===typeof t.next)?{bodyHeaders:void 0,body:C(t)}:s(this,Ve,"f").call(this,{body:t,headers:n})}}Ne=qe,Ve=new WeakMap,Be=new WeakSet,Fe=function(){return"https://api.anthropic.com"!==this.baseURL},qe.Anthropic=Ne,qe.HUMAN_PROMPT="\\n\\nHuman:",qe.AI_PROMPT="\\n\\nAssistant:",qe.DEFAULT_TIMEOUT=6e5,qe.AnthropicError=c,qe.APIError=l,qe.APIConnectionError=h,qe.APIConnectionTimeoutError=d,qe.APIUserAbortError=u,qe.NotFoundError=g,qe.ConflictError=y,qe.RateLimitError=w,qe.BadRequestError=f,qe.AuthenticationError=p,qe.InternalServerError=b,qe.PermissionDeniedError=m,qe.UnprocessableEntityError=v,qe.toFile=async function(t,e,n){if(lt(),t=await t,e||(e=ht(t)),(t=>null!=t&&"object"===typeof t&&"string"===typeof t.name&&"number"===typeof t.lastModified&&yt(t))(t))return t instanceof File&&null==e&&null==n?t:ut([await t.arrayBuffer()],e??t.name,{type:t.type,lastModified:t.lastModified,...n});if((t=>null!=t&&"object"===typeof t&&"string"===typeof t.url&&"function"===typeof t.blob)(t)){const r=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),ut(await vt(r),e,n)}const r=await vt(t);if(!n?.type){const t=r.find((t=>"object"===typeof t&&"type"in t&&t.type));"string"===typeof t&&(n={...n,type:t})}return ut(r,e,n)};class We extends qe{constructor(){super(...arguments),this.completions=new ce(this),this.messages=new $e(this),this.models=new Ue(this),this.beta=new ae(this)}}We.Completions=ce,We.Messages=$e,We.Models=Ue,We.Beta=ae},5095:function(t,e,n){"use strict";n.d(e,{M:function(){return g}});var r=n(2265),s=n(1534);function i(){const t=(0,r.useRef)(!1);return(0,s.L)((()=>(t.current=!0,()=>{t.current=!1})),[]),t}var o=n(8345);var a=n(4252),c=n(3576);class l extends r.Component{getSnapshotBeforeUpdate(t){const e=this.props.childRef.current;if(e&&t.isPresent&&!this.props.isPresent){const t=this.props.sizeRef.current;t.height=e.offsetHeight||0,t.width=e.offsetWidth||0,t.top=e.offsetTop,t.left=e.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function u({children:t,isPresent:e}){const n=(0,r.useId)(),s=(0,r.useRef)(null),i=(0,r.useRef)({width:0,height:0,top:0,left:0});return(0,r.useInsertionEffect)((()=>{const{width:t,height:r,top:o,left:a}=i.current;if(e||!s.current||!t||!r)return;s.current.dataset.motionPopId=n;const c=document.createElement("style");return document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`\n          [data-motion-pop-id="${n}"] {\n            position: absolute !important;\n            width: ${t}px !important;\n            height: ${r}px !important;\n            top: ${o}px !important;\n            left: ${a}px !important;\n          }\n        `),()=>{document.head.removeChild(c)}}),[e]),r.createElement(l,{isPresent:e,childRef:s,sizeRef:i},r.cloneElement(t,{ref:s}))}const h=({children:t,initial:e,isPresent:n,onExitComplete:s,custom:i,presenceAffectsLayout:o,mode:l})=>{const h=(0,c.h)(d),f=(0,r.useId)(),p=(0,r.useMemo)((()=>({id:f,initial:e,isPresent:n,custom:i,onExitComplete:t=>{h.set(t,!0);for(const e of h.values())if(!e)return;s&&s()},register:t=>(h.set(t,!1),()=>h.delete(t))})),o?void 0:[n]);return(0,r.useMemo)((()=>{h.forEach(((t,e)=>h.set(e,!1)))}),[n]),r.useEffect((()=>{!n&&!h.size&&s&&s()}),[n]),"popLayout"===l&&(t=r.createElement(u,{isPresent:n},t)),r.createElement(a.O.Provider,{value:p},t)};function d(){return new Map}var f=n(8881);var p=n(3223);const m=t=>t.key||"";const g=({children:t,custom:e,initial:n=!0,onExitComplete:a,exitBeforeEnter:c,presenceAffectsLayout:l=!0,mode:u="sync"})=>{(0,p.k)(!c,"Replace exitBeforeEnter with mode='wait'");const d=(0,r.useContext)(f.p).forceRender||function(){const t=i(),[e,n]=(0,r.useState)(0),s=(0,r.useCallback)((()=>{t.current&&n(e+1)}),[e]);return[(0,r.useCallback)((()=>o.Wi.postRender(s)),[s]),e]}()[0],g=i(),y=function(t){const e=[];return r.Children.forEach(t,(t=>{(0,r.isValidElement)(t)&&e.push(t)})),e}(t);let v=y;const w=(0,r.useRef)(new Map).current,b=(0,r.useRef)(v),_=(0,r.useRef)(new Map).current,k=(0,r.useRef)(!0);var S;if((0,s.L)((()=>{k.current=!1,function(t,e){t.forEach((t=>{const n=m(t);e.set(n,t)}))}(y,_),b.current=v})),S=()=>{k.current=!0,_.clear(),w.clear()},(0,r.useEffect)((()=>()=>S()),[]),k.current)return r.createElement(r.Fragment,null,v.map((t=>r.createElement(h,{key:m(t),isPresent:!0,initial:!!n&&void 0,presenceAffectsLayout:l,mode:u},t))));v=[...v];const E=b.current.map(m),T=y.map(m),x=E.length;for(let r=0;r<x;r++){const t=E[r];-1!==T.indexOf(t)||w.has(t)||w.set(t,void 0)}return"wait"===u&&w.size&&(v=[]),w.forEach(((t,n)=>{if(-1!==T.indexOf(n))return;const s=_.get(n);if(!s)return;const i=E.indexOf(n);let o=t;if(!o){const t=()=>{w.delete(n);const t=Array.from(_.keys()).filter((t=>!T.includes(t)));if(t.forEach((t=>_.delete(t))),b.current=y.filter((e=>{const r=m(e);return r===n||t.includes(r)})),!w.size){if(!1===g.current)return;d(),a&&a()}};o=r.createElement(h,{key:m(s),isPresent:!1,onExitComplete:t,custom:e,presenceAffectsLayout:l,mode:u},s),w.set(n,o)}v.splice(i,0,o)})),v=v.map((t=>{const e=t.key;return w.has(e)?t:r.createElement(h,{key:m(t),isPresent:!0,presenceAffectsLayout:l,mode:u},t)})),r.createElement(r.Fragment,null,w.size?v:v.map((t=>(0,r.cloneElement)(t))))}},9064:function(t,e,n){"use strict";function r(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}n.d(e,{Am:function(){return Z}});var s=n(2265);let i={data:""},o=t=>{if("object"==typeof window){let e=(t?t.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return e.nonce=window.__nonce__,e.parentNode||(t||document.head).appendChild(e),e.firstChild}return t||i},a=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,c=/\/\*[^]*?\*\/|  +/g,l=/\n+/g,u=(t,e)=>{let n="",r="",s="";for(let i in t){let o=t[i];"@"==i[0]?"i"==i[1]?n=i+" "+o+";":r+="f"==i[1]?u(o,i):i+"{"+u(o,"k"==i[1]?"":e)+"}":"object"==typeof o?r+=u(o,e?e.replace(/([^,])+/g,(t=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,(e=>/&/.test(e)?e.replace(/&/g,t):t?t+" "+e:e)))):i):null!=o&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=u.p?u.p(i,o):i+":"+o+";")}return n+(e&&s?e+"{"+s+"}":s)+r},h={},d=t=>{if("object"==typeof t){let e="";for(let n in t)e+=n+d(t[n]);return e}return t},f=(t,e,n,r,s)=>{let i=d(t),o=h[i]||(h[i]=(t=>{let e=0,n=11;for(;e<t.length;)n=101*n+t.charCodeAt(e++)>>>0;return"go"+n})(i));if(!h[o]){let e=i!==t?t:(t=>{let e,n,r=[{}];for(;e=a.exec(t.replace(c,""));)e[4]?r.shift():e[3]?(n=e[3].replace(l," ").trim(),r.unshift(r[0][n]=r[0][n]||{})):r[0][e[1]]=e[2].replace(l," ").trim();return r[0]})(t);h[o]=u(s?{["@keyframes "+o]:e}:e,n?"":"."+o)}let f=n&&h.g?h.g:null;return n&&(h.g=h[o]),((t,e,n,r)=>{r?e.data=e.data.replace(r,t):-1===e.data.indexOf(t)&&(e.data=n?t+e.data:e.data+t)})(h[o],e,r,f),o},p=(t,e,n)=>t.reduce(((t,r,s)=>{let i=e[s];if(i&&i.call){let t=i(n),e=t&&t.props&&t.props.className||/^go/.test(t)&&t;i=e?"."+e:t&&"object"==typeof t?t.props?"":u(t,""):!1===t?"":t}return t+r+(null==i?"":i)}),"");function m(t){let e=this||{},n=t.call?t(e.p):t;return f(n.unshift?n.raw?p(n,[].slice.call(arguments,1),e.p):n.reduce(((t,n)=>Object.assign(t,n&&n.call?n(e.p):n)),{}):n,o(e.target),e.g,e.o,e.k)}m.bind({g:1});let g,y,v,w=m.bind({k:1});function b(t,e){let n=this||{};return function(){let r=arguments;function s(i,o){let a=Object.assign({},i),c=a.className||s.className;n.p=Object.assign({theme:y&&y()},a),n.o=/ *go\d+/.test(c),a.className=m.apply(n,r)+(c?" "+c:""),e&&(a.ref=o);let l=t;return t[0]&&(l=a.as||t,delete a.as),v&&l[0]&&v(a),g(l,a)}return e?e(s):s}}function _(){const t=r(["\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n transform: scale(1) rotate(45deg);\n  opacity: 1;\n}"]);return _=function(){return t},t}function k(){const t=r(["\nfrom {\n  transform: scale(0);\n  opacity: 0;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}"]);return k=function(){return t},t}function S(){const t=r(["\nfrom {\n  transform: scale(0) rotate(90deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(90deg);\n\topacity: 1;\n}"]);return S=function(){return t},t}function E(){const t=r(["\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ",";\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: "," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n\n  &:after,\n  &:before {\n    content: '';\n    animation: "," 0.15s ease-out forwards;\n    animation-delay: 150ms;\n    position: absolute;\n    border-radius: 3px;\n    opacity: 0;\n    background: ",";\n    bottom: 9px;\n    left: 4px;\n    height: 2px;\n    width: 12px;\n  }\n\n  &:before {\n    animation: "," 0.15s ease-out forwards;\n    animation-delay: 180ms;\n    transform: rotate(90deg);\n  }\n"]);return E=function(){return t},t}function T(){const t=r(["\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n"]);return T=function(){return t},t}function x(){const t=r(["\n  width: 12px;\n  height: 12px;\n  box-sizing: border-box;\n  border: 2px solid;\n  border-radius: 100%;\n  border-color: ",";\n  border-right-color: ",";\n  animation: "," 1s linear infinite;\n"]);return x=function(){return t},t}function A(){const t=r(["\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(45deg);\n\topacity: 1;\n}"]);return A=function(){return t},t}function R(){const t=r(["\n0% {\n\theight: 0;\n\twidth: 0;\n\topacity: 0;\n}\n40% {\n  height: 0;\n\twidth: 6px;\n\topacity: 1;\n}\n100% {\n  opacity: 1;\n  height: 10px;\n}"]);return R=function(){return t},t}function P(){const t=r(["\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ",";\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: "," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n  &:after {\n    content: '';\n    box-sizing: border-box;\n    animation: "," 0.2s ease-out forwards;\n    opacity: 0;\n    animation-delay: 200ms;\n    position: absolute;\n    border-right: 2px solid;\n    border-bottom: 2px solid;\n    border-color: ",";\n    bottom: 6px;\n    left: 6px;\n    height: 10px;\n    width: 6px;\n  }\n"]);return P=function(){return t},t}function O(){const t=r(["\n  position: absolute;\n"]);return O=function(){return t},t}function j(){const t=r(["\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-width: 20px;\n  min-height: 20px;\n"]);return j=function(){return t},t}function C(){const t=r(["\nfrom {\n  transform: scale(0.6);\n  opacity: 0.4;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}"]);return C=function(){return t},t}function I(){const t=r(["\n  position: relative;\n  transform: scale(0.6);\n  opacity: 0.4;\n  min-width: 20px;\n  animation: "," 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n"]);return I=function(){return t},t}function M(){const t=r(["\n  display: flex;\n  align-items: center;\n  background: #fff;\n  color: #363636;\n  line-height: 1.3;\n  will-change: transform;\n  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);\n  max-width: 350px;\n  pointer-events: auto;\n  padding: 8px 10px;\n  border-radius: 8px;\n"]);return M=function(){return t},t}function $(){const t=r(["\n  display: flex;\n  justify-content: center;\n  margin: 4px 10px;\n  color: inherit;\n  flex: 1 1 auto;\n  white-space: pre-line;\n"]);return $=function(){return t},t}function L(){const t=r(["\n  z-index: 9999;\n  > * {\n    pointer-events: auto;\n  }\n"]);return L=function(){return t},t}var U=(t,e)=>(t=>"function"==typeof t)(t)?t(e):t,D=(()=>{let t=0;return()=>(++t).toString()})(),B=((()=>{let t})(),"default"),N=(t,e)=>{let{toastLimit:n}=t.settings;switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,n)};case 1:return{...t,toasts:t.toasts.map((t=>t.id===e.toast.id?{...t,...e.toast}:t))};case 2:let{toast:r}=e;return N(t,{type:t.toasts.find((t=>t.id===r.id))?1:0,toast:r});case 3:let{toastId:s}=e;return{...t,toasts:t.toasts.map((t=>t.id===s||void 0===s?{...t,dismissed:!0,visible:!1}:t))};case 4:return void 0===e.toastId?{...t,toasts:[]}:{...t,toasts:t.toasts.filter((t=>t.id!==e.toastId))};case 5:return{...t,pausedAt:e.time};case 6:let i=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map((t=>({...t,pauseDuration:t.pauseDuration+i})))}}},V=[],F={toasts:[],pausedAt:void 0,settings:{toastLimit:20}},q={},W=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:B;q[e]=N(q[e]||F,t),V.forEach((t=>{let[n,r]=t;n===e&&r(q[e])}))},z=t=>Object.keys(q).forEach((e=>W(t,e))),H=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B;return e=>{W(e,t)}},K=t=>(e,n)=>{let r=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"blank",n=arguments.length>2?arguments[2]:void 0;return{createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:(null==n?void 0:n.id)||D()}}(e,t,n);return H(r.toasterId||(t=>Object.keys(q).find((e=>q[e].toasts.some((e=>e.id===t)))))(r.id))({type:2,toast:r}),r.id},Z=(t,e)=>K("blank")(t,e);Z.error=K("error"),Z.success=K("success"),Z.loading=K("loading"),Z.custom=K("custom"),Z.dismiss=(t,e)=>{let n={type:3,toastId:t};e?H(e)(n):z(n)},Z.dismissAll=t=>Z.dismiss(void 0,t),Z.remove=(t,e)=>{let n={type:4,toastId:t};e?H(e)(n):z(n)},Z.removeAll=t=>Z.remove(void 0,t),Z.promise=(t,e,n)=>{let r=Z.loading(e.loading,{...n,...null==n?void 0:n.loading});return"function"==typeof t&&(t=t()),t.then((t=>{let s=e.success?U(e.success,t):void 0;return s?Z.success(s,{id:r,...n,...null==n?void 0:n.success}):Z.dismiss(r),t})).catch((t=>{let s=e.error?U(e.error,t):void 0;s?Z.error(s,{id:r,...n,...null==n?void 0:n.error}):Z.dismiss(r)})),t};var J=w(_()),G=w(k()),X=w(S()),Y=(b("div")(E(),(t=>t.primary||"#ff4b4b"),J,G,(t=>t.secondary||"#fff"),X),w(T())),Q=(b("div")(x(),(t=>t.secondary||"#e0e0e0"),(t=>t.primary||"#616161"),Y),w(A())),tt=w(R()),et=(b("div")(P(),(t=>t.primary||"#61d345"),Q,tt,(t=>t.secondary||"#fff")),b("div")(O()),b("div")(j()),w(C()));b("div")(I(),et),b("div")(M()),b("div")($());!function(t,e,n,r){u.p=e,g=t,y=n,v=r}(s.createElement);m(L())},6200:function(t,e,n){"use strict";n.r(e),n.d(e,{__addDisposableResource:function(){return $},__assign:function(){return i},__asyncDelegator:function(){return T},__asyncGenerator:function(){return E},__asyncValues:function(){return x},__await:function(){return S},__awaiter:function(){return p},__classPrivateFieldGet:function(){return C},__classPrivateFieldIn:function(){return M},__classPrivateFieldSet:function(){return I},__createBinding:function(){return g},__decorate:function(){return a},__disposeResources:function(){return U},__esDecorate:function(){return l},__exportStar:function(){return y},__extends:function(){return s},__generator:function(){return m},__importDefault:function(){return j},__importStar:function(){return O},__makeTemplateObject:function(){return A},__metadata:function(){return f},__param:function(){return c},__propKey:function(){return h},__read:function(){return w},__rest:function(){return o},__rewriteRelativeImportExtension:function(){return D},__runInitializers:function(){return u},__setFunctionName:function(){return d},__spread:function(){return b},__spreadArray:function(){return k},__spreadArrays:function(){return _},__values:function(){return v}});var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)};function s(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var i=function(){return i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var s in e=arguments[n])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t},i.apply(this,arguments)};function o(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]])}return n}function a(t,e,n,r){var s,i=arguments.length,o=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(i<3?s(o):i>3?s(e,n,o):s(e,n))||o);return i>3&&o&&Object.defineProperty(e,n,o),o}function c(t,e){return function(n,r){e(n,r,t)}}function l(t,e,n,r,s,i){function o(t){if(void 0!==t&&"function"!==typeof t)throw new TypeError("Function expected");return t}for(var a,c=r.kind,l="getter"===c?"get":"setter"===c?"set":"value",u=!e&&t?r.static?t:t.prototype:null,h=e||(u?Object.getOwnPropertyDescriptor(u,r.name):{}),d=!1,f=n.length-1;f>=0;f--){var p={};for(var m in r)p[m]="access"===m?{}:r[m];for(var m in r.access)p.access[m]=r.access[m];p.addInitializer=function(t){if(d)throw new TypeError("Cannot add initializers after decoration has completed");i.push(o(t||null))};var g=(0,n[f])("accessor"===c?{get:h.get,set:h.set}:h[l],p);if("accessor"===c){if(void 0===g)continue;if(null===g||"object"!==typeof g)throw new TypeError("Object expected");(a=o(g.get))&&(h.get=a),(a=o(g.set))&&(h.set=a),(a=o(g.init))&&s.unshift(a)}else(a=o(g))&&("field"===c?s.unshift(a):h[l]=a)}u&&Object.defineProperty(u,r.name,h),d=!0}function u(t,e,n){for(var r=arguments.length>2,s=0;s<e.length;s++)n=r?e[s].call(t,n):e[s].call(t);return r?n:void 0}function h(t){return"symbol"===typeof t?t:"".concat(t)}function d(t,e,n){return"symbol"===typeof e&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:n?"".concat(n," ",e):e})}function f(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)}function p(t,e,n,r){return new(n||(n=Promise))((function(s,i){function o(t){try{c(r.next(t))}catch(e){i(e)}}function a(t){try{c(r.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((r=r.apply(t,e||[])).next())}))}function m(t,e){var n,r,s,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},o=Object.create(("function"===typeof Iterator?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(i=0)),i;)try{if(n=1,r&&(s=2&a[0]?r.return:a[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,a[1])).done)return s;switch(r=0,s&&(a=[2&a[0],s.value]),a[0]){case 0:case 1:s=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(s=(s=i.trys).length>0&&s[s.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!s||a[1]>s[0]&&a[1]<s[3])){i.label=a[1];break}if(6===a[0]&&i.label<s[1]){i.label=s[1],s=a;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(a);break}s[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(c){a=[6,c],r=0}finally{n=s=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}var g=Object.create?function(t,e,n,r){void 0===r&&(r=n);var s=Object.getOwnPropertyDescriptor(e,n);s&&!("get"in s?!e.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,s)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]};function y(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||g(e,t,n)}function v(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function w(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,s,i=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(a){s={error:a}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(s)throw s.error}}return o}function b(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(w(arguments[e]));return t}function _(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),s=0;for(e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function k(t,e,n){if(n||2===arguments.length)for(var r,s=0,i=e.length;s<i;s++)!r&&s in e||(r||(r=Array.prototype.slice.call(e,0,s)),r[s]=e[s]);return t.concat(r||Array.prototype.slice.call(e))}function S(t){return this instanceof S?(this.v=t,this):new S(t)}function E(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,s=n.apply(t,e||[]),i=[];return r=Object.create(("function"===typeof AsyncIterator?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",(function(t){return function(e){return Promise.resolve(e).then(t,l)}})),r[Symbol.asyncIterator]=function(){return this},r;function o(t,e){s[t]&&(r[t]=function(e){return new Promise((function(n,r){i.push([t,e,n,r])>1||a(t,e)}))},e&&(r[t]=e(r[t])))}function a(t,e){try{(n=s[t](e)).value instanceof S?Promise.resolve(n.value.v).then(c,l):u(i[0][2],n)}catch(r){u(i[0][3],r)}var n}function c(t){a("next",t)}function l(t){a("throw",t)}function u(t,e){t(e),i.shift(),i.length&&a(i[0][0],i[0][1])}}function T(t){var e,n;return e={},r("next"),r("throw",(function(t){throw t})),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,s){e[r]=t[r]?function(e){return(n=!n)?{value:S(t[r](e)),done:!1}:s?s(e):e}:s}}function x(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=v(t),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise((function(r,s){(function(t,e,n,r){Promise.resolve(r).then((function(e){t({value:e,done:n})}),e)})(r,s,(e=t[n](e)).done,e.value)}))}}}function A(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var R=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e},P=function(t){return P=Object.getOwnPropertyNames||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[e.length]=n);return e},P(t)};function O(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n=P(t),r=0;r<n.length;r++)"default"!==n[r]&&g(e,t,n[r]);return R(e,t),e}function j(t){return t&&t.__esModule?t:{default:t}}function C(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)}function I(t,e,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(t,n):s?s.value=n:e.set(t,n),n}function M(t,e){if(null===e||"object"!==typeof e&&"function"!==typeof e)throw new TypeError("Cannot use 'in' operator on non-object");return"function"===typeof t?e===t:t.has(e)}function $(t,e,n){if(null!==e&&void 0!==e){if("object"!==typeof e&&"function"!==typeof e)throw new TypeError("Object expected.");var r,s;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(void 0===r){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose],n&&(s=r)}if("function"!==typeof r)throw new TypeError("Object not disposable.");s&&(r=function(){try{s.call(this)}catch(t){return Promise.reject(t)}}),t.stack.push({value:e,dispose:r,async:n})}else n&&t.stack.push({async:!0});return e}var L="function"===typeof SuppressedError?SuppressedError:function(t,e,n){var r=new Error(n);return r.name="SuppressedError",r.error=t,r.suppressed=e,r};function U(t){function e(e){t.error=t.hasError?new L(e,t.error,"An error was suppressed during disposal."):e,t.hasError=!0}var n,r=0;return function s(){for(;n=t.stack.pop();)try{if(!n.async&&1===r)return r=0,t.stack.push(n),Promise.resolve().then(s);if(n.dispose){var i=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(i).then(s,(function(t){return e(t),s()}))}else r|=1}catch(o){e(o)}if(1===r)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}()}function D(t,e){return"string"===typeof t&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,(function(t,n,r,s,i){return n?e?".jsx":".js":!r||s&&i?r+s+"."+i.toLowerCase()+"js":t})):t}e.default={__extends:s,__assign:i,__rest:o,__decorate:a,__param:c,__esDecorate:l,__runInitializers:u,__propKey:h,__setFunctionName:d,__metadata:f,__awaiter:p,__generator:m,__createBinding:g,__exportStar:y,__values:v,__read:w,__spread:b,__spreadArrays:_,__spreadArray:k,__await:S,__asyncGenerator:E,__asyncDelegator:T,__asyncValues:x,__makeTemplateObject:A,__importStar:O,__importDefault:j,__classPrivateFieldGet:C,__classPrivateFieldSet:I,__classPrivateFieldIn:M,__addDisposableResource:$,__disposeResources:U,__rewriteRelativeImportExtension:D}}}]);