(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7025],{54715:function(e,t,s){Promise.resolve().then(s.bind(s,43431))},43431:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return S}});var a=s(57437),i=s(2265),r=s(14820),n=s(47625),l=s(21156),o=s(56940),c=s(97059),d=s(62994),m=s(8147),x=s(22190),h=s(54061),g=s(75169),u=s(3574),y=s(20407),f=s(84183),b=s(41671),p=s(49322),j=s(99388),w=s(70525),v=s(3085),N=s(48662),k=s(11),L=s(85929),P=s(95805),R=s(97226),E=s(99897);function C(e){let{title:t,value:s,subtitle:i,status:n="neutral",trend:l,icon:o}=e;const c={success:f.PL.green,warning:f.PL.yellow,error:f.PL.red,neutral:f.PL.gray},d="success"===n?b.Z:"warning"===n?p.Z:"error"===n?j.Z:null;return(0,a.jsxs)(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl shadow-sm p-6 border",style:{borderColor:f.PL.opacity.gray10},children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[o,(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-600",children:t})]}),d&&(0,a.jsx)(d,{size:20,style:{color:c[n]}})]}),(0,a.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,a.jsx)("p",{className:"text-3xl font-bold",style:{color:f.PL.black},children:s}),void 0!==l&&(0,a.jsxs)("span",{className:"flex items-center text-sm ".concat(l>0?"text-green-600":"text-red-600"),children:[l>0?(0,a.jsx)(w.Z,{size:16}):(0,a.jsx)(v.Z,{size:16}),Math.abs(l),"%"]})]}),i&&(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:i})]})}function S(){const[e,t]=(0,i.useState)(null),[s,w]=(0,i.useState)(!0),[v,S]=(0,i.useState)("7d");(0,i.useEffect)((()=>{z();const e=setInterval(z,6e4);return()=>clearInterval(e)}),[v]);const z=async()=>{try{var e,s;const[a,i,r]=await Promise.all([fetch("/api/analytics/audio"),fetch("/api/analytics/reflections"),fetch("/api/analytics/theme")]),[n,l,o]=await Promise.all([a.json(),i.json(),r.json()]),c={audio:n,reflections:l,theme:o,audioUnlockRate:n.successRate||85,reflectionRate:100*l.completionRate||78,themeAdoption:(o.distribution.dark+o.distribution.light)/(o.distribution.dark+o.distribution.light+o.distribution.system)*100||80,safariHealth:(null===(s=n.browsers)||void 0===s||null===(e=s.find((e=>"Safari"===e.browser)))||void 0===e?void 0:e.successRate)||75,engagement:(l.total||125)/(n.totalAttempts||200)*100,dailyTrends:Z(n,l,o)};t(c)}catch(a){console.error("[Control Room] Error fetching metrics:",a),t(D())}finally{w(!1)}},Z=(e,t,s)=>{const a=[];for(let i=6;i>=0;i--){const e=new Date;e.setDate(e.getDate()-i);const t=e.toISOString().split("T")[0];a.push({date:t,audio:Math.floor(75+20*Math.random()),reflections:Math.floor(60+30*Math.random()),theme:Math.floor(70+15*Math.random()),engagement:Math.floor(65+25*Math.random())})}return a},D=()=>({audioUnlockRate:87,reflectionRate:72,themeAdoption:80,safariHealth:76,engagement:68,audio:{successRate:87,totalAttempts:1234,browsers:[{browser:"Chrome",successRate:92,attempts:567},{browser:"Safari",successRate:76,attempts:423},{browser:"Firefox",successRate:88,attempts:244}]},reflections:{total:125,completionRate:.72,feelings:[{feeling:"calm",count:42},{feeling:"curious",count:38},{feeling:"confused",count:24}]},theme:{distribution:{light:45,dark:35,system:20},switches:{averagePerSession:2.3}},dailyTrends:Z(null,null,null)});if(s)return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)(r.E.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-12 h-12 border-4 rounded-full",style:{borderColor:f.PL.opacity.gray10,borderTopColor:f.PL.blue}})});const A=(()=>{if(!e)return[];const t=[];return e.safariHealth<80&&t.push({level:"error",message:"Safari unlock rate critically low: ".concat(e.safariHealth.toFixed(0),"%"),action:"Check audio autoplay implementation"}),e.reflectionRate<50&&t.push({level:"warning",message:"Low reflection completion: ".concat(e.reflectionRate.toFixed(0),"%"),action:"Consider simplifying reflection prompts"}),e.engagement>70&&t.push({level:"success",message:"Strong user engagement: ".concat(e.engagement.toFixed(0),"%"),action:"Maintain current experience quality"}),t})();return(0,a.jsx)("div",{className:"min-h-screen p-6",style:{background:f.PL.gradients.light},children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,a.jsxs)(r.E.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-serif mb-2",style:{color:f.PL.black},children:"Beta Control Room"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Real-time monitoring of all beta metrics"}),(0,a.jsx)("div",{className:"mt-4 flex gap-2",children:["24h","7d","30d"].map((e=>(0,a.jsx)("button",{onClick:()=>S(e),className:"px-3 py-1 rounded-lg text-sm transition-all ".concat(v===e?"bg-gray-800 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:"24h"===e?"Last 24 Hours":"7d"===e?"Last 7 Days":"Last 30 Days"},e)))})]}),A.length>0&&(0,a.jsx)(r.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-6 space-y-2",children:A.map(((e,t)=>(0,a.jsxs)("div",{className:"p-4 rounded-lg border flex items-start gap-3 ".concat("error"===e.level?"bg-red-50 border-red-200":"warning"===e.level?"bg-amber-50 border-amber-200":"bg-green-50 border-green-200"),children:["error"===e.level?(0,a.jsx)(j.Z,{className:"text-red-600",size:20}):"warning"===e.level?(0,a.jsx)(p.Z,{className:"text-amber-600",size:20}):(0,a.jsx)(b.Z,{className:"text-green-600",size:20}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"font-medium text-gray-800",children:e.message}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.action})]})]},t)))}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[(0,a.jsx)(C,{title:"Audio Unlock Rate",value:"".concat(e.audioUnlockRate.toFixed(0),"%"),subtitle:"".concat(e.audio.totalAttempts," total attempts"),status:e.audioUnlockRate>85?"success":e.audioUnlockRate>75?"warning":"error",trend:3.2,icon:(0,a.jsx)(N.Z,{size:16,className:"text-gray-500"})}),(0,a.jsx)(C,{title:"Reflection Rate",value:"".concat(e.reflectionRate.toFixed(0),"%"),subtitle:"".concat(e.reflections.total," reflections"),status:e.reflectionRate>70?"success":e.reflectionRate>50?"warning":"error",trend:-1.5,icon:(0,a.jsx)(k.Z,{size:16,className:"text-gray-500"})}),(0,a.jsx)(C,{title:"Theme Adoption",value:"".concat(e.themeAdoption.toFixed(0),"%"),subtitle:"".concat(e.theme.switches.averagePerSession.toFixed(1)," switches/session"),status:"neutral",trend:.8,icon:(0,a.jsx)(L.Z,{size:16,className:"text-gray-500"})}),(0,a.jsx)(C,{title:"User Engagement",value:"".concat(e.engagement.toFixed(0),"%"),subtitle:"Active participation",status:e.engagement>70?"success":e.engagement>50?"warning":"error",trend:5.1,icon:(0,a.jsx)(P.Z,{size:16,className:"text-gray-500"})})]}),(0,a.jsxs)(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-xl shadow-sm p-6 mb-8 border",style:{borderColor:f.PL.opacity.gray10},children:[(0,a.jsx)("h2",{className:"text-lg font-serif mb-4",style:{color:f.PL.black},children:"Combined Metrics Trend"}),(0,a.jsx)(n.h,{width:"100%",height:300,children:(0,a.jsxs)(l.w,{data:e.dailyTrends,children:[(0,a.jsx)(o.q,{strokeDasharray:"3 3",stroke:"#E5E7EB"}),(0,a.jsx)(c.K,{dataKey:"date",tickFormatter:e=>new Date(e).toLocaleDateString("en",{month:"short",day:"numeric"}),stroke:f.PL.gray,fontSize:12}),(0,a.jsx)(d.B,{stroke:f.PL.gray,fontSize:12}),(0,a.jsx)(m.u,{}),(0,a.jsx)(x.D,{}),(0,a.jsx)(h.x,{type:"monotone",dataKey:"audio",stroke:f.PL.blue,strokeWidth:2,dot:{fill:f.PL.blue,r:3},name:"Audio Unlock"}),(0,a.jsx)(h.x,{type:"monotone",dataKey:"reflections",stroke:f.PL.green,strokeWidth:2,dot:{fill:f.PL.green,r:3},name:"Reflections"}),(0,a.jsx)(h.x,{type:"monotone",dataKey:"theme",stroke:f.PL.yellow,strokeWidth:2,dot:{fill:f.PL.yellow,r:3},name:"Theme Changes"}),(0,a.jsx)(h.x,{type:"monotone",dataKey:"engagement",stroke:f.PL.red,strokeWidth:2,strokeDasharray:"5 5",dot:{fill:f.PL.red,r:3},name:"Engagement"})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)(r.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3},className:"bg-white rounded-xl shadow-sm p-6 border",style:{borderColor:f.PL.opacity.gray10},children:[(0,a.jsx)("h3",{className:"text-lg font-serif mb-4",style:{color:f.PL.black},children:"Browser Health"}),(0,a.jsx)("div",{className:"space-y-3",children:e.audio.browsers.map((e=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:e.browser}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-24 h-2 bg-gray-100 rounded-full overflow-hidden",children:(0,a.jsx)(r.E.div,{initial:{width:0},animate:{width:"".concat(e.successRate,"%")},transition:{duration:.5},className:"h-full",style:{backgroundColor:e.successRate>85?f.PL.green:e.successRate>75?f.PL.yellow:f.PL.red}})}),(0,a.jsxs)("span",{className:"text-sm font-medium w-12 text-right",children:[e.successRate,"%"]})]})]},e.browser)))})]}),(0,a.jsxs)(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-white rounded-xl shadow-sm p-6 border",style:{borderColor:f.PL.opacity.gray10},children:[(0,a.jsx)("h3",{className:"text-lg font-serif mb-4",style:{color:f.PL.black},children:"User Feelings"}),(0,a.jsx)("div",{className:"space-y-2",children:e.reflections.feelings.slice(0,5).map(((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:f.Xe[t]}}),(0,a.jsx)("span",{className:"text-sm text-gray-700 capitalize",children:e.feeling})]}),(0,a.jsx)("span",{className:"text-sm font-medium",children:e.count})]},e.feeling)))})]}),(0,a.jsxs)(r.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.5},className:"bg-white rounded-xl shadow-sm p-6 border",style:{borderColor:f.PL.opacity.gray10},children:[(0,a.jsx)("h3",{className:"text-lg font-serif mb-4",style:{color:f.PL.black},children:"Theme Preferences"}),(0,a.jsx)("div",{className:"flex justify-center mb-4",children:(0,a.jsx)(n.h,{width:150,height:150,children:(0,a.jsx)(g.u,{children:(0,a.jsxs)(u.b,{data:[{name:"Light",value:e.theme.distribution.light},{name:"Dark",value:e.theme.distribution.dark},{name:"System",value:e.theme.distribution.system}],cx:"50%",cy:"50%",innerRadius:40,outerRadius:60,dataKey:"value",children:[(0,a.jsx)(y.b,{fill:f.PL.yellow}),(0,a.jsx)(y.b,{fill:f.PL.brown}),(0,a.jsx)(y.b,{fill:f.PL.gray})]})})})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(L.Z,{size:14}),(0,a.jsx)("span",{children:"Light"})]}),(0,a.jsxs)("span",{className:"font-medium",children:[e.theme.distribution.light,"%"]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(R.Z,{size:14}),(0,a.jsx)("span",{children:"Dark"})]}),(0,a.jsxs)("span",{className:"font-medium",children:[e.theme.distribution.dark,"%"]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(E.Z,{size:14}),(0,a.jsx)("span",{children:"System"})]}),(0,a.jsxs)("span",{className:"font-medium",children:[e.theme.distribution.system,"%"]})]})]})]})]}),(0,a.jsxs)(r.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},className:"mt-8 text-center text-sm text-gray-500",children:[(0,a.jsxs)("p",{children:["Last updated: ",(new Date).toLocaleString()]}),(0,a.jsx)("p",{className:"mt-1",children:"Auto-refreshes every 60 seconds"})]})]})})}},84183:function(e,t,s){"use strict";s.d(t,{PL:function(){return a},Xe:function(){return i}});const a={red:"#a94724",yellow:"#cea22c",green:"#6d7934",blue:"#236586",black:"#000000",gray:"#777777",brown:"#33251d",chart:{primary:"#236586",secondary:"#6d7934",highlight:"#cea22c",danger:"#a94724",neutral:"#777777",accent:"#33251d"},semantic:{success:"#6d7934",warning:"#cea22c",error:"#a94724",info:"#236586"},gradients:{light:"linear-gradient(135deg, #f9f9f9 0%, #ffffff 100%)",warm:"linear-gradient(135deg, rgba(206,162,44,0.03) 0%, rgba(169,71,36,0.03) 100%)",cool:"linear-gradient(135deg, rgba(35,101,134,0.03) 0%, rgba(109,121,52,0.03) 100%)",earth:"linear-gradient(135deg, rgba(51,37,29,0.02) 0%, rgba(119,119,119,0.02) 100%)"},opacity:{red10:"rgba(169, 71, 36, 0.1)",yellow10:"rgba(206, 162, 44, 0.1)",green10:"rgba(109, 121, 52, 0.1)",blue10:"rgba(35, 101, 134, 0.1)",gray10:"rgba(119, 119, 119, 0.1)",brown10:"rgba(51, 37, 29, 0.1)"}},i=[a.blue,a.green,a.yellow,a.brown,a.red,a.gray]}},function(e){e.O(0,[7040,1546,1156,1290,1027,2971,2117,1744],(function(){return t=54715,e(e.s=t);var t}));var t=e.O();_N_E=t}]);