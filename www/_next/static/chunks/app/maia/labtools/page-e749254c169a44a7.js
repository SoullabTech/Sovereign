(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9240,8166],{89588:function(e,t,s){Promise.resolve().then(s.bind(s,90591))},90591:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return he}});var a=s(57437),n=s(2265),r=s(22797),i=s(87670);function o(e){let{service:t}=e;const[s,r]=(0,n.useState)(!1),[i,o]=(0,n.useState)(null);return(0,a.jsxs)("div",{className:"bg-red-900/20 border border-red-500/30 rounded-lg p-4",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold text-red-400 mb-4 flex items-center gap-2",children:["\ud83d\udea8 Emergency Override",s&&(0,a.jsx)("div",{className:"w-2 h-2 bg-red-400 rounded-full animate-pulse"})]}),s&&(0,a.jsxs)("div",{className:"mb-4 p-3 bg-red-500/20 border border-red-500/50 rounded-lg",children:[(0,a.jsx)("div",{className:"text-red-300 font-semibold text-sm",children:"\ud83d\udea8 EMERGENCY PROTOCOLS ACTIVE"}),(0,a.jsx)("div",{className:"text-red-400 text-xs mt-1",children:"All consciousness protocols have been safely terminated"})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(l,{label:"IMMEDIATE STOP",description:"Full emergency stop - all protocols",action:async()=>{r(!0),o("Emergency Stop Activated");try{await t.emergencyStop(),setTimeout((()=>{r(!1)}),5e3)}catch(e){console.error("Emergency stop failed:",e),o("Emergency Stop Failed")}},className:"bg-red-600 hover:bg-red-700 border-red-500",icon:"\ud83d\uded1",disabled:s}),(0,a.jsx)(l,{label:"Gentle Transition",description:"Gradual protocol wind-down",action:async()=>{o("Gentle Transition Initiated");try{await t.stopProtocol(),console.log("\ud83c\udf0a Gentle transition protocol activated")}catch(e){console.error("Gentle transition failed:",e),o("Gentle Transition Failed")}},className:"bg-yellow-600 hover:bg-yellow-700 border-yellow-500",icon:"\ud83c\udf0a",disabled:s}),(0,a.jsx)(l,{label:"Grounding Protocol",description:"Earth-based stabilization",action:async()=>{o("Grounding Protocol Started");try{console.log("\ud83c\udf0d Grounding protocol activated")}catch(e){console.error("Grounding protocol failed:",e),o("Grounding Protocol Failed")}},className:"bg-green-600 hover:bg-green-700 border-green-500",icon:"\ud83c\udf0d",disabled:s})]}),(0,a.jsxs)("div",{className:"mt-4 pt-4 border-t border-red-500/30",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold text-red-300 mb-2",children:"Safety Checklist"}),(0,a.jsx)(c,{})]}),i&&(0,a.jsxs)("div",{className:"mt-4 p-2 bg-black/30 rounded text-sm",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Last Action:"}),(0,a.jsx)("span",{className:"text-white ml-2",children:i}),(0,a.jsx)("span",{className:"text-gray-500 ml-2",children:(new Date).toLocaleTimeString()})]}),(0,a.jsx)("div",{className:"mt-4 p-3 bg-purple-900/20 border border-purple-500/30 rounded",children:(0,a.jsxs)("div",{className:"text-sm text-purple-300",children:[(0,a.jsx)("div",{className:"font-semibold",children:"Emergency Support"}),(0,a.jsxs)("div",{className:"text-xs mt-1 space-y-1",children:[(0,a.jsx)("div",{children:"\u2022 Local Emergency: 911"}),(0,a.jsx)("div",{children:"\u2022 Crisis Support: 988"}),(0,a.jsx)("div",{children:"\u2022 Integration Support: Available 24/7"})]})]})})]})}function l(e){let{label:t,description:s,action:r,className:i,icon:o,disabled:l=!1}=e;const[c,d]=(0,n.useState)(!1),[h,m]=(0,n.useState)(!1);return(0,a.jsx)("button",{onClick:()=>{if("IMMEDIATE STOP"===t&&!h)return m(!0),void setTimeout((()=>m(!1)),3e3);d(!0),r(),setTimeout((()=>{d(!1),m(!1)}),2e3)},disabled:l,className:"\n        w-full p-3 border rounded-lg transition-all duration-200 font-semibold\n        ".concat(l?"opacity-50 cursor-not-allowed":"cursor-pointer","\n        ").concat(c?"scale-95 brightness-125":"","\n        ").concat(h?"animate-pulse":"","\n        ").concat(i,"\n      "),children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"text-lg",children:o}),(0,a.jsxs)("div",{className:"text-left",children:[(0,a.jsx)("div",{className:"text-sm font-bold",children:h?"CONFIRM?":t}),(0,a.jsx)("div",{className:"text-xs opacity-75",children:h?"Click again to confirm":s})]})]}),c&&(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"})]})})}function c(){const[e,t]=(0,n.useState)(new Set),s=[{id:"breathing",label:"Breathing is steady and natural",icon:"\ud83e\udec1"},{id:"grounded",label:"Feel connected to physical body",icon:"\ud83c\udf0d"},{id:"oriented",label:"Know current time and location",icon:"\ud83e\udded"},{id:"supported",label:"Support person available if needed",icon:"\ud83d\udc65"},{id:"hydrated",label:"Water and light food available",icon:"\ud83d\udca7"}],r=e.size/s.length*100;return(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"w-full bg-gray-700 rounded-full h-2 mb-3",children:(0,a.jsx)("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-300",style:{width:"".concat(r,"%")}})}),s.map((s=>(0,a.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer p-2 rounded hover:bg-black/20",children:[(0,a.jsx)("input",{type:"checkbox",checked:e.has(s.id),onChange:()=>(s=>{const a=new Set(e);a.has(s)?a.delete(s):a.add(s),t(a)})(s.id),className:"w-4 h-4 rounded border-gray-500 text-green-500 focus:ring-green-500"}),(0,a.jsx)("span",{className:"text-lg",children:s.icon}),(0,a.jsx)("span",{className:"text-sm ".concat(e.has(s.id)?"text-green-300":"text-gray-300"),children:s.label})]},s.id))),100===r&&(0,a.jsx)("div",{className:"mt-3 p-2 bg-green-500/20 border border-green-500/50 rounded text-center",children:(0,a.jsx)("span",{className:"text-green-300 text-sm",children:"\u2705 Safety checklist complete"})})]})}var d=s(14404),h=s(30705);function m(e){let{service:t}=e;const[s,r]=(0,n.useState)([]);return(0,n.useEffect)((()=>{const e=e=>{const t={id:Date.now().toString(),type:"protocol_start",message:"Started ".concat(e.name),timestamp:Date.now(),severity:"info"};r((e=>[t,...e].slice(0,10)))},s=()=>{const e={id:Date.now().toString(),type:"protocol_stop",message:"Session ended",timestamp:Date.now(),severity:"info"};r((t=>[e,...t].slice(0,10)))};return t.on("protocolStarted",e),t.on("protocolStopped",s),t.on("guardianUpdate",(e=>{e.alerts.length>0&&(e=>{const t={id:Date.now().toString(),type:"guardian_alert",message:e.message,timestamp:Date.now(),severity:e.type};r((e=>[t,...e].slice(0,10)))})(e.alerts[0])})),()=>{t.off("protocolStarted",e),t.off("protocolStopped",s)}}),[t]),(0,a.jsxs)("div",{className:"bg-gray-900/50 backdrop-blur-sm border border-purple-500/30 rounded-lg p-4",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-white mb-4",children:"\u23f1\ufe0f Session Timeline"}),(0,a.jsx)("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:0===s.length?(0,a.jsx)("div",{className:"text-center py-8 text-gray-400",children:"No session events yet"}):s.map((e=>(0,a.jsx)(x,{event:e},e.id)))})]})}function x(e){let{event:t}=e;return(0,a.jsx)("div",{className:"border-l-4 pl-3 py-2 ".concat((e=>{switch(e){case"info":return"border-blue-500/50 text-blue-300";case"warning":return"border-yellow-500/50 text-yellow-300";case"critical":return"border-red-500/50 text-red-300";default:return"border-gray-500/50 text-gray-300"}})(t.severity)),children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsx)("div",{className:"text-sm",children:t.message}),(0,a.jsx)("div",{className:"text-xs opacity-75",children:(e=>{const t=Math.floor((Date.now()-e)/1e3);if(t<60)return"".concat(t,"s ago");const s=Math.floor(t/60);return"".concat(s,"m ago")})(t.timestamp)})]})})}function u(e){let{service:t}=e;const[s,r]=(0,n.useState)(null),[i,o]=(0,n.useState)("meditation");(0,n.useEffect)((()=>{const e=e=>r(e),s=()=>r(null);return t.on("protocolStarted",e),t.on("protocolStopped",s),()=>{t.off("protocolStarted",e),t.off("protocolStopped",s)}}),[t]);const l=[{id:"alpha-training",name:"Alpha Training",category:"meditation",intensity:2,duration:15,description:"Gentle alpha wave entrainment for relaxed awareness",safetyLevel:"gentle"},{id:"theta-journey",name:"Theta Journey",category:"meditation",intensity:4,duration:30,description:"Deep theta state with vivid imagery",safetyLevel:"moderate"},{id:"gamma-transcendence",name:"Gamma Transcendence",category:"meditation",intensity:6,duration:20,description:"Access mystical states and unity consciousness",safetyLevel:"intense"},{id:"anxiety-relief",name:"Anxiety Relief",category:"therapeutic",intensity:2,duration:20,description:"Alpha wave training for calm states",safetyLevel:"gentle"},{id:"focus-enhancement",name:"Focus Enhancement",category:"therapeutic",intensity:3,duration:25,description:"Specialized neurofeedback for attention",safetyLevel:"gentle"},{id:"trauma-integration",name:"Trauma Integration",category:"therapeutic",intensity:5,duration:45,description:"Safe EMDR-style processing with Guardian support",safetyLevel:"intense"},{id:"dmt-simulation",name:"DMT Simulation",category:"altered",intensity:8,duration:15,description:"DMT-like experiences via neurofeedback",safetyLevel:"advanced"},{id:"lucid-dreaming",name:"Lucid Dreaming",category:"altered",intensity:4,duration:60,description:"Train consciousness during sleep states",safetyLevel:"moderate"},{id:"flow-state",name:"Flow State Optimizer",category:"performance",intensity:5,duration:30,description:"Train on-demand peak performance states",safetyLevel:"moderate"}].filter((e=>e.category===i));return(0,a.jsxs)("div",{className:"bg-gray-900/50 backdrop-blur-sm border border-purple-500/30 rounded-lg p-4",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold text-white mb-4 flex items-center gap-2",children:["\ud83c\udf9b\ufe0f Protocol Control",s&&(0,a.jsx)("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"})]}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-2 mb-4",children:[{id:"meditation",name:"\ud83e\uddd8 Meditation",icon:"\ud83e\uddd8"},{id:"therapeutic",name:"\ud83d\udc9a Therapeutic",icon:"\ud83d\udc9a"},{id:"altered",name:"\ud83c\udf00 Altered States",icon:"\ud83c\udf00"},{id:"performance",name:"\u26a1 Performance",icon:"\u26a1"}].map((e=>(0,a.jsxs)("button",{onClick:()=>o(e.id),className:"p-3 rounded-lg border transition-all text-sm font-semibold ".concat(i===e.id?"bg-purple-500/20 border-purple-500 text-purple-300":"bg-black/20 border-gray-600 text-gray-400 hover:border-purple-500/50"),children:[(0,a.jsx)("div",{children:e.icon}),(0,a.jsx)("div",{className:"text-xs mt-1",children:e.name.replace(/\ud83e\uddd8|\ud83d\udc9a|\ud83c\udf00|\u26a1\s/,"")})]},e.id)))}),(0,a.jsx)("div",{className:"space-y-2 mb-4 max-h-64 overflow-y-auto",children:l.map((e=>(0,a.jsx)(p,{protocol:e,isActive:(null===s||void 0===s?void 0:s.id)===e.id,onStart:()=>(async e=>{try{await t.startProtocol(e)}catch(s){console.error("Failed to start protocol:",s)}})(e)},e.id)))}),s&&(0,a.jsx)(g,{protocol:s,onStop:async()=>{try{await t.stopProtocol()}catch(e){console.error("Failed to stop protocol:",e)}}}),(0,a.jsxs)("div",{className:"mt-4 p-3 bg-purple-900/20 border border-purple-500/30 rounded text-xs",children:[(0,a.jsx)("div",{className:"font-semibold text-purple-300 mb-1",children:"\ud83d\udee1\ufe0f Guardian Protected"}),(0,a.jsx)("div",{className:"text-purple-200",children:"All protocols monitored by Guardian safety system. Emergency stop always available."})]})]})}function p(e){let{protocol:t,isActive:s,onStart:n}=e;return(0,a.jsxs)("div",{className:"border rounded-lg p-3 transition-all ".concat(s?"bg-purple-500/20 border-purple-500 shadow-lg shadow-purple-500/20":"bg-black/20 border-gray-600 hover:border-purple-500/50"),children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-white text-sm",children:t.name}),(0,a.jsx)("p",{className:"text-xs text-gray-300 mt-1",children:t.description})]}),(0,a.jsx)("div",{className:"text-xs px-2 py-1 rounded border ".concat((e=>{switch(e){case"gentle":return"text-green-400 border-green-500/50";case"moderate":return"text-yellow-400 border-yellow-500/50";case"intense":return"text-orange-400 border-orange-500/50";case"advanced":return"text-red-400 border-red-500/50";default:return"text-gray-400 border-gray-500/50"}})(t.safetyLevel)),children:t.safetyLevel})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"text-xs text-gray-400",children:"Intensity:"}),(0,a.jsx)("div",{className:"flex gap-1",children:(r=t.intensity,Array.from({length:10},((e,t)=>(0,a.jsx)("div",{className:"w-1 h-3 rounded-full ".concat(t<r?"bg-purple-500":"bg-gray-700")},t))))})]}),(0,a.jsxs)("div",{className:"text-xs text-gray-400",children:[t.duration," min"]})]}),!s&&(0,a.jsx)("button",{onClick:n,className:"w-full mt-3 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white text-sm rounded-lg transition-all",children:"Start Protocol"}),s&&(0,a.jsx)("div",{className:"mt-3 p-2 bg-green-500/20 border border-green-500/50 rounded text-center",children:(0,a.jsx)("span",{className:"text-green-300 text-sm",children:"\ud83d\udfe2 Active Session"})})]});var r}function g(e){let{protocol:t,onStop:s}=e;const[r,i]=(0,n.useState)(0),[o]=(0,n.useState)(Date.now());(0,n.useEffect)((()=>{const e=setInterval((()=>{i(Math.floor((Date.now()-o)/1e3))}),1e3);return()=>clearInterval(e)}),[o]);const l=e=>{const t=Math.floor(e/60),s=e%60;return"".concat(t.toString().padStart(2,"0"),":").concat(s.toString().padStart(2,"0"))},c=r/(60*t.duration)*100;return(0,a.jsxs)("div",{className:"bg-purple-900/20 border border-purple-500/30 rounded-lg p-4",children:[(0,a.jsxs)("h3",{className:"font-semibold text-purple-300 mb-3",children:["Active: ",t.name]}),(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsxs)("div",{className:"flex justify-between text-xs text-gray-400 mb-1",children:[(0,a.jsx)("span",{children:l(r)}),(0,a.jsx)("span",{children:l(60*t.duration)})]}),(0,a.jsx)("div",{className:"w-full bg-gray-700 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-purple-500 h-2 rounded-full transition-all duration-1000",style:{width:"".concat(Math.min(c,100),"%")}})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-2 mb-3 text-center text-xs",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-gray-400",children:"Phase"}),(0,a.jsx)("div",{className:"text-white",children:c<25?"Entry":c<75?"Active":"Integration"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-gray-400",children:"Safety"}),(0,a.jsx)("div",{className:"text-green-400",children:"Protected"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-gray-400",children:"Status"}),(0,a.jsx)("div",{className:"text-purple-400",children:"Running"})]})]}),(0,a.jsx)("button",{onClick:s,className:"w-full px-4 py-2 bg-red-600 hover:bg-red-700 text-white text-sm rounded-lg transition-all",children:"Stop Session"})]})}function b(e){let{service:t}=e;const[s,r]=(0,n.useState)({intensity:!1,duration:!1,safety:!1}),i=e=>{r((t=>({...t,[e]:!t[e]})))};return(0,a.jsxs)("div",{className:"bg-gray-900/50 backdrop-blur-sm border border-purple-500/30 rounded-lg p-4",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-white mb-4",children:"\u2699\ufe0f Safety Overrides"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(y,{label:"Intensity Limits",description:"Allow protocols above normal intensity",enabled:s.intensity,onToggle:()=>i("intensity"),warning:"High intensity protocols require additional monitoring"}),(0,a.jsx)(y,{label:"Duration Limits",description:"Extend session beyond recommended time",enabled:s.duration,onToggle:()=>i("duration"),warning:"Extended sessions increase risk of overwhelm"}),(0,a.jsx)(y,{label:"Safety Protocols",description:"Advanced practitioner mode",enabled:s.safety,onToggle:()=>i("safety"),warning:"Only for experienced practitioners with support"})]}),(0,a.jsx)("div",{className:"mt-4 p-3 bg-yellow-900/20 border border-yellow-500/30 rounded text-xs text-yellow-300",children:"\u26a0\ufe0f Overrides should only be used by experienced practitioners"})]})}function y(e){let{label:t,description:s,enabled:n,onToggle:r,warning:i}=e;return(0,a.jsxs)("div",{className:"border rounded-lg p-3 ".concat(n?"bg-yellow-500/10 border-yellow-500/50":"bg-black/20 border-gray-600"),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-semibold text-white text-sm",children:t}),(0,a.jsx)("div",{className:"text-xs text-gray-300",children:s})]}),(0,a.jsx)("button",{onClick:r,className:"w-12 h-6 rounded-full transition-all ".concat(n?"bg-yellow-500":"bg-gray-600"),children:(0,a.jsx)("div",{className:"w-5 h-5 bg-white rounded-full transition-transform ".concat(n?"translate-x-6":"translate-x-0.5")})})]}),n&&(0,a.jsxs)("div",{className:"text-xs text-yellow-300 bg-yellow-500/10 p-2 rounded",children:["\u26a0\ufe0f ",i]})]})}function v(e){let{service:t}=e;const[s,r]=(0,n.useState)([]),[i,o]=(0,n.useState)("");(0,n.useEffect)((()=>{const e=localStorage.getItem("maia-integration-notes");e&&r(JSON.parse(e))}),[]);const l=e=>{r(e),localStorage.setItem("maia-integration-notes",JSON.stringify(e))};return(0,a.jsxs)("div",{className:"bg-gray-900/50 backdrop-blur-sm border border-purple-500/30 rounded-lg p-4",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-white mb-4",children:"\ud83d\udcdd Integration Notes"}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("textarea",{value:i,onChange:e=>o(e.target.value),placeholder:"Record insights, experiences, or integration notes...",className:"w-full p-3 bg-black/30 border border-gray-600 rounded-lg text-white text-sm resize-none focus:border-purple-500 focus:outline-none",rows:3}),(0,a.jsx)("button",{onClick:()=>{if(i.trim()){const e={id:Date.now().toString(),content:i.trim(),timestamp:Date.now(),type:"integration"};l([e,...s]),o("")}},disabled:!i.trim(),className:"mt-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 disabled:bg-gray-600 disabled:cursor-not-allowed text-white text-sm rounded-lg transition-all",children:"Add Note"})]}),(0,a.jsx)("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:0===s.length?(0,a.jsx)("div",{className:"text-center py-8 text-gray-400 text-sm",children:"No integration notes yet"}):s.map((e=>(0,a.jsx)(f,{note:e,onDelete:()=>{return t=e.id,void l(s.filter((e=>e.id!==t)));var t}},e.id)))}),(0,a.jsxs)("div",{className:"mt-4 p-3 bg-purple-900/20 border border-purple-500/30 rounded",children:[(0,a.jsx)("div",{className:"text-sm font-semibold text-purple-300 mb-2",children:"\ud83d\udcab Integration Prompts"}),(0,a.jsxs)("div",{className:"text-xs text-purple-200 space-y-1",children:[(0,a.jsx)("div",{children:"\u2022 What did I notice in my body?"}),(0,a.jsx)("div",{children:"\u2022 What patterns or insights emerged?"}),(0,a.jsx)("div",{children:"\u2022 How can I integrate this into daily life?"}),(0,a.jsx)("div",{children:"\u2022 What feels different or new?"})]})]})]})}function f(e){let{note:t,onDelete:s}=e;return(0,a.jsxs)("div",{className:"bg-black/30 border border-gray-600 rounded-lg p-3",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,a.jsx)("div",{className:"text-xs text-gray-400",children:(e=>{const t=new Date(e);return t.toLocaleDateString()+" "+t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})(t.timestamp)}),(0,a.jsx)("button",{onClick:s,className:"text-gray-500 hover:text-red-400 text-xs",children:"\u2715"})]}),(0,a.jsx)("div",{className:"text-sm text-white whitespace-pre-wrap",children:t.content})]})}var j=s(25917),N=s(55445);class w extends N.EventEmitter{async connect(){if(this.isConnecting||this.ws&&this.ws.readyState===WebSocket.OPEN)return!0;this.isConnecting=!0;try{return console.log("\ud83c\udf10 Connecting to real-time consciousness monitor..."),this.ws=new WebSocket(this.wsUrl),this.ws.onopen=()=>{console.log("\u2705 Connected to consciousness monitoring service"),this.isConnecting=!1,this.reconnectAttempts=0,this.connectionStatus.websocket_connected=!0,this.emit("connectionStatusChanged",this.connectionStatus),this.emit("connected")},this.ws.onmessage=e=>{try{const t=JSON.parse(e.data);this.handleConsciousnessUpdate(t)}catch(t){console.error("Error parsing consciousness update:",t)}},this.ws.onclose=()=>{console.log("\ud83d\udd0c Disconnected from consciousness monitoring service"),this.isConnecting=!1,this.connectionStatus.websocket_connected=!1,this.emit("connectionStatusChanged",this.connectionStatus),this.emit("disconnected"),this.scheduleReconnect()},this.ws.onerror=e=>{console.error("\u274c WebSocket error:",e),this.isConnecting=!1,this.emit("error",e)},await this.waitForConnection(),!0}catch(e){return console.error("\u274c Failed to connect to consciousness monitor:",e),this.isConnecting=!1,!1}}waitForConnection(){return new Promise(((e,t)=>{const s=setTimeout((()=>{t(new Error("Connection timeout"))}),1e4);this.once("connected",(()=>{clearTimeout(s),e()})),this.once("error",(e=>{clearTimeout(s),t(e)}))}))}handleConsciousnessUpdate(e){this.connectionStatus.last_update=Date.now(),this.connectionStatus.eeg_connected=void 0!==e.data.eeg,this.connectionStatus.hrv_connected=void 0!==e.data.hrv,this.emit("eegUpdate",e.data.eeg),e.data.hrv&&this.emit("hrvUpdate",e.data.hrv),this.emit("consciousnessMetrics",{overall_coherence:e.data.overall_coherence,breakthrough_potential:e.data.breakthrough_potential,sacred_resonance:e.data.sacred_resonance,field_strength:e.data.field_strength,meditation_depth:e.data.meditation_depth}),e.data.breakthrough_potential>.85&&"breakthrough"===e.data.meditation_depth&&this.emit("breakthroughDetected",{potential:e.data.breakthrough_potential,eeg_state:e.data.eeg.consciousness_state,pineal_activation:e.data.eeg.pineal_activation,third_eye_coherence:e.data.eeg.third_eye_coherence}),this.emit("connectionStatusChanged",this.connectionStatus),e.data.eeg.pineal_activation>.7&&this.emit("pinealActivationDetected",{activation_level:e.data.eeg.pineal_activation,consciousness_state:e.data.eeg.consciousness_state}),e.data.eeg.third_eye_coherence>.8&&this.emit("thirdEyeCoherenceHigh",{coherence:e.data.eeg.third_eye_coherence,theta:e.data.eeg.theta,gamma:e.data.eeg.gamma})}scheduleReconnect(){if(this.reconnectAttempts>=this.maxReconnectAttempts)return console.error("\u274c Max reconnection attempts reached"),void this.emit("maxReconnectAttemptsReached");setTimeout((()=>{this.reconnectAttempts++,console.log("\ud83d\udd04 Reconnection attempt ".concat(this.reconnectAttempts,"/").concat(this.maxReconnectAttempts)),this.connect()}),this.reconnectInterval*Math.pow(2,this.reconnectAttempts))}getConnectionStatus(){return{...this.connectionStatus}}isRealTimeBiometricsAvailable(){return this.connectionStatus.websocket_connected&&(this.connectionStatus.eeg_connected||this.connectionStatus.hrv_connected)}getFrequencyAnalysisForGeometry(){return this.connectionStatus.eeg_connected?{dominant_frequency:10.5,harmony_index:.75}:null}async integrateWithMeditationSession(e){try{const t={type:"link_meditation_session",sessionId:e,timestamp:Date.now()};return!(!this.ws||this.ws.readyState!==WebSocket.OPEN)&&(this.ws.send(JSON.stringify(t)),console.log("\ud83d\udd17 Linked consciousness monitor with meditation session: ".concat(e)),!0)}catch(t){return console.error("\u274c Failed to integrate with meditation session:",t),!1}}async startConsciousnessMonitor(){try{return console.log("\ud83e\udde0 Starting consciousness monitoring service..."),await new Promise((e=>setTimeout(e,3e3))),await this.connect()}catch(e){return console.error("\u274c Failed to start consciousness monitor:",e),!1}}disconnect(){this.reconnectAttempts=this.maxReconnectAttempts,this.ws&&(this.ws.close(),this.ws=null),this.connectionStatus={eeg_connected:!1,hrv_connected:!1,websocket_connected:!1,last_update:0},this.emit("connectionStatusChanged",this.connectionStatus),console.log("\ud83d\udd0c Disconnected from consciousness monitoring service")}getCurrentMeditationRecommendation(){return this.isRealTimeBiometricsAvailable()?"Based on your current brainwave patterns, a 20-minute deep contemplation session is recommended.":null}constructor(){super(),this.ws=null,this.reconnectInterval=5e3,this.reconnectAttempts=0,this.maxReconnectAttempts=10,this.isConnecting=!1,this.connectionStatus={eeg_connected:!1,hrv_connected:!1,websocket_connected:!1,last_update:0},this.wsUrl="ws://localhost:8765"}}const S=new w;class k extends N.EventEmitter{async createSession(e){try{const t=await fetch("".concat(this.baseUrl,"/api/maia/meditation"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to create session: ".concat(t.statusText));const s=await t.json();if(!s.success)throw new Error(s.error||"Failed to create session");return this.currentSession=s.session,this.emit("sessionCreated",this.currentSession),this.startSessionMonitoring(),this.currentSession}catch(t){throw console.error("Error creating meditation session:",t),t}}async getSessionStatus(e){try{const t=await fetch("".concat(this.baseUrl,"/api/maia/meditation?sessionId=").concat(e));if(!t.ok)throw new Error("Failed to get session status: ".concat(t.statusText));const s=await t.json();if(!s.success)throw new Error(s.error||"Failed to get session status");return s}catch(t){throw console.error("Error getting session status:",t),t}}async updateSession(e,t){try{const s=await fetch("".concat(this.baseUrl,"/api/maia/meditation"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:e,updates:t})});if(!s.ok)throw new Error("Failed to update session: ".concat(s.statusText));const a=await s.json();if(!a.success)throw new Error(a.error||"Failed to update session");return this.currentSession=a.session,this.emit("sessionUpdated",this.currentSession),this.currentSession}catch(s){throw console.error("Error updating meditation session:",s),s}}async endSession(e){try{const t=await fetch("".concat(this.baseUrl,"/api/maia/meditation?sessionId=").concat(e),{method:"DELETE"});if(!t.ok)throw new Error("Failed to end session: ".concat(t.statusText));const s=await t.json();if(!s.success)throw new Error(s.error||"Failed to end session");this.currentSession=null,this.stopSessionMonitoring(),this.emit("sessionEnded",e)}catch(t){throw console.error("Error ending meditation session:",t),t}}async enhanceConversation(e,t,s){try{const a=await fetch("".concat(this.baseUrl,"/api/maia/consciousness-integration"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e,message:t,sessionId:s,context:s?"meditation":"general",includeMetrics:!0})});if(!a.ok)throw new Error("Failed to enhance conversation: ".concat(a.statusText));const n=await a.json();if(!n.success)throw new Error(n.error||"Failed to enhance conversation");return n.enhancement}catch(a){throw console.error("Error enhancing conversation:",a),a}}async recordBreakthrough(e){try{const t=await fetch("".concat(this.baseUrl,"/api/maia/consciousness-integration"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to record breakthrough: ".concat(t.statusText));const s=await t.json();if(!s.success)throw new Error(s.error||"Failed to record breakthrough");return this.emit("breakthroughRecorded",s.breakthrough),s.breakthrough}catch(t){throw console.error("Error recording breakthrough:",t),t}}async getBreakthroughs(e){try{const t=await fetch("".concat(this.baseUrl,"/api/maia/consciousness-integration?type=breakthroughs&userId=").concat(e));if(!t.ok)throw new Error("Failed to get breakthroughs: ".concat(t.statusText));const s=await t.json();if(!s.success)throw new Error(s.error||"Failed to get breakthroughs");return s.breakthroughs}catch(t){throw console.error("Error getting breakthroughs:",t),t}}async getConsciousnessState(e){try{const t=await fetch("".concat(this.baseUrl,"/api/maia/consciousness-integration?type=consciousness&userId=").concat(e));if(!t.ok)throw new Error("Failed to get consciousness state: ".concat(t.statusText));const s=await t.json();if(!s.success)throw new Error(s.error||"Failed to get consciousness state");return s.consciousnessState}catch(t){throw console.error("Error getting consciousness state:",t),t}}async getSessionHistory(e){try{const t=await fetch("".concat(this.baseUrl,"/api/maia/meditation?userId=").concat(e,"&history=true"));if(!t.ok)throw new Error("Failed to get session history: ".concat(t.statusText));const s=await t.json();if(!s.success)throw new Error(s.error||"Failed to get session history");return s.history}catch(t){throw console.error("Error getting session history:",t),t}}async getActiveSessions(e){try{const t=e?"".concat(this.baseUrl,"/api/maia/meditation?userId=").concat(e):"".concat(this.baseUrl,"/api/maia/meditation"),s=await fetch(t);if(!s.ok)throw new Error("Failed to get active sessions: ".concat(s.statusText));const a=await s.json();if(!a.success)throw new Error(a.error||"Failed to get active sessions");return a.activeSessions}catch(t){throw console.error("Error getting active sessions:",t),t}}startSessionMonitoring(){!this.monitoringInterval&&this.currentSession&&(this.monitoringInterval=setInterval((async()=>{if(this.currentSession)try{const e=await this.getSessionStatus(this.currentSession.id);if(e.session){const t=this.currentSession.status;this.currentSession=e.session,t!==this.currentSession.status&&(this.emit("sessionStatusChanged",{session:this.currentSession,previousStatus:t,newStatus:this.currentSession.status}),"breakthrough"===this.currentSession.status&&this.emit("breakthroughDetected",{session:this.currentSession,metrics:this.currentSession.metrics})),this.emit("metricsUpdated",{session:this.currentSession,metrics:this.currentSession.metrics,elapsed:e.elapsed,remaining:e.remaining}),"completed"===this.currentSession.status&&(this.currentSession=null,this.stopSessionMonitoring(),this.emit("sessionCompleted",e.session))}}catch(e){console.error("Error monitoring session:",e),this.emit("monitoringError",e)}else this.stopSessionMonitoring()}),5e3))}stopSessionMonitoring(){this.monitoringInterval&&(clearInterval(this.monitoringInterval),this.monitoringInterval=null)}getCurrentSession(){return this.currentSession}isSessionActive(){return null!==this.currentSession&&["preparing","active","breakthrough","integration"].includes(this.currentSession.status)}getSessionElapsedTime(){return this.currentSession?Math.floor((Date.now()-this.currentSession.startTime)/1e3):0}getSessionRemainingTime(){if(!this.currentSession)return 0;const e=this.getSessionElapsedTime();return Math.max(0,60*this.currentSession.duration-e)}disconnect(){this.stopSessionMonitoring(),this.removeAllListeners()}constructor(e=""){super(),this.currentSession=null,this.monitoringInterval=null,this.baseUrl=e}}function _(e){let{service:t}=e;const[s,r]=(0,n.useState)(null),[i,o]=(0,n.useState)("deep_contemplation"),[l,c]=(0,n.useState)(30),[d,h]=(0,n.useState)(null),[m,x]=(0,n.useState)(null),[u,p]=(0,n.useState)({eeg_connected:!1,hrv_connected:!1,websocket_connected:!1,last_update:0}),[g,b]=(0,n.useState)(null),[y]=(0,n.useState)((()=>new k)),[v,f]=(0,n.useState)({pinealActivationIndex:0,thirdEyeCoherence:0,consciousnessCoherence:0,sacredResonance:0,breakthroughPotential:0,fieldStrength:0,meditationDepth:"preparing"}),[j,N]=(0,n.useState)({active:!1,type:"pineal",message:""}),w=(0,n.useRef)([]),_=(0,n.useRef)(null),C={gentle_awakening:{name:"Gentle Awakening",description:"Peaceful entry \u2022 Pineal preparation",intensity:.2,colors:["#E8F5E8","#C8E6C9"],frequencies:{primary:432,binaural:4.5,sacred:528,quantum:.1},eeg_target:{theta:.4,alpha:.6,beta:.3}},conscious_entry:{name:"Conscious Entry",description:"Awareness cultivation \u2022 Third eye preparation",intensity:.4,colors:["#E3F2FD","#90CAF9"],frequencies:{primary:432,binaural:6.3,sacred:528,quantum:.15},eeg_target:{theta:.5,alpha:.7,beta:.25}},deep_contemplation:{name:"Deep Contemplation",description:"Introspective states \u2022 Ajna activation begins",intensity:.6,colors:["#F3E5F5","#CE93D8"],frequencies:{primary:432,binaural:7.83,sacred:741,quantum:.2},eeg_target:{theta:.65,alpha:.75,beta:.2}},profound_absorption:{name:"Profound Absorption",description:"Deep meditative immersion \u2022 Pineal gland activation",intensity:.8,colors:["#FCE4EC","#F48FB1"],frequencies:{primary:528,binaural:10.5,sacred:852,quantum:.3},eeg_target:{theta:.75,alpha:.8,beta:.15}},breakthrough_threshold:{name:"Breakthrough Threshold",description:"Consciousness transcendence \u2022 Third eye opening",intensity:.9,colors:["#FFF3E0","#FFCC02"],frequencies:{primary:528,binaural:40,sacred:963,quantum:.5},eeg_target:{theta:.8,alpha:.8,gamma:.6}},consciousness_cascade:{name:"Consciousness Cascade",description:"Advanced exploration \u2022 Theta-gamma synchrony",intensity:.95,colors:["#E0F2F1","#00E676"],frequencies:{primary:741,binaural:89,sacred:1618,quantum:1},eeg_target:{theta:.85,gamma:.8,alpha:.85}},sacred_transcendence:{name:"Sacred Transcendence",description:"Ultimate experience \u2022 Complete pineal activation",intensity:1,colors:["#F9FBE7","#F0F4C3"],frequencies:{primary:963,binaural:144,sacred:1618,quantum:1.618},eeg_target:{theta:.9,gamma:.9,alpha:.9}}};(0,n.useEffect)((()=>((async()=>{console.log("\ud83e\udde0 Initializing real-time biometric monitoring..."),S.on("eegUpdate",D),S.on("hrvUpdate",E),S.on("consciousnessMetrics",M),S.on("breakthroughDetected",A),S.on("pinealActivationDetected",F),S.on("thirdEyeCoherenceHigh",R),S.on("connectionStatusChanged",p);try{await S.startConsciousnessMonitor()?console.log("\u2705 Real-time biometric monitoring activated"):console.log("\u26a0\ufe0f Operating in simulation mode - no real biometric data")}catch(e){console.log("\u26a0\ufe0f Biometric monitoring unavailable, using simulation mode")}})(),()=>{S.removeAllListeners(),S.disconnect()})),[]);const D=e=>{h(e);const t=T(e),s=P(e);f((a=>({...a,pinealActivationIndex:t,thirdEyeCoherence:s,consciousnessCoherence:(e.theta+e.alpha)/2,meditationDepth:e.consciousness_state})))},E=e=>{x(e),f((t=>({...t,sacredResonance:(t.consciousnessCoherence+e.coherence)/2,fieldStrength:.6*e.coherence+.4*t.pinealActivationIndex})))},M=e=>{f((t=>({...t,breakthroughPotential:e.breakthrough_potential,sacredResonance:e.sacred_resonance,fieldStrength:e.field_strength,meditationDepth:e.meditation_depth}))),(null===s||void 0===s?void 0:s.adaptiveMode)&&e.breakthrough_potential>.85&&q()},A=e=>{N({active:!0,type:"cascade",message:"Breakthrough cascade detected! Pineal activation: ".concat((100*e.pineal_activation).toFixed(1),"%, Third eye coherence: ").concat((100*e.third_eye_coherence).toFixed(1),"%")}),setTimeout((()=>N((e=>({...e,active:!1})))),1e4)},F=e=>{e.activation_level>.7&&(N({active:!0,type:"pineal",message:"Pineal gland activation detected! Level: ".concat((100*e.activation_level).toFixed(1),"%")}),setTimeout((()=>N((e=>({...e,active:!1})))),8e3))},R=e=>{e.coherence>.8&&(N({active:!0,type:"third_eye",message:"High third eye coherence! Theta: ".concat((100*e.theta).toFixed(1),"%, Gamma: ").concat((100*e.gamma).toFixed(1),"%")}),setTimeout((()=>N((e=>({...e,active:!1})))),8e3))},T=e=>{const t=e.theta*e.gamma/(e.alpha+.1);return Math.min(1,.8*t)},P=e=>(e.theta+e.gamma)/2,I=(e,t)=>{const{primary:s,binaural:a,sacred:n,quantum:r}=e;switch(t.pattern){case"golden_spiral":return[s,s+a,n,1.6180339887*n,r];case"fibonacci":return[1,1,2,3,5,8,13,21].map((e=>s*(e/8))).slice(0,5);case"flower_of_life":return[s,1.25*s,1.5*s,n,1.33*n];case"sri_yantra":return[s,1.125*s,1.2*s,n,9*r];default:return[s,s+a,n,r]}},H=async e=>{if(!g||!_.current)return;w.current.forEach((e=>{try{e.stop()}catch(t){}})),w.current=[];const{frequency:t,sacredGeometry:s}=e,a=g.createOscillator();a.frequency.value=t.primary,a.type="sine",a.connect(_.current),a.start(),w.current.push(a);const n=g.createOscillator();n.frequency.value=t.primary+t.binaural;const r=g.createChannelSplitter(2),i=g.createChannelMerger(2);_.current.disconnect(),_.current.connect(r),r.connect(i,0,0);const o=g.createGain();if(o.gain.value=1,n.connect(o),o.connect(i,0,1),i.connect(g.destination),n.start(),w.current.push(n),s.harmonics.forEach(((e,t)=>{const s=g.createOscillator();s.frequency.value=e,s.type="sine";const a=g.createGain();a.gain.value=.12/(t+2),s.connect(a),a.connect(_.current),s.start(),w.current.push(s)})),"breakthrough_threshold"===e.intensity||"consciousness_cascade"===e.intensity||"sacred_transcendence"===e.intensity){const e=g.createOscillator();e.frequency.value=963,e.type="triangle";const s=g.createGain();s.gain.value=.08,e.connect(s),s.connect(_.current),e.start(),w.current.push(e);const a=g.createOscillator();a.frequency.value=1.618*t.quantum,a.type="triangle";const n=g.createGain();n.gain.value=.06,a.connect(n),n.connect(_.current),a.start(),w.current.push(a)}if(e.realTimeBiometrics&&d){const e=(d.theta+d.alpha)/2;w.current.forEach(((t,s)=>{if(s>0){const s=t.frequency.value;t.frequency.setValueAtTime(s*(1+.1*e),g.currentTime)}}))}},q=()=>{if(!s)return;const e=["gentle_awakening","conscious_entry","deep_contemplation","profound_absorption","breakthrough_threshold","consciousness_cascade","sacred_transcendence"],t=e.indexOf(s.intensity);if(t<e.length-1){const a=e[t+1];r((e=>e?{...e,intensity:a,status:"breakthrough",frequency:C[a].frequencies}:null)),H({...s,intensity:a,frequency:C[a].frequencies}),console.log("\ud83c\udf1f Session upgraded to ".concat(a," due to high breakthrough potential")),setTimeout((()=>{r((e=>e?{...e,status:"active"}:null))}),4e3)}},L=()=>{w.current.forEach((e=>{try{e.stop()}catch(t){}})),w.current=[],s&&(r((e=>e?{...e,status:"integration"}:null)),setTimeout((()=>{r((e=>e?{...e,status:"completed"}:null))}),5e3),setTimeout((()=>{r(null)}),1e4))},z=()=>s?Math.floor((Date.now()-s.startTime)/1e3):0,U=e=>{const t=Math.floor(e/60),s=e%60;return"".concat(t,":").concat(s.toString().padStart(2,"0"))};return(0,a.jsxs)("div",{className:"bg-black/30 backdrop-blur-sm border border-purple-500/30 rounded-xl p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:["\ud83e\udde0 Real-Time Biometric Meditation Console",u.eeg_connected&&(0,a.jsx)("span",{className:"text-xs px-2 py-1 rounded-full bg-green-500/20 text-green-400 border border-green-500/50",children:"EEG LIVE"}),u.hrv_connected&&(0,a.jsx)("span",{className:"text-xs px-2 py-1 rounded-full bg-blue-500/20 text-blue-400 border border-blue-500/50",children:"HRV LIVE"}),s&&(0,a.jsx)("span",{className:"text-xs px-2 py-1 rounded-full ".concat("active"===s.status?"bg-green-500/20 text-green-400":"breakthrough"===s.status?"bg-yellow-500/20 text-yellow-400":"integration"===s.status?"bg-blue-500/20 text-blue-400":"bg-purple-500/20 text-purple-400"),children:s.status.toUpperCase()})]}),s&&(0,a.jsx)("button",{onClick:()=>{L(),t.emergencyStop(),S.disconnect()},className:"bg-red-500/20 hover:bg-red-500/40 text-red-400 px-3 py-1 rounded-lg text-sm transition-colors",children:"Emergency Stop"})]}),(0,a.jsxs)("div",{className:"mb-4 p-3 bg-black/20 rounded-lg border border-gray-600/30",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-300 mb-2",children:"\ud83d\udd2c Biometric Hardware Status"}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-3 text-xs",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 ".concat(u.eeg_connected?"text-green-400":"text-red-400"),children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(u.eeg_connected?"bg-green-500 animate-pulse":"bg-red-500")}),"OpenBCI Ganglion"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 ".concat(u.hrv_connected?"text-green-400":"text-red-400"),children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(u.hrv_connected?"bg-green-500 animate-pulse":"bg-red-500")}),"Apple Watch HRV"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 ".concat(u.websocket_connected?"text-green-400":"text-red-400"),children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(u.websocket_connected?"bg-green-500 animate-pulse":"bg-red-500")}),"Consciousness Monitor"]})]})]}),j.active&&(0,a.jsx)("div",{className:"mb-4 p-4 rounded-lg border animate-pulse ".concat("cascade"===j.type?"bg-red-500/20 border-red-400/50 text-red-300":"pineal"===j.type?"bg-yellow-500/20 border-yellow-400/50 text-yellow-300":"bg-purple-500/20 border-purple-400/50 text-purple-300"),children:(0,a.jsxs)("div",{className:"flex items-center gap-2 font-medium",children:["cascade"===j.type?"\u26a1":"pineal"===j.type?"\ud83e\uddff":"\ud83d\udc41\ufe0f",j.message]})}),s?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-black/20 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,a.jsxs)("h4",{className:"font-medium text-white flex items-center gap-2",children:[C[s.intensity].name,s.realTimeBiometrics&&(0,a.jsx)("span",{className:"text-xs text-green-400",children:"\ud83d\udd2c LIVE"})]}),(0,a.jsxs)("span",{className:"text-sm text-purple-300",children:[U(z())," / ",U(60*s.duration)]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-700 rounded-full h-2 mb-2",children:(0,a.jsx)("div",{className:"bg-gradient-to-r from-purple-500 to-blue-500 h-2 rounded-full transition-all duration-1000",style:{width:"".concat(z()/(60*s.duration)*100,"%")}})}),(0,a.jsxs)("div",{className:"text-xs text-gray-400",children:["Remaining: ",U((()=>{if(!s)return 0;const e=z();return Math.max(0,60*s.duration-e)})())]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"bg-black/20 rounded-lg p-3",children:[(0,a.jsxs)("div",{className:"text-xs text-purple-300 mb-1 flex items-center gap-1",children:["\ud83e\uddff Pineal Activation",v.pinealActivationIndex>.7&&(0,a.jsx)("span",{className:"text-yellow-400 animate-pulse",children:"\u26a1"})]}),(0,a.jsxs)("div",{className:"text-lg font-bold text-white",children:[(100*v.pinealActivationIndex).toFixed(1),"%"]}),(0,a.jsx)("div",{className:"w-full bg-gray-700 rounded-full h-1",children:(0,a.jsx)("div",{className:"bg-gradient-to-r from-yellow-500 to-orange-500 h-1 rounded-full transition-all duration-1000",style:{width:"".concat(100*v.pinealActivationIndex,"%")}})})]}),(0,a.jsxs)("div",{className:"bg-black/20 rounded-lg p-3",children:[(0,a.jsxs)("div",{className:"text-xs text-purple-300 mb-1 flex items-center gap-1",children:["\ud83d\udc41\ufe0f Third Eye Coherence",v.thirdEyeCoherence>.8&&(0,a.jsx)("span",{className:"text-purple-400 animate-pulse",children:"\u2728"})]}),(0,a.jsxs)("div",{className:"text-lg font-bold text-white",children:[(100*v.thirdEyeCoherence).toFixed(1),"%"]}),(0,a.jsx)("div",{className:"w-full bg-gray-700 rounded-full h-1",children:(0,a.jsx)("div",{className:"bg-gradient-to-r from-purple-500 to-violet-500 h-1 rounded-full transition-all duration-1000",style:{width:"".concat(100*v.thirdEyeCoherence,"%")}})})]}),(0,a.jsxs)("div",{className:"bg-black/20 rounded-lg p-3",children:[(0,a.jsx)("div",{className:"text-xs text-purple-300 mb-1",children:"Consciousness Coherence"}),(0,a.jsxs)("div",{className:"text-lg font-bold text-white",children:[(100*v.consciousnessCoherence).toFixed(1),"%"]}),(0,a.jsx)("div",{className:"w-full bg-gray-700 rounded-full h-1",children:(0,a.jsx)("div",{className:"bg-gradient-to-r from-green-500 to-blue-500 h-1 rounded-full transition-all duration-1000",style:{width:"".concat(100*v.consciousnessCoherence,"%")}})})]}),(0,a.jsxs)("div",{className:"bg-black/20 rounded-lg p-3",children:[(0,a.jsx)("div",{className:"text-xs text-purple-300 mb-1",children:"Breakthrough Potential"}),(0,a.jsxs)("div",{className:"text-lg font-bold text-white",children:[(100*v.breakthroughPotential).toFixed(1),"%"]}),(0,a.jsx)("div",{className:"w-full bg-gray-700 rounded-full h-1",children:(0,a.jsx)("div",{className:"h-1 rounded-full transition-all duration-1000 ".concat(v.breakthroughPotential>.8?"bg-gradient-to-r from-red-500 to-pink-500 animate-pulse":"bg-gradient-to-r from-purple-500 to-violet-500"),style:{width:"".concat(100*v.breakthroughPotential,"%")}})})]})]}),d&&(0,a.jsxs)("div",{className:"bg-black/20 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"text-sm text-purple-300 mb-3 flex items-center gap-2",children:["\ud83e\udde0 Live EEG Brainwaves",(0,a.jsx)("span",{className:"text-xs bg-green-500/20 text-green-400 px-2 py-1 rounded",children:d.consciousness_state.replace("_"," ").toUpperCase()})]}),(0,a.jsxs)("div",{className:"grid grid-cols-5 gap-2 text-xs",children:[(0,a.jsxs)("div",{className:"bg-black/30 rounded p-2 text-center",children:[(0,a.jsx)("div",{className:"text-gray-400",children:"\u03b4 Delta"}),(0,a.jsxs)("div",{className:"text-white font-mono text-sm",children:[(100*d.delta).toFixed(0),"%"]}),(0,a.jsx)("div",{className:"w-full bg-gray-700 rounded-full h-1 mt-1",children:(0,a.jsx)("div",{className:"bg-blue-500 h-1 rounded-full transition-all",style:{width:"".concat(100*d.delta,"%")}})})]}),(0,a.jsxs)("div",{className:"bg-black/30 rounded p-2 text-center",children:[(0,a.jsx)("div",{className:"text-gray-400",children:"\u03b8 Theta"}),(0,a.jsxs)("div",{className:"text-white font-mono text-sm",children:[(100*d.theta).toFixed(0),"%"]}),(0,a.jsx)("div",{className:"w-full bg-gray-700 rounded-full h-1 mt-1",children:(0,a.jsx)("div",{className:"bg-green-500 h-1 rounded-full transition-all",style:{width:"".concat(100*d.theta,"%")}})})]}),(0,a.jsxs)("div",{className:"bg-black/30 rounded p-2 text-center",children:[(0,a.jsx)("div",{className:"text-gray-400",children:"\u03b1 Alpha"}),(0,a.jsxs)("div",{className:"text-white font-mono text-sm",children:[(100*d.alpha).toFixed(0),"%"]}),(0,a.jsx)("div",{className:"w-full bg-gray-700 rounded-full h-1 mt-1",children:(0,a.jsx)("div",{className:"bg-purple-500 h-1 rounded-full transition-all",style:{width:"".concat(100*d.alpha,"%")}})})]}),(0,a.jsxs)("div",{className:"bg-black/30 rounded p-2 text-center",children:[(0,a.jsx)("div",{className:"text-gray-400",children:"\u03b2 Beta"}),(0,a.jsxs)("div",{className:"text-white font-mono text-sm",children:[(100*d.beta).toFixed(0),"%"]}),(0,a.jsx)("div",{className:"w-full bg-gray-700 rounded-full h-1 mt-1",children:(0,a.jsx)("div",{className:"bg-orange-500 h-1 rounded-full transition-all",style:{width:"".concat(100*d.beta,"%")}})})]}),(0,a.jsxs)("div",{className:"bg-black/30 rounded p-2 text-center",children:[(0,a.jsx)("div",{className:"text-gray-400",children:"\u03b3 Gamma"}),(0,a.jsxs)("div",{className:"text-white font-mono text-sm",children:[(100*d.gamma).toFixed(0),"%"]}),(0,a.jsx)("div",{className:"w-full bg-gray-700 rounded-full h-1 mt-1",children:(0,a.jsx)("div",{className:"bg-red-500 h-1 rounded-full transition-all",style:{width:"".concat(100*d.gamma,"%")}})})]})]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>r((e=>e?{...e,adaptiveMode:!e.adaptiveMode}:null)),className:"flex-1 py-2 px-3 rounded-lg text-sm transition-colors ".concat(s.adaptiveMode?"bg-green-500/20 text-green-400 border border-green-500/50":"bg-gray-500/20 text-gray-400 border border-gray-500/50"),children:s.adaptiveMode?"\ud83e\udde0 Biometric Adaptive":"\u2b55 Fixed Mode"}),(0,a.jsx)("button",{onClick:L,className:"flex-1 bg-purple-500/20 hover:bg-purple-500/40 text-purple-400 py-2 px-3 rounded-lg text-sm transition-colors",children:"Complete Session"})]})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[d&&(0,a.jsxs)("div",{className:"bg-black/20 rounded-lg p-4",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-purple-300 mb-3",children:"\ud83e\udde0 Live Consciousness Metrics"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs text-gray-400 mb-1",children:"Pineal Activation Index"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("div",{className:"text-lg font-bold text-white",children:[(100*v.pinealActivationIndex).toFixed(1),"%"]}),(0,a.jsx)("div",{className:"flex-1 bg-gray-700 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-gradient-to-r from-yellow-500 to-orange-500 h-2 rounded-full transition-all duration-1000",style:{width:"".concat(100*v.pinealActivationIndex,"%")}})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs text-gray-400 mb-1",children:"Third Eye Coherence"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("div",{className:"text-lg font-bold text-white",children:[(100*v.thirdEyeCoherence).toFixed(1),"%"]}),(0,a.jsx)("div",{className:"flex-1 bg-gray-700 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-gradient-to-r from-purple-500 to-violet-500 h-2 rounded-full transition-all duration-1000",style:{width:"".concat(100*v.thirdEyeCoherence,"%")}})})]})]})]}),(0,a.jsxs)("div",{className:"text-xs text-center text-gray-400",children:["Current State: ",(0,a.jsx)("span",{className:"text-white font-medium",children:d.consciousness_state.replace("_"," ")}),m&&(0,a.jsxs)(a.Fragment,{children:[" "," | HRV Coherence: ",(0,a.jsxs)("span",{className:"text-white font-medium",children:[(100*m.coherence).toFixed(0),"%"]})," "," | HR: ",(0,a.jsxs)("span",{className:"text-white font-medium",children:[m.heart_rate.toFixed(0)," BPM"]})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-purple-300 mb-3",children:["Meditation Intensity ",d&&(0,a.jsx)("span",{className:"text-xs text-gray-400",children:"(with real-time biometric adaptation)"})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 gap-2 max-h-60 overflow-y-auto",children:Object.entries(C).map((e=>{let[t,s]=e;return(0,a.jsx)("button",{onClick:()=>o(t),className:"text-left p-3 rounded-lg transition-all ".concat(i===t?"bg-gradient-to-r from-purple-500/20 to-blue-500/20 border border-purple-400":"bg-white/5 hover:bg-white/10 border border-transparent"),children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"font-medium text-white text-sm",children:s.name}),(0,a.jsx)("div",{className:"text-xs text-gray-400",children:s.description}),d&&(0,a.jsxs)("div",{className:"text-xs text-purple-300 mt-1",children:["Target: \u03b8",(100*s.eeg_target.theta).toFixed(0),"% \u03b1",(100*s.eeg_target.alpha).toFixed(0),"%",s.eeg_target.gamma&&"\u03b3".concat((100*s.eeg_target.gamma).toFixed(0),"%")]})]}),(0,a.jsx)("div",{className:"flex space-x-1",children:Array.from({length:7},((e,t)=>(0,a.jsx)("div",{className:"w-1 h-4 rounded-full ".concat(t<Math.floor(7*s.intensity)?"bg-gradient-to-t from-purple-500 to-blue-400":"bg-gray-600")},t)))})]})},t)}))})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-purple-300 mb-2",children:["Duration: ",l," minutes"]}),(0,a.jsx)("input",{type:"range",min:"5",max:"120",value:l,onChange:e=>c(parseInt(e.target.value)),className:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer slider"}),(0,a.jsxs)("div",{className:"flex justify-between text-xs text-gray-400 mt-1",children:[(0,a.jsx)("span",{children:"5 min"}),(0,a.jsx)("span",{children:"60 min"}),(0,a.jsx)("span",{children:"120 min"})]})]}),(0,a.jsx)("button",{onClick:async()=>{if(!g)return void(()=>{if(g)return;const e=new AudioContext,t=e.createGain();t.connect(e.destination),t.gain.value=.15,b(e),_.current=t})();const e=C[i],t={id:"realtime_meditation_".concat(Date.now()),userId:"realtime_user",intensity:i,duration:l,startTime:Date.now(),frequency:e.frequencies,sacredGeometry:{pattern:"golden_spiral",modulation:e.intensity,harmonics:I(e.frequencies,{pattern:"golden_spiral",modulation:e.intensity,harmonics:[]})},adaptiveMode:!0,breakthroughDetection:!0,status:"preparing",realTimeBiometrics:u.eeg_connected||u.hrv_connected};r(t);try{const e=await y.createSession({userId:t.userId,intensity:t.intensity,duration:t.duration,adaptiveMode:t.adaptiveMode,breakthroughDetection:t.breakthroughDetection,sacredGeometry:t.sacredGeometry.pattern});console.log("\u2705 MAIA session created:",e.id),t.realTimeBiometrics&&await S.integrateWithMeditationSession(e.id)}catch(a){console.error("\u274c Failed to create MAIA session:",a)}await H(t),setTimeout((()=>{(null===s||void 0===s?void 0:s.id)===t.id&&r((e=>e?{...e,status:"active"}:null))}),3e3),setTimeout((()=>{(null===s||void 0===s?void 0:s.id)===t.id&&L()}),60*l*1e3)},disabled:!g&&!window.AudioContext,className:"w-full bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 disabled:from-gray-600 disabled:to-gray-700 text-white font-medium py-3 px-4 rounded-lg transition-all transform hover:scale-105 disabled:scale-100",children:!g&&window.AudioContext?"Initialize Audio System":u.eeg_connected?"Start Biometric-Guided Meditation":"Start Sacred Meditation (Simulation Mode)"}),(0,a.jsx)("div",{className:"text-xs text-center text-gray-400",children:u.eeg_connected?"\ud83e\udde0 Real-time EEG feedback will guide your session intensity":"\u26a0\ufe0f Connect OpenBCI headset for real-time biometric guidance"})]})]})}function C(e){let{service:t}=e;const[s,r]=(0,n.useState)(null),[i,o]=(0,n.useState)(null),[l,c]=(0,n.useState)(!1);(0,n.useEffect)((()=>{const e=t.getActiveProtocol();o(e);const s=e=>o(e),a=()=>o(null);return t.on("protocolStarted",s),t.on("protocolStopped",a),()=>{t.off("protocolStarted",s),t.off("protocolStopped",a)}}),[t]);const d=e=>{switch(e){case"gentle":return"text-green-400 bg-green-500/20 border-green-500/50";case"moderate":return"text-yellow-400 bg-yellow-500/20 border-yellow-500/50";case"intense":return"text-orange-400 bg-orange-500/20 border-orange-500/50";case"advanced":return"text-red-400 bg-red-500/20 border-red-500/50";default:return"text-gray-400 bg-gray-500/20 border-gray-500/50"}},h=e=>{switch(e){case"consciousness_expansion":return"\ud83e\udde0";case"sacred_geometry":return"\ud83d\udd2f";case"breakthrough_cultivation":return"\u26a1";case"field_harmonization":return"\ud83c\udf00";case"quantum_coherence":return"\u269b\ufe0f";default:return"\ud83e\uddd8"}};return(0,a.jsxs)("div",{className:"bg-black/30 backdrop-blur-sm border border-purple-500/30 rounded-xl p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:"\ud83d\udd2e Meditation Invitations"}),i&&(0,a.jsx)("button",{onClick:async()=>{try{await t.stopProtocol()}catch(e){console.error("Failed to stop protocol:",e)}},className:"bg-red-500/20 hover:bg-red-500/40 text-red-400 px-3 py-1 rounded-lg text-sm transition-colors",children:"Stop Active Protocol"})]}),i?(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)("div",{className:"bg-gradient-to-r from-purple-500/20 to-blue-500/20 border border-purple-400/50 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("h4",{className:"font-medium text-white flex items-center gap-2",children:[h(i.meditationType||""),i.name]}),(0,a.jsx)("span",{className:"text-xs px-2 py-1 rounded-full border ".concat(d(i.safetyLevel)),children:i.safetyLevel.toUpperCase()})]}),(0,a.jsx)("p",{className:"text-sm text-gray-300 mb-3",children:i.description}),i.frequencyProfile&&(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[(0,a.jsxs)("div",{className:"bg-black/20 rounded-lg p-3",children:[(0,a.jsx)("h5",{className:"text-sm font-medium text-purple-300 mb-2",children:"Frequency Profile"}),(0,a.jsxs)("div",{className:"space-y-1 text-xs",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Carrier:"}),(0,a.jsxs)("span",{className:"text-white",children:[i.frequencyProfile.carrier,"Hz"]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Binaural:"}),(0,a.jsxs)("span",{className:"text-white",children:[i.frequencyProfile.binaural,"Hz"]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Sacred:"}),(0,a.jsxs)("span",{className:"text-white",children:[i.frequencyProfile.sacred,"Hz"]})]})]})]}),(0,a.jsxs)("div",{className:"bg-black/20 rounded-lg p-3",children:[(0,a.jsx)("h5",{className:"text-sm font-medium text-purple-300 mb-2",children:"Qualities"}),(0,a.jsxs)("div",{className:"space-y-1 text-xs",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Deep Calm:"}),(0,a.jsxs)("span",{className:"text-white",children:[(100*i.qualities.deep_calm).toFixed(0),"%"]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Clear Awareness:"}),(0,a.jsxs)("span",{className:"text-white",children:[(100*i.qualities.clear_awareness).toFixed(0),"%"]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Heart Coherence:"}),(0,a.jsxs)("span",{className:"text-white",children:[(100*i.qualities.heart_coherence).toFixed(0),"%"]})]})]})]})]}),(0,a.jsx)("div",{className:"mt-4 pt-3 border-t border-purple-500/20",children:(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsxs)("span",{className:"text-gray-400",children:["Duration: ",i.duration," minutes"]}),(0,a.jsxs)("span",{className:"text-gray-400",children:["Intensity: ",(100*i.intensity).toFixed(0),"%"]})]})})]})}):(0,a.jsx)("div",{className:"space-y-4",children:s?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("button",{onClick:()=>r(null),className:"text-purple-400 hover:text-purple-300 text-sm flex items-center gap-1",children:"\u2190 Back to Protocols"}),(0,a.jsxs)("div",{className:"bg-black/20 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("h4",{className:"font-medium text-white flex items-center gap-2",children:[h(s.meditationType),s.name]}),(0,a.jsx)("span",{className:"text-xs px-2 py-1 rounded-full border ".concat(d(s.safetyLevel)),children:s.safetyLevel.toUpperCase()})]}),(0,a.jsx)("p",{className:"text-sm text-gray-300 mb-4",children:s.description}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,a.jsxs)("div",{className:"bg-black/20 rounded-lg p-3",children:[(0,a.jsx)("h5",{className:"text-sm font-medium text-purple-300 mb-2",children:"Frequency Profile"}),(0,a.jsxs)("div",{className:"space-y-2 text-xs",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Carrier Frequency:"}),(0,a.jsxs)("span",{className:"text-white",children:[s.frequencyProfile.carrier,"Hz"]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Binaural Beat:"}),(0,a.jsxs)("span",{className:"text-white",children:[s.frequencyProfile.binaural,"Hz"]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Sacred Frequency:"}),(0,a.jsxs)("span",{className:"text-white",children:[s.frequencyProfile.sacred,"Hz"]})]}),(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Harmonics:"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1 mt-1",children:s.frequencyProfile.harmonic.map(((e,t)=>(0,a.jsxs)("span",{className:"text-xs bg-purple-500/20 text-purple-300 px-1 rounded",children:[e,"Hz"]},t)))})]})]})]}),(0,a.jsxs)("div",{className:"bg-black/20 rounded-lg p-3",children:[(0,a.jsx)("h5",{className:"text-sm font-medium text-purple-300 mb-2",children:"Qualities"}),(0,a.jsx)("div",{className:"space-y-2",children:Object.entries(s.qualities).map((e=>{let[t,s]=e;return(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("span",{className:"text-xs text-gray-400 capitalize",children:[t.replace("_"," "),":"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-16 bg-gray-700 rounded-full h-1",children:(0,a.jsx)("div",{className:"bg-gradient-to-r from-purple-500 to-blue-500 h-1 rounded-full",style:{width:"".concat(100*s,"%")}})}),(0,a.jsxs)("span",{className:"text-xs text-white w-8",children:[(100*s).toFixed(0),"%"]})]})]},t)}))})]})]}),s.adaptiveFeatures.length>0&&(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("h5",{className:"text-sm font-medium text-purple-300 mb-2",children:"Adaptive Features"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:s.adaptiveFeatures.map(((e,t)=>(0,a.jsxs)("span",{className:"text-xs bg-green-500/20 text-green-300 px-2 py-1 rounded-full",children:["\u2728 ",e]},t)))})]}),s.considerations.length>0&&(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("h5",{className:"text-sm font-medium text-amber-300 mb-2",children:"Considerations"}),(0,a.jsx)("div",{className:"bg-amber-500/10 border border-amber-500/30 rounded-lg p-3",children:(0,a.jsx)("ul",{className:"text-xs text-amber-200 space-y-1",children:s.considerations.map(((e,t)=>(0,a.jsxs)("li",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-amber-400",children:"\ud83d\udcad"}),e]},t)))})})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center text-sm text-gray-400 mb-4",children:[(0,a.jsxs)("span",{children:["Duration: ",s.duration," minutes"]}),(0,a.jsxs)("span",{children:["Sacred Pattern: ",s.sacredPattern.replace("_"," ")]}),(0,a.jsxs)("span",{children:["Intensity: ",(100*s.intensity).toFixed(0),"%"]})]}),(0,a.jsxs)("button",{onClick:()=>(async e=>{try{await t.startProtocol(e),r(null)}catch(s){console.error("Failed to start meditation protocol:",s)}})(s),className:"w-full bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white font-medium py-3 px-4 rounded-lg transition-all transform hover:scale-105",children:["Initiate ",s.name]})]})]}):(0,a.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:[{id:"opening_cascade",name:"Opening Cascade",category:"meditation",intensity:.9,duration:45,description:"An invitation to deep opening - what emerges when different parts of you synchronize?",safetyLevel:"advanced",meditationType:"consciousness_expansion",sacredPattern:"golden_spiral",frequencyProfile:{carrier:528,binaural:40,sacred:741,harmonic:[528,741,852,963,1074]},qualities:{deep_calm:.7,clear_awareness:.9,heart_coherence:.8,field_connection:.85},adaptiveFeatures:["Real-time EEG adaptation","HRV coherence optimization","Breakthrough cascade triggering","Sacred geometry frequency modulation"],considerations:["May not be suitable if you have seizure sensitivity","Could feel intense if anxiety is very active","Best to wait after recent psychedelic experience (48h)","Check with your body if pregnant"]},{id:"sacred_geometry_immersion",name:"Sacred Geometry Immersion",category:"meditation",intensity:.7,duration:30,description:"Deep meditation enhanced with golden ratio and Fibonacci frequency patterns",safetyLevel:"moderate",meditationType:"sacred_geometry",sacredPattern:"fibonacci",frequencyProfile:{carrier:432,binaural:6.3,sacred:528,harmonic:[432,540,675,810,1012.5]},qualities:{deep_calm:.8,clear_awareness:.4,heart_coherence:.9,field_connection:.7},adaptiveFeatures:["Golden ratio timing cycles","Fibonacci harmonic progression","Sacred pattern visualization sync","Field geometry optimization"],considerations:["May be difficult with hearing sensitivity","Consider if you have tinnitus"]},{id:"quantum_coherence_protocol",name:"Quantum Coherence Protocol",category:"meditation",intensity:.95,duration:60,description:"An invitation into profound stillness - exploring what emerges in the deepest quietude",safetyLevel:"advanced",meditationType:"quantum_coherence",sacredPattern:"merkaba",frequencyProfile:{carrier:963,binaural:.1,sacred:1618,harmonic:[.1,.5,1.618,2.618,4.236]},qualities:{deep_calm:.95,clear_awareness:.6,heart_coherence:.9,field_connection:.9},adaptiveFeatures:["Quantum epsilon frequencies","Ultra-slow brainwave entrainment","Consciousness field coupling","Non-local awareness cultivation"],considerations:["May feel intense with heart sensitivities","Check with your body if on blood pressure medication","Best to wait after recent head trauma","May not feel grounding if dissociation is present"]},{id:"breakthrough_cultivation",name:"Breakthrough Cultivation",category:"meditation",intensity:.85,duration:40,description:"An invitation to what wants to emerge - supporting natural moments of opening and integration",safetyLevel:"intense",meditationType:"breakthrough_cultivation",sacredPattern:"flower_of_life",frequencyProfile:{carrier:741,binaural:89,sacred:852,harmonic:[89,178,356,741,852]},qualities:{deep_calm:.7,clear_awareness:.85,heart_coherence:.75,field_connection:.8},adaptiveFeatures:["Breakthrough threshold detection","Integration phase transitions","Wisdom crystallization support","Pattern recognition enhancement"],considerations:["May feel overwhelming if emotions are very unstable","Check with your inner wisdom if you have history with psychosis","May not feel safe if trauma is very fresh or intense"]},{id:"field_harmonization",name:"Field Harmonization",category:"meditation",intensity:.6,duration:25,description:"A gentle invitation to field coherence - feeling into the natural harmony that wants to emerge",safetyLevel:"gentle",meditationType:"field_harmonization",sacredPattern:"sri_yantra",frequencyProfile:{carrier:432,binaural:4.5,sacred:528,harmonic:[108,216,432,528,639]},qualities:{deep_calm:.8,clear_awareness:.6,heart_coherence:.8,field_connection:.95},adaptiveFeatures:["Torus field stabilization","Coherence field optimization","Gentle frequency transitions","Field symmetry enhancement"],considerations:[]}].map((e=>(0,a.jsxs)("button",{onClick:()=>r(e),className:"w-full text-left bg-black/20 hover:bg-black/40 border border-purple-500/20 hover:border-purple-400/50 rounded-lg p-4 transition-all",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("h4",{className:"font-medium text-white flex items-center gap-2",children:[h(e.meditationType),e.name]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-xs px-2 py-1 rounded-full border ".concat(d(e.safetyLevel)),children:e.safetyLevel}),(0,a.jsxs)("span",{className:"text-xs text-gray-400",children:[e.duration,"min"]})]})]}),(0,a.jsx)("p",{className:"text-sm text-gray-400 mb-2",children:e.description}),(0,a.jsxs)("div",{className:"flex justify-between text-xs text-gray-500",children:[(0,a.jsxs)("span",{children:["Sacred Pattern: ",e.sacredPattern.replace("_"," ")]}),(0,a.jsxs)("span",{children:["Intensity: ",(100*e.intensity).toFixed(0),"%"]})]})]},e.id)))})})]})}function D(e){let{service:t,meditationActive:s=!1,selectedGeometry:r}=e;const i=(0,n.useRef)(null),o=(0,n.useRef)(),[l,c]=(0,n.useState)(null),[d,h]=(0,n.useState)(null),[m,x]=(0,n.useState)("golden_spiral"),[u,p]=(0,n.useState)(.5),[g,b]=(0,n.useState)([]),y={golden_spiral:{id:"golden_spiral",name:"Golden Spiral",description:"Phi ratio spiral pattern for consciousness expansion",frequency:1.618,complexity:.8,resonance:.7,active:!1},flower_of_life:{id:"flower_of_life",name:"Flower of Life",description:"Sacred geometric foundation pattern",frequency:2,complexity:.9,resonance:.8,active:!1},fibonacci:{id:"fibonacci",name:"Fibonacci Sequence",description:"Natural growth pattern visualization",frequency:1.414,complexity:.6,resonance:.6,active:!1},sri_yantra:{id:"sri_yantra",name:"Sri Yantra",description:"Ancient consciousness mapping geometry",frequency:3,complexity:1,resonance:.9,active:!1},merkaba:{id:"merkaba",name:"Merkaba",description:"Star tetrahedron consciousness vehicle",frequency:2.618,complexity:.85,resonance:.75,active:!1},torus_field:{id:"torus_field",name:"Consciousness Torus",description:"Living field dynamics visualization",frequency:1,complexity:.7,resonance:.8,active:!1}};(0,n.useEffect)((()=>{const e=e=>c(e),s=e=>h(e);return t.on("fieldUpdate",e),t.on("eegUpdate",s),()=>{t.off("fieldUpdate",e),t.off("eegUpdate",s)}}),[t]),(0,n.useEffect)((()=>{r&&y[r]&&x(r)}),[r]),(0,n.useEffect)((()=>{if(l&&d){const e=v(l,d,m);b(e);const t=(d.theta+d.alpha+l.torus.coherence)/3;p(Math.max(.2,t))}}),[l,d,m]),(0,n.useEffect)((()=>{const e=()=>{f(),o.current=requestAnimationFrame(e)};return e(),()=>{o.current&&cancelAnimationFrame(o.current)}}),[g,u,m]);const v=(e,t,s)=>{const a=[],n=150,r=150,i=1.6180339887;switch(s){case"golden_spiral":for(let d=0;d<100;d++){const s=.137508*d,o=3*Math.sqrt(d),l=n+o*Math.cos(s),c=r+o*Math.sin(s);a.push({x:l,y:c,energy:e.torus.flow*(1-d/100)+.3*t.theta,frequency:i*(1+d/50),phase:(.1*d+.001*Date.now())%(2*Math.PI)})}break;case"flower_of_life":const s=30;for(let i=0;i<3;i++){const o=0===i?1:6*i;for(let l=0;l<o;l++){const c=l/o*2*Math.PI,d=i*s*Math.sqrt(3)/2,h=n+d*Math.cos(c),m=r+d*Math.sin(c);for(let s=0;s<12;s++){const n=s/12*2*Math.PI,r=15*e.torus.symmetry;a.push({x:h+r*Math.cos(n),y:m+r*Math.sin(n),energy:e.torus.coherence*(1-i/3)+.4*t.alpha,frequency:2+.5*i,phase:(.5*s+.3*i+.001*Date.now())%(2*Math.PI)})}}}break;case"fibonacci":const o=[1,1,2,3,5,8,13,21,34,55];for(let i=0;i<o.length;i++){const s=o[i],l=2.399963*i,c=2*s;for(let d=0;d<2*s;d++){const h=l+d/(2*s)*2*Math.PI,m=n+c*Math.cos(h),x=r+c*Math.sin(h);a.push({x:m,y:x,energy:e.torus.flow*(1-i/o.length)+.2*t.gamma,frequency:1.414*(1+i/5),phase:(.1*d+.2*i+.001*Date.now())%(2*Math.PI)})}}break;case"sri_yantra":const l=[{direction:1,size:80,rotation:0},{direction:-1,size:75,rotation:0},{direction:1,size:60,rotation:15},{direction:-1,size:55,rotation:15},{direction:1,size:40,rotation:30},{direction:-1,size:35,rotation:30},{direction:1,size:20,rotation:45},{direction:-1,size:15,rotation:45},{direction:1,size:10,rotation:60}];l.forEach(((s,i)=>{for(let o=0;o<3;o++){const c=(120*o+s.rotation)*Math.PI/180,d=n+s.size*Math.cos(c),h=r+s.size*Math.sin(c)*s.direction;a.push({x:d,y:h,energy:e.torus.coherence*(1-i/l.length)+.5*t.theta,frequency:3+.1*i,phase:(2.09*o+.5*i+.001*Date.now())%(2*Math.PI)})}}));break;case"merkaba":const c=[{x:0,y:-60,z:0},{x:-52,y:30,z:0},{x:52,y:30,z:0},{x:0,y:0,z:60}];c.forEach(((s,o)=>{const l=.001*Date.now()*i,c=n+s.x*Math.cos(l)-s.z*Math.sin(l),d=r+s.y;a.push({x:c,y:d,energy:e.torus.flow+.6*t.gamma,frequency:2.618,phase:(1.57*o+l)%(2*Math.PI)})})),c.forEach(((s,o)=>{const l=.001*-Date.now()*i,c=n-s.x*Math.cos(l)+s.z*Math.sin(l),d=r-s.y;a.push({x:c,y:d,energy:e.torus.symmetry+.4*t.alpha,frequency:2.618*i,phase:(1.57*o-l)%(2*Math.PI)})}));break;default:for(let i=0;i<8;i++){const s=12+4*i,o=20+12*i;for(let l=0;l<s;l++){const c=l/s*2*Math.PI,d=e.torus.flow*Math.sin(3*c+.002*Date.now())*5,h=n+(o+d)*Math.cos(c),m=r+(o+d)*Math.sin(c);a.push({x:h,y:m,energy:e.torus.coherence*(1-i/8)+.3*t.alpha,frequency:1+.1*i,phase:(c+.5*i+.001*Date.now())%(2*Math.PI)})}}}return a},f=()=>{const e=i.current;if(!e)return;const t=e.getContext("2d");if(t&&(t.fillStyle="rgba(0, 0, 0, 0.1)",t.fillRect(0,0,e.width,e.height),t.lineCap="round",t.lineJoin="round",g.forEach(((e,s)=>{const a=Math.max(.1,Math.min(1,e.energy*u)),n=1+.3*Math.sin(e.phase),r=(60*e.frequency+.1*Date.now())%360,i=60+40*a,o=30+40*a;t.fillStyle="hsla(".concat(r,", ").concat(i,"%, ").concat(o,"%, ").concat(a,")"),t.strokeStyle="hsla(".concat(r+30,", ").concat(i+20,"%, ").concat(o+20,"%, ").concat(.8*a,")"),t.beginPath(),t.arc(e.x,e.y,1+3*e.energy*n,0,2*Math.PI),t.fill(),a>.5&&(t.beginPath(),t.arc(e.x,e.y,3+6*e.energy*n,0,2*Math.PI),t.strokeStyle="hsla(".concat(r,", ").concat(i,"%, ").concat(o,"%, ").concat(.3*a,")"),t.lineWidth=1,t.stroke())})),"flower_of_life"!==m&&"sri_yantra"!==m||j(t),l)){const s=e.width/2,a=e.height/2,n=l.torus.coherence*u,r=5+10*n;t.fillStyle="hsla(280, 70%, 60%, ".concat(n,")"),t.strokeStyle="hsla(280, 90%, 80%, ".concat(.8*n,")"),t.lineWidth=2,t.beginPath(),t.arc(s,a,r,0,2*Math.PI),t.fill(),t.stroke()}},j=e=>{if(!(g.length<2)){e.strokeStyle="rgba(147, 51, 234, ".concat(.3*u,")"),e.lineWidth=1;for(let t=0;t<g.length;t+=3)for(let s=t+1;s<Math.min(g.length,t+6);s+=2){const a=g[t],n=g[s];if(Math.sqrt(Math.pow(a.x-n.x,2)+Math.pow(a.y-n.y,2))<50&&a.energy+n.energy>.7){const t=Math.max(.1,(a.energy+n.energy)/2*u);e.strokeStyle="rgba(147, 51, 234, ".concat(.5*t,")"),e.beginPath(),e.moveTo(a.x,a.y),e.lineTo(n.x,n.y),e.stroke()}}}},N=()=>y[m];return(0,a.jsxs)("div",{className:"bg-black/30 backdrop-blur-sm border border-purple-500/30 rounded-xl p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:["\ud83d\udd2f Sacred Geometry Field",s&&(0,a.jsx)("span",{className:"text-xs bg-green-500/20 text-green-400 px-2 py-1 rounded-full",children:"Meditation Active"})]}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)("select",{value:m,onChange:e=>x(e.target.value),className:"text-xs bg-black/50 text-white border border-purple-500/30 rounded px-2 py-1",children:Object.values(y).map((e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id)))})})]}),(0,a.jsx)("div",{className:"bg-black/20 rounded-lg p-4 mb-4",children:(0,a.jsx)("canvas",{ref:i,width:300,height:300,className:"w-full h-48 border border-purple-500/20 rounded-lg",style:{background:"radial-gradient(circle at center, rgba(30, 0, 50, 0.3) 0%, rgba(0, 0, 0, 0.8) 100%)"}})}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"bg-black/20 rounded-lg p-3",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-purple-300 mb-2",children:N().name}),(0,a.jsx)("p",{className:"text-xs text-gray-400 mb-2",children:N().description}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-3 text-xs",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Frequency:"}),(0,a.jsxs)("div",{className:"text-white font-mono",children:[N().frequency.toFixed(3),"Hz"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Complexity:"}),(0,a.jsxs)("div",{className:"text-white font-mono",children:[(100*N().complexity).toFixed(0),"%"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Resonance:"}),(0,a.jsxs)("div",{className:"text-white font-mono",children:[(100*N().resonance).toFixed(0),"%"]})]})]})]}),l&&(0,a.jsxs)("div",{className:"bg-black/20 rounded-lg p-3",children:[(0,a.jsx)("h5",{className:"text-xs font-medium text-purple-300 mb-2",children:"Field Dynamics"}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-gray-400",children:"Coherence"}),(0,a.jsxs)("div",{className:"text-white font-mono",children:[(100*l.torus.coherence).toFixed(0),"%"]})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-gray-400",children:"Symmetry"}),(0,a.jsxs)("div",{className:"text-white font-mono",children:[(100*l.torus.symmetry).toFixed(0),"%"]})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-gray-400",children:"Flow"}),(0,a.jsxs)("div",{className:"text-white font-mono",children:[(100*l.torus.flow).toFixed(0),"%"]})]})]})]}),(0,a.jsxs)("div",{className:"bg-black/20 rounded-lg p-3",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,a.jsx)("span",{className:"text-xs text-purple-300",children:"Pattern Intensity"}),(0,a.jsxs)("span",{className:"text-xs text-white font-mono",children:[(100*u).toFixed(0),"%"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-700 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-gradient-to-r from-purple-500 to-blue-500 h-2 rounded-full transition-all duration-500",style:{width:"".concat(100*u,"%")}})})]})]})]})}var E=s(47428),M=s(14820),A=s(5095),F=s(97226),R=s(42488),T=s(64972),P=s(96215),I=s(48662),H=s(33276),q=s(89227),L=s(61094),z=s(82431),U=s(82023),O=s(83229),B=s(28124),G=s(11239),V=s(58896),Z=s(88997),W=s(62926),Q=s(26208),K=s(33388),J=s(85673),X=s(70525),Y=s(3085),$=s(21047),ee=s(17689),te=s(77265),se=s(85929),ae=s(49322),ne=s(92934);const re=new class{async parseHealthXML(e){console.log("\ud83d\udcca File size:",(e.length/1048576).toFixed(2),"MB"),console.log("\ud83d\ude80 Using optimized regex-based extraction (skipping full XML parse)");const t=this.extractHRVFast(e),s=this.extractHeartRateFast(e),a=this.extractSleepFast(e),n=this.extractRespiratoryFast(e);return console.log("\ud83d\udc93 Extracted metrics:",{hrv:t.length,heartRate:s.length,sleep:a.length,respiratory:n.length}),{hrv:t,heartRate:s,sleep:a,respiratory:n,rawRecords:[]}}extractHRVFast(e){const t=/<Record\s+type="HKQuantityTypeIdentifierHeartRateVariabilitySDNN"[^>]*>/g,s=[];let a,n=0;for(;null!==(a=t.exec(e))&&n<1e3;){const e=a[0],t=e.match(/value="([^"]+)"/),r=e.match(/sourceName="([^"]+)"/),i=e.match(/startDate="([^"]+)"/),o=e.match(/endDate="([^"]+)"/);if(t&&i&&o){const e=parseFloat(t[1]),a=r?r[1]:"Unknown",l=new Date(i[1]),c=new Date(o[1]);isNaN(e)||(s.push({value:e,sourceName:a,startDate:l,endDate:c}),n++)}}return console.log("\ud83d\udc93 Extracted ".concat(s.length," HRV readings")),s.sort(((e,t)=>t.startDate.getTime()-e.startDate.getTime()))}extractHeartRateFast(e){const t=/<Record\s+type="HKQuantityTypeIdentifierHeartRate"[^>]*value="([^"]+)"[^>]*startDate="([^"]+)"[^>]*endDate="([^"]+)"[^>]*>/g,s=[];let a,n=0;for(;null!==(a=t.exec(e))&&n<1e3;){const e=parseFloat(a[1]),t=new Date(a[2]),r=new Date(a[3]);isNaN(e)||(s.push({value:e,startDate:t,endDate:r}),n++)}return s.sort(((e,t)=>t.startDate.getTime()-e.startDate.getTime()))}extractSleepFast(e){const t=/<Record\s+type="HKCategoryTypeIdentifierSleepAnalysis"[^>]*startDate="([^"]+)"[^>]*endDate="([^"]+)"[^>]*\/>/g,s=[];let a,n=0;for(;null!==(a=t.exec(e))&&n<100;){const e=new Date(a[1]),t=new Date(a[2]),r=(t.getTime()-e.getTime())/36e5;s.push({startDate:e,endDate:t,durationHours:r}),n++}return s.sort(((e,t)=>t.startDate.getTime()-e.startDate.getTime()))}extractRespiratoryFast(e){const t=/<Record\s+type="HKQuantityTypeIdentifierRespiratoryRate"[^>]*value="([^"]+)"[^>]*startDate="([^"]+)"[^>]*endDate="([^"]+)"[^>]*\/>/g,s=[];let a,n=0;for(;null!==(a=t.exec(e))&&n<500;){const e=parseFloat(a[1]),t=new Date(a[2]),r=new Date(a[3]);isNaN(e)||(s.push({value:e,startDate:t,endDate:r}),n++)}return s.sort(((e,t)=>t.startDate.getTime()-e.startDate.getTime()))}async parseHealthXMLFull(e){const t=(new DOMParser).parseFromString(e,"text/xml"),s=[],a=t.querySelectorAll("Record");if(console.log("\ud83d\udcca Found ".concat(a.length," health records in export")),0===a.length)throw new Error("No health records found. Make sure you uploaded the complete export.xml file.");const n=new Set;a.forEach((e=>{const t=e.getAttribute("type")||"";n.add(t);const a=e.getAttribute("value")||"",r=e.getAttribute("unit")||"",i=e.getAttribute("sourceName")||"",o=e.getAttribute("sourceVersion")||void 0,l=e.getAttribute("device")||void 0,c=this.parseAppleDate(e.getAttribute("creationDate")||""),d=this.parseAppleDate(e.getAttribute("startDate")||""),h=this.parseAppleDate(e.getAttribute("endDate")||""),m={};e.querySelectorAll("MetadataEntry").forEach((e=>{const t=e.getAttribute("key")||"",s=e.getAttribute("value")||"";t&&(m[t]=s)})),s.push({type:t,value:a,unit:r,sourceName:i,sourceVersion:o,device:l,creationDate:c,startDate:d,endDate:h,metadata:Object.keys(m).length>0?m:void 0})})),console.log("\ud83d\udccb Found ".concat(n.size," unique record types:"),Array.from(n).slice(0,10));const r=this.extractHRV(s),i=this.extractHeartRate(s),o=this.extractSleep(s),l=this.extractRespiratory(s);return console.log("\ud83d\udc93 Extracted metrics:",{hrv:r.length,heartRate:i.length,sleep:o.length,respiratory:l.length}),{hrv:r,heartRate:i,sleep:o,respiratory:l,rawRecords:s}}extractHRV(e){return e.filter((e=>"HKQuantityTypeIdentifierHeartRateVariabilitySDNN"===e.type)).map((e=>({value:parseFloat(e.value),startDate:e.startDate,endDate:e.endDate,sourceName:e.sourceName}))).filter((e=>!isNaN(e.value))).sort(((e,t)=>t.startDate.getTime()-e.startDate.getTime()))}extractHeartRate(e){return e.filter((e=>"HKQuantityTypeIdentifierHeartRate"===e.type)).map((e=>{var t;let s;return"HKHeartRateMotionContextNotSet"===(null===(t=e.metadata)||void 0===t?void 0:t.HKMetadataKeyHeartRateMotionContext)&&(s="resting"),{value:parseFloat(e.value),startDate:e.startDate,endDate:e.endDate,context:s}})).filter((e=>!isNaN(e.value))).sort(((e,t)=>t.startDate.getTime()-e.startDate.getTime()))}extractSleep(e){const t=e.filter((e=>"HKCategoryTypeIdentifierSleepAnalysis"===e.type)),s=[];let a=null;return t.forEach((e=>{const t=(e.endDate.getTime()-e.startDate.getTime())/36e5;!a||e.startDate.getTime()-a.endDate.getTime()>432e5?(a={startDate:e.startDate,endDate:e.endDate,durationHours:t,stages:{}},s.push(a)):(a.endDate=e.endDate,a.durationHours+=t);const n=e.value;"HKCategoryValueSleepAnalysisAsleepREM"===n?a.stages.rem=(a.stages.rem||0)+t:"HKCategoryValueSleepAnalysisAsleepCore"===n?a.stages.core=(a.stages.core||0)+t:"HKCategoryValueSleepAnalysisAsleepDeep"===n?a.stages.deep=(a.stages.deep||0)+t:"HKCategoryValueSleepAnalysisAwake"===n&&(a.stages.awake=(a.stages.awake||0)+t)})),s.sort(((e,t)=>t.startDate.getTime()-e.startDate.getTime()))}extractRespiratory(e){return e.filter((e=>"HKQuantityTypeIdentifierRespiratoryRate"===e.type)).map((e=>({value:parseFloat(e.value),startDate:e.startDate,endDate:e.endDate}))).filter((e=>!isNaN(e.value))).sort(((e,t)=>t.startDate.getTime()-e.startDate.getTime()))}parseAppleDate(e){return e?new Date(e):new Date}getMostRecentHRV(e){return e.hrv[0]||null}getHRVInWindow(e,t,s){return e.hrv.filter((e=>e.startDate>=t&&e.startDate<=s))}getAverageHRV(e,t,s){const a=this.getHRVInWindow(e,t,s);if(0===a.length)return null;return a.reduce(((e,t)=>e+t.value),0)/a.length}getLastNightSleep(e){return e.sleep[0]||null}calculateReadiness(e){const t=this.getMostRecentHRV(e),s=this.getLastNightSleep(e),a=e.heartRate.find((e=>"resting"===e.context));let n=50;var r;(t&&(t.value>60?n+=40:t.value>40?n+=30:t.value>25?n+=20:n+=10),s)&&(s.durationHours>7?n+=20:s.durationHours>6?n+=15:n+=5,(null===(r=s.stages)||void 0===r?void 0:r.deep)&&s.stages.deep>1.5&&(n+=10));return a&&(a.value<55?n+=20:a.value<65?n+=15:a.value<75?n+=10:n+=5),Math.min(100,Math.max(0,n))}};var ie=s(88166);const oe=new class{start(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e4;this.pollingInterval?console.warn("\u26a0\ufe0f Biometric service already started"):(console.log("\ud83d\udc93 Starting real-time biometric service"),this.checkForUpdates(),this.pollingInterval=setInterval((()=>{this.checkForUpdates()}),e))}stop(){this.pollingInterval&&(clearInterval(this.pollingInterval),this.pollingInterval=null,console.log("\ud83d\udca4 Stopped biometric service"))}subscribe(e){return this.listeners.push(e),this.lastUpdate&&e(this.lastUpdate),()=>{this.listeners=this.listeners.filter((t=>t!==e))}}getLatest(){return this.lastUpdate}async checkForUpdates(){if(!this.isPolling){this.isPolling=!0;try{if(!(await ie.biometricStorage.hasHealthData()))return void(this.isPolling=!1);const e=await ie.biometricStorage.getLatestHealthData();if(!e)return void(this.isPolling=!1);const t=e.hrv[0],s=e.heartRate.find((e=>"resting"===e.context))||e.heartRate[0],a=e.respiratory[0],n=this.calculateCoherenceLevel(null===t||void 0===t?void 0:t.value);t&&(this.previousHRV.unshift(t.value),this.previousHRV.length>5&&this.previousHRV.pop());const r=this.calculateTrend(),i=this.getRecommendedMode(n,r),o=this.calculateReadinessScore(e),l={timestamp:new Date,hrv:null===t||void 0===t?void 0:t.value,heartRate:null===s||void 0===s?void 0:s.value,respiratoryRate:null===a||void 0===a?void 0:a.value,coherenceLevel:n,coherenceTrend:r,recommendedMode:i,readinessScore:o};(!this.lastUpdate||this.lastUpdate.hrv!==l.hrv||this.lastUpdate.heartRate!==l.heartRate||this.lastUpdate.coherenceLevel!==l.coherenceLevel)&&(console.log("\ud83d\udc93 New biometric update:",{hrv:l.hrv,heartRate:l.heartRate,coherence:n.toFixed(2),mode:i}),this.lastUpdate=l,this.broadcast(l))}catch(e){console.error("\u274c Error checking biometric updates:",e)}finally{this.isPolling=!1}}}calculateCoherenceLevel(e){return e?e>80?.95:e>60?.8:e>40?.6:e>25?.4:e>15?.25:.15:.5}calculateTrend(){if(this.previousHRV.length<3)return"stable";const e=this.previousHRV.slice(0,2),t=this.previousHRV.slice(2,4),s=e.reduce(((e,t)=>e+t),0)/e.length,a=t.reduce(((e,t)=>e+t),0)/t.length,n=(s-a)/a*100;return n>10?"rising":n<-10?"falling":"stable"}getRecommendedMode(e,t){let s=e;return"rising"===t&&(s+=.1),"falling"===t&&(s-=.1),s>=.7?"scribe":s>=.4?"patient":"dialogue"}calculateReadinessScore(e){let t=50;const s=e.hrv[0];s&&(s.value>60?t+=40:s.value>40?t+=30:s.value>25?t+=20:t+=10);const a=e.sleep[0];var n;a&&(a.durationHours>7?t+=20:a.durationHours>6?t+=15:t+=5,(null===(n=a.stages)||void 0===n?void 0:n.deep)&&a.stages.deep>1.5&&(t+=10));const r=e.heartRate.find((e=>"resting"===e.context));return r&&(r.value<55?t+=20:r.value<65?t+=15:r.value<75?t+=10:t+=5),Math.min(100,Math.max(0,t))}broadcast(e){this.listeners.forEach((t=>{try{t(e)}catch(s){console.error("Error in biometric listener:",s)}}))}async injectUpdate(e){console.log("\ud83d\udc89 Injecting biometric data:",e);const t=this.calculateCoherenceLevel(e.hrv);e.hrv&&(this.previousHRV.unshift(e.hrv),this.previousHRV.length>5&&this.previousHRV.pop());const s=this.calculateTrend(),a=this.getRecommendedMode(t,s),n={timestamp:new Date,hrv:e.hrv,heartRate:e.heartRate,respiratoryRate:e.respiratoryRate,coherenceLevel:t,coherenceTrend:s,recommendedMode:a,readinessScore:75};this.lastUpdate=n,this.broadcast(n)}constructor(){this.listeners=[],this.pollingInterval=null,this.lastUpdate=null,this.previousHRV=[],this.isPolling=!1}};function le(){const[e,t]=(0,n.useState)(null),[s,r]=(0,n.useState)(null),[i,o]=(0,n.useState)(null),[l,c]=(0,n.useState)([]),[d,h]=(0,n.useState)([]),[m,x]=(0,n.useState)(!1),[u,p]=(0,n.useState)(0),[g,b]=(0,n.useState)("7d");(0,n.useEffect)((()=>{const e=oe.subscribe((e=>{r(e)}));return oe.start(),e}),[]),(0,n.useEffect)((()=>{h([{name:"Kelly's Apple Watch",type:"apple_watch",connected:!0,battery:76,lastSync:new Date,dataTypes:["HRV","Heart Rate","Sleep Stages","Respiratory Rate"]},{name:"iPhone Pro",type:"iphone",connected:!0,battery:84,lastSync:new Date,dataTypes:["Sleep Analysis","Steps","Audio Levels"]}])}),[]);const y=(0,n.useCallback)((e=>{if(0===e.length)return{efficiency:0,deepSleepRatio:0,remRatio:0,wakefulnessRatio:0,consistencyScore:0};const t=e.slice(0,7);let s=0,a=0,n=0,r=0,i=[];t.forEach((e=>{var t,o,l;const c=((null===(t=e.stages)||void 0===t?void 0:t.rem)||0)+((null===(o=e.stages)||void 0===o?void 0:o.core)||0)+((null===(l=e.stages)||void 0===l?void 0:l.deep)||0),d=e.durationHours;s+=c/d,e.stages&&(a+=(e.stages.deep||0)/c,n+=(e.stages.rem||0)/c,r+=(e.stages.awake||0)/d);const h=e.startDate.getHours()+e.startDate.getMinutes()/60;i.push(h)}));const o=i.reduce(((e,t)=>e+t),0)/i.length,l=i.reduce(((e,t)=>e+Math.pow(t-o,2)),0)/i.length,c=Math.sqrt(l),d=Math.max(0,1-c/2);return{efficiency:s/t.length,deepSleepRatio:a/t.length,remRatio:n/t.length,wakefulnessRatio:r/t.length,consistencyScore:d}}),[]),v=(0,n.useCallback)(((e,t)=>{const s=[];if(e.efficiency<.8&&s.push({type:"sleep_time",title:"Optimize Sleep Efficiency",description:"Your sleep efficiency is below 80%. Consider reducing time in bed or improving sleep environment.",priority:"high",timing:"30 mins before current bedtime"}),e.deepSleepRatio<.15&&s.push({type:"exercise",title:"Increase Deep Sleep",description:"Low deep sleep ratio. Regular exercise 4-6 hours before bed can increase deep sleep.",priority:"medium",timing:"Early evening"}),e.consistencyScore<.7&&s.push({type:"sleep_time",title:"Improve Sleep Consistency",description:"Your bedtime varies significantly. Try to go to bed within 30 minutes of the same time each night.",priority:"high"}),t.length>0){const e=t.slice(0,7).reduce(((e,t)=>e+t.startDate.getHours()+t.startDate.getMinutes()/60),0)/Math.min(t.length,7);(e>24||e<1)&&s.push({type:"light_exposure",title:"Earlier Light Exposure",description:"Late bedtime detected. Get bright light exposure within 30 minutes of waking.",priority:"medium",timing:"Upon waking"})}return s}),[]),f=e=>{const t=Math.floor(e),s=Math.round(60*(e-t));return"".concat(t,"h ").concat(s,"m")},j=e=>e>=.8?"text-green-400":e>=.6?"text-yellow-400":"text-red-400";return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsx)("h2",{className:"text-3xl font-extralight text-white tracking-wide",children:"Sleep Pattern Tracker"}),(0,a.jsx)("p",{className:"text-gray-400 text-lg",children:"Comprehensive sleep monitoring with device integration and circadian optimization"})]}),(0,a.jsxs)("div",{className:"bg-gray-900/50 backdrop-blur-sm border border-purple-500/30 rounded-xl p-6",children:[(0,a.jsxs)("h3",{className:"text-xl font-light text-white mb-4 flex items-center gap-2",children:[(0,a.jsx)(W.Z,{className:"w-5 h-5"}),"Connected Devices"]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:d.map(((e,t)=>(0,a.jsxs)(M.E.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"p-4 rounded-lg border ".concat(e.connected?"border-green-500/30 bg-green-500/10":"border-red-500/30 bg-red-500/10"),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:["apple_watch"===e.type?(0,a.jsx)(Q.Z,{className:"w-5 h-5 text-blue-400"}):(0,a.jsx)(K.Z,{className:"w-5 h-5 text-gray-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-white font-medium",children:e.name}),(0,a.jsx)("p",{className:"text-sm ".concat(e.connected?"text-green-400":"text-red-400"),children:e.connected?"Connected":"Disconnected"})]})]}),e.battery&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(J.Z,{className:"w-4 h-4 text-gray-400"}),(0,a.jsxs)("span",{className:"text-sm text-gray-300",children:[e.battery,"%"]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:e.dataTypes.map(((e,t)=>(0,a.jsx)("span",{className:"px-2 py-1 bg-purple-500/20 text-purple-300 text-xs rounded-full",children:e},t)))}),e.lastSync&&(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:["Last sync: ",e.lastSync.toLocaleTimeString()]})]})]},t)))})]}),s&&(0,a.jsxs)("div",{className:"bg-gray-900/50 backdrop-blur-sm border border-green-500/30 rounded-xl p-6",children:[(0,a.jsxs)("h3",{className:"text-xl font-light text-white mb-4 flex items-center gap-2",children:[(0,a.jsx)(R.Z,{className:"w-5 h-5"}),"Real-time Biometrics",(0,a.jsx)("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse ml-2"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-2",children:[(0,a.jsx)(Z.Z,{className:"w-5 h-5 text-red-400"}),(0,a.jsx)("span",{className:"text-gray-400",children:"HRV"})]}),(0,a.jsx)("div",{className:"text-2xl font-light text-white",children:s.hrv?"".concat(Math.round(s.hrv),"ms"):"--"}),(0,a.jsxs)("div",{className:"flex items-center justify-center gap-1 mt-1",children:["rising"===s.coherenceTrend?(0,a.jsx)(X.Z,{className:"w-4 h-4 text-green-400"}):"falling"===s.coherenceTrend?(0,a.jsx)(Y.Z,{className:"w-4 h-4 text-red-400"}):(0,a.jsx)($.Z,{className:"w-4 h-4 text-gray-400"}),(0,a.jsx)("span",{className:"text-xs text-gray-400 capitalize",children:s.coherenceTrend})]})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-2",children:[(0,a.jsx)(Z.Z,{className:"w-5 h-5 text-pink-400"}),(0,a.jsx)("span",{className:"text-gray-400",children:"Heart Rate"})]}),(0,a.jsx)("div",{className:"text-2xl font-light text-white",children:s.heartRate?"".concat(Math.round(s.heartRate)," bpm"):"--"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-2",children:[(0,a.jsx)(T.Z,{className:"w-5 h-5 text-purple-400"}),(0,a.jsx)("span",{className:"text-gray-400",children:"Coherence"})]}),(0,a.jsxs)("div",{className:"text-2xl font-light text-white",children:[Math.round(100*s.coherenceLevel),"%"]})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-2",children:[(0,a.jsx)(V.Z,{className:"w-5 h-5 text-blue-400"}),(0,a.jsx)("span",{className:"text-gray-400",children:"Readiness"})]}),(0,a.jsxs)("div",{className:"text-2xl font-light text-white",children:[s.readinessScore,"/100"]})]})]}),(0,a.jsx)("div",{className:"mt-4 p-3 bg-blue-500/20 border border-blue-500/30 rounded-lg",children:(0,a.jsxs)("p",{className:"text-blue-300 text-sm",children:[(0,a.jsx)("strong",{children:"Recommended Mode:"})," ",s.recommendedMode.charAt(0).toUpperCase()+s.recommendedMode.slice(1)]})})]}),(0,a.jsxs)("div",{className:"bg-gray-900/50 backdrop-blur-sm border border-purple-500/30 rounded-xl p-6",children:[(0,a.jsxs)("h3",{className:"text-xl font-light text-white mb-4 flex items-center gap-2",children:[(0,a.jsx)(ee.Z,{className:"w-5 h-5"}),"Apple Health Data Import"]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"border-2 border-dashed border-purple-500/30 rounded-lg p-8 text-center",children:[(0,a.jsx)(te.Z,{className:"w-12 h-12 text-purple-400 mx-auto mb-4"}),(0,a.jsx)("h4",{className:"text-white font-medium mb-2",children:"Upload Health Export"}),(0,a.jsx)("p",{className:"text-gray-400 text-sm mb-4",children:"Export your Health data from iPhone Settings \u2192 Privacy & Security \u2192 Health \u2192 Export All Health Data"}),(0,a.jsx)("input",{type:"file",accept:".xml,.zip",onChange:e=>{var s;const a=null===(s=e.target.files)||void 0===s?void 0:s[0];a&&(async e=>{x(!0),p(0);try{const s=await e.text();p(25),console.log("\ud83d\udcf1 Processing Apple Health export...");const a=await re.parseHealthXML(s);p(75),t(a);const n=y(a.sleep);o(n);const r=v(n,a.sleep);c(r),p(100),console.log("\u2705 Health data processed successfully")}catch(s){console.error("\u274c Error processing health data:",s)}finally{x(!1),setTimeout((()=>p(0)),2e3)}})(a)},className:"hidden",id:"health-upload"}),(0,a.jsxs)("label",{htmlFor:"health-upload",className:"inline-flex items-center gap-2 px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg cursor-pointer transition-colors",children:[(0,a.jsx)(ee.Z,{className:"w-4 h-4"}),"Choose File"]})]}),u>0&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Processing..."}),(0,a.jsxs)("span",{className:"text-purple-400",children:[u,"%"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-700 rounded-full h-2",children:(0,a.jsx)(M.E.div,{className:"bg-purple-500 h-2 rounded-full",style:{width:"".concat(u,"%")},transition:{duration:.3}})})]})]})]}),i&&e&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"bg-gray-900/50 backdrop-blur-sm border border-indigo-500/30 rounded-xl p-6",children:[(0,a.jsxs)("h3",{className:"text-xl font-light text-white mb-4 flex items-center gap-2",children:[(0,a.jsx)(P.Z,{className:"w-5 h-5"}),"Sleep Quality Analysis"]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-gray-400 text-sm mb-1",children:"Efficiency"}),(0,a.jsxs)("div",{className:"text-2xl font-light ".concat(j(i.efficiency)),children:[Math.round(100*i.efficiency),"%"]})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-gray-400 text-sm mb-1",children:"Deep Sleep"}),(0,a.jsxs)("div",{className:"text-2xl font-light ".concat(j(5*i.deepSleepRatio)),children:[Math.round(100*i.deepSleepRatio),"%"]})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-gray-400 text-sm mb-1",children:"REM Sleep"}),(0,a.jsxs)("div",{className:"text-2xl font-light ".concat(j(4*i.remRatio)),children:[Math.round(100*i.remRatio),"%"]})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-gray-400 text-sm mb-1",children:"Consistency"}),(0,a.jsxs)("div",{className:"text-2xl font-light ".concat(j(i.consistencyScore)),children:[Math.round(100*i.consistencyScore),"%"]})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-gray-400 text-sm mb-1",children:"Avg Sleep"}),(0,a.jsx)("div",{className:"text-2xl font-light text-white",children:f(e.sleep.slice(0,7).reduce(((e,t)=>e+t.durationHours),0)/Math.min(e.sleep.length,7))})]})]})]}),(0,a.jsxs)("div",{className:"bg-gray-900/50 backdrop-blur-sm border border-indigo-500/30 rounded-xl p-6",children:[(0,a.jsxs)("h3",{className:"text-xl font-light text-white mb-4 flex items-center gap-2",children:[(0,a.jsx)(F.Z,{className:"w-5 h-5"}),"Recent Sleep Sessions"]}),(0,a.jsx)("div",{className:"space-y-3",children:e.sleep.slice(0,7).map(((e,t)=>(0,a.jsxs)(M.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1*t},className:"flex items-center justify-between p-4 bg-black/30 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-white font-medium",children:e.startDate.toLocaleDateString("en-US",{month:"short",day:"numeric"})}),(0,a.jsx)("div",{className:"text-gray-400 text-xs",children:e.startDate.toLocaleDateString("en-US",{weekday:"short"})})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("div",{className:"text-white",children:f(e.durationHours)}),(0,a.jsxs)("div",{className:"text-gray-400 text-sm",children:[e.startDate.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})," - ",e.endDate.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})]})]})]}),e.stages&&(0,a.jsxs)("div",{className:"flex gap-2",children:[e.stages.deep&&(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-xs text-indigo-400",children:"Deep"}),(0,a.jsx)("div",{className:"text-xs text-white",children:f(e.stages.deep)})]}),e.stages.rem&&(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-xs text-purple-400",children:"REM"}),(0,a.jsx)("div",{className:"text-xs text-white",children:f(e.stages.rem)})]}),e.stages.core&&(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-xs text-blue-400",children:"Core"}),(0,a.jsx)("div",{className:"text-xs text-white",children:f(e.stages.core)})]})]})]},t)))})]})]}),l.length>0&&(0,a.jsxs)("div",{className:"bg-gray-900/50 backdrop-blur-sm border border-yellow-500/30 rounded-xl p-6",children:[(0,a.jsxs)("h3",{className:"text-xl font-light text-white mb-4 flex items-center gap-2",children:[(0,a.jsx)(se.Z,{className:"w-5 h-5"}),"Circadian Rhythm Optimization"]}),(0,a.jsx)("div",{className:"space-y-4",children:l.map(((e,t)=>(0,a.jsx)(M.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*t},className:"p-4 rounded-lg border ".concat("high"===e.priority?"border-red-500/30 bg-red-500/10":"medium"===e.priority?"border-yellow-500/30 bg-yellow-500/10":"border-green-500/30 bg-green-500/10"),children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:["high"===e.priority?(0,a.jsx)(ae.Z,{className:"w-4 h-4 text-red-400"}):(0,a.jsx)(ne.Z,{className:"w-4 h-4 text-green-400"}),(0,a.jsx)("h4",{className:"text-white font-medium",children:e.title}),e.timing&&(0,a.jsx)("span",{className:"text-xs bg-gray-700 text-gray-300 px-2 py-1 rounded-full",children:e.timing})]}),(0,a.jsx)("p",{className:"text-gray-300 text-sm",children:e.description})]}),(0,a.jsx)("span",{className:"text-xs px-2 py-1 rounded-full ".concat("high"===e.priority?"bg-red-500/20 text-red-400":"medium"===e.priority?"bg-yellow-500/20 text-yellow-400":"bg-green-500/20 text-green-400"),children:e.priority})]})},t)))})]})]})}function ce(){var e;const[t,s]=(0,n.useState)("journal"),[r,i]=(0,n.useState)(!1),[o,l]=(0,n.useState)(!1),[c,d]=(0,n.useState)({content:"",timestamp:new Date,type:"regular",lucidityLevel:0,vividnessScore:5,emotionalIntensity:5,sleepQuality:5,timeInBed:8,moonPhase:"waxing",circadianPhase:"morning"}),[h,m]=(0,n.useState)(null),[x,u]=(0,n.useState)(!1),[p,g]=(0,n.useState)(0),[b,y]=(0,n.useState)(!1),[v,f]=(0,n.useState)(!1),j=((0,n.useRef)(null),(0,n.useRef)(null)),N=(0,n.useRef)(null);(0,n.useEffect)((()=>{if("SpeechRecognition"in window||"webkitSpeechRecognition"in window){f(!0);const e=window.SpeechRecognition||window.webkitSpeechRecognition;j.current=new e,j.current.continuous=!0,j.current.interimResults=!0,j.current.lang="en-US",j.current.onresult=e=>{let t="";for(let s=e.resultIndex;s<e.results.length;s++)t+=e.results[s][0].transcript;d((e=>({...e,content:t})))},j.current.onend=()=>{r&&!o&&j.current.start()}}}),[]),(0,n.useEffect)((()=>(r&&!o?N.current=setInterval((()=>{g((e=>e+1))}),1e3):N.current&&clearInterval(N.current),()=>{N.current&&clearInterval(N.current)})),[r,o]);const w=e=>({hero:"text-amber-400",shadow:"text-purple-600",anima:"text-pink-400",animus:"text-blue-400",wise_old_man:"text-green-400",wise_old_woman:"text-emerald-400",mother:"text-rose-400",father:"text-indigo-400",child:"text-yellow-400",magician:"text-violet-400",ruler:"text-red-500",rebel:"text-orange-500",lover:"text-pink-500",creator:"text-purple-500",destroyer:"text-gray-600",caregiver:"text-green-500",seeker:"text-cyan-400",sage:"text-blue-600",trickster:"text-yellow-600"}[e]||"text-gray-400");return(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-indigo-950 via-purple-900 to-slate-900 p-6",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,a.jsxs)(M.E.div,{className:"text-center mb-8",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6},children:[(0,a.jsxs)("div",{className:"flex items-center justify-center gap-3 mb-4",children:[(0,a.jsx)(F.Z,{className:"w-8 h-8 text-indigo-400"}),(0,a.jsx)("h1",{className:"text-4xl font-bold text-white",children:"Dream & Sleep Integration"}),(0,a.jsx)(R.Z,{className:"w-8 h-8 text-purple-400"})]}),(0,a.jsx)("p",{className:"text-lg text-slate-300",children:"Comprehensive dream analysis and sleep pattern tracking with real-time biometric integration"}),(0,a.jsx)("div",{className:"flex justify-center mt-6",children:(0,a.jsxs)("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl p-1 border border-indigo-500/30",children:[(0,a.jsxs)(M.E.button,{onClick:()=>s("journal"),className:"flex items-center gap-2 px-6 py-3 rounded-lg font-medium transition-all ".concat("journal"===t?"bg-indigo-600 text-white shadow-lg":"text-slate-300 hover:text-white hover:bg-white/10"),whileHover:{scale:1.02},whileTap:{scale:.98},children:[(0,a.jsx)(T.Z,{className:"w-4 h-4"}),"Dream Journal"]}),(0,a.jsxs)(M.E.button,{onClick:()=>s("sleep"),className:"flex items-center gap-2 px-6 py-3 rounded-lg font-medium transition-all ".concat("sleep"===t?"bg-purple-600 text-white shadow-lg":"text-slate-300 hover:text-white hover:bg-white/10"),whileHover:{scale:1.02},whileTap:{scale:.98},children:[(0,a.jsx)(P.Z,{className:"w-4 h-4"}),"Sleep Analytics"]})]})})]}),"journal"===t?(0,a.jsxs)("div",{className:"grid lg:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,a.jsxs)(M.E.div,{className:"bg-white/10 backdrop-blur-lg rounded-xl border border-indigo-500/30 p-6",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.2},children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("h3",{className:"text-xl font-semibold text-white flex items-center gap-2",children:[(0,a.jsx)(I.Z,{className:"w-5 h-5"}),"Voice Recording"]}),(0,a.jsx)("div",{className:"text-sm text-slate-300",children:(e=>{const t=Math.floor(e/60),s=e%60;return"".concat(t.toString().padStart(2,"0"),":").concat(s.toString().padStart(2,"0"))})(p)})]}),(0,a.jsx)("div",{className:"flex items-center justify-center gap-4 mb-6",children:r?(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsxs)(M.E.button,{onClick:()=>{l(!o),j.current&&(o?j.current.start():j.current.stop())},className:"flex items-center gap-2 px-6 py-3 bg-yellow-600 hover:bg-yellow-700 rounded-xl text-white font-medium transition-all",whileHover:{scale:1.05},whileTap:{scale:.95},children:[o?(0,a.jsx)(H.Z,{className:"w-4 h-4"}):(0,a.jsx)(q.Z,{className:"w-4 h-4"}),o?"Resume":"Pause"]}),(0,a.jsxs)(M.E.button,{onClick:()=>{i(!1),l(!1),j.current&&j.current.stop()},className:"flex items-center gap-2 px-6 py-3 bg-gray-600 hover:bg-gray-700 rounded-xl text-white font-medium transition-all",whileHover:{scale:1.05},whileTap:{scale:.95},children:[(0,a.jsx)(L.Z,{className:"w-4 h-4"}),"Stop"]})]}):(0,a.jsxs)(M.E.button,{onClick:()=>{v&&j.current&&(i(!0),g(0),j.current.start())},disabled:!v,className:"flex items-center gap-2 px-8 py-4 bg-red-600 hover:bg-red-700 disabled:bg-gray-600 disabled:cursor-not-allowed rounded-xl text-white font-medium transition-all shadow-lg",whileHover:{scale:1.05},whileTap:{scale:.95},children:[(0,a.jsx)(I.Z,{className:"w-5 h-5"}),"Start Recording"]})}),r&&(0,a.jsxs)(M.E.div,{className:"flex items-center justify-center gap-2 text-red-500",animate:{opacity:[.5,1,.5]},transition:{repeat:1/0,duration:1.5},children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:o?"Recording Paused":"Recording..."})]}),!v&&(0,a.jsx)("div",{className:"text-center text-amber-400 text-sm",children:"Voice recording not supported in this browser. Please type your dream below."})]}),(0,a.jsxs)(M.E.div,{className:"bg-white/10 backdrop-blur-lg rounded-xl border border-indigo-500/30 p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold text-white",children:"Dream Content"}),(0,a.jsxs)("div",{className:"text-sm text-slate-300",children:[(null===(e=c.content)||void 0===e?void 0:e.length)||0," characters"]})]}),(0,a.jsx)("textarea",{value:c.content,onChange:e=>d((t=>({...t,content:e.target.value}))),placeholder:"Describe your dream in detail... (voice recording will appear here automatically)",className:"w-full h-40 bg-white/5 border border-slate-500/30 rounded-lg p-4 text-white placeholder-slate-400 focus:outline-none focus:border-indigo-400 resize-none"}),(0,a.jsxs)("div",{className:"flex gap-3 mt-4",children:[(0,a.jsxs)(M.E.button,{onClick:async()=>{if(c.content&&!(c.content.length<10)){u(!0);try{const e=await fetch("/api/dreams/analyze",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:c.content,analysisType:"comprehensive"})}),t=await e.json();t.success&&m(t.analysis)}catch(e){console.error("Analysis failed:",e)}finally{u(!1)}}},disabled:!c.content||c.content.length<10||x,className:"flex items-center gap-2 px-6 py-3 bg-purple-600 hover:bg-purple-700 disabled:bg-gray-600 disabled:cursor-not-allowed rounded-lg text-white font-medium transition-all",whileHover:{scale:1.02},whileTap:{scale:.98},children:[x?(0,a.jsx)(z.Z,{className:"w-4 h-4 animate-spin"}):(0,a.jsx)(U.Z,{className:"w-4 h-4"}),x?"Analyzing...":"Analyze Dream"]}),(0,a.jsxs)(M.E.button,{onClick:async()=>{try{const e=await fetch("/api/dreams/record",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...c,dreamSymbols:[],emotionalTone:{primary:"neutral",intensity:c.emotionalIntensity||5},archetypes:(null===h||void 0===h?void 0:h.archetypes)||[],wisdomEmergenceSignals:null===h||void 0===h?void 0:h.wisdomEmergence})});(await e.json()).success&&(d({content:"",timestamp:new Date,type:"regular",lucidityLevel:0,vividnessScore:5,emotionalIntensity:5,sleepQuality:5}),m(null),alert("Dream saved successfully!"))}catch(e){console.error("Save failed:",e),alert("Failed to save dream. Please try again.")}},disabled:!c.content||c.content.length<10,className:"flex items-center gap-2 px-6 py-3 bg-green-600 hover:bg-green-700 disabled:bg-gray-600 disabled:cursor-not-allowed rounded-lg text-white font-medium transition-all",whileHover:{scale:1.02},whileTap:{scale:.98},children:[(0,a.jsx)(O.Z,{className:"w-4 h-4"}),"Save Dream"]})]})]}),(0,a.jsxs)(M.E.div,{className:"bg-white/10 backdrop-blur-lg rounded-xl border border-indigo-500/30 p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:[(0,a.jsx)("h3",{className:"text-xl font-semibold text-white mb-4",children:"Dream Metrics"}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Dream Type"}),(0,a.jsxs)("select",{value:c.type,onChange:e=>d((t=>({...t,type:e.target.value}))),className:"w-full bg-white/5 border border-slate-500/30 rounded-lg p-3 text-white focus:outline-none focus:border-indigo-400",children:[(0,a.jsx)("option",{value:"regular",children:"Regular Dream"}),(0,a.jsx)("option",{value:"lucid",children:"Lucid Dream"}),(0,a.jsx)("option",{value:"nightmare",children:"Nightmare"}),(0,a.jsx)("option",{value:"recurring",children:"Recurring Dream"}),(0,a.jsx)("option",{value:"prophetic",children:"Prophetic Dream"}),(0,a.jsx)("option",{value:"healing",children:"Healing Dream"}),(0,a.jsx)("option",{value:"shadow_work",children:"Shadow Work"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:["Lucidity Level: ",c.lucidityLevel,"/10"]}),(0,a.jsx)("input",{type:"range",min:"0",max:"10",value:c.lucidityLevel,onChange:e=>d((t=>({...t,lucidityLevel:parseInt(e.target.value)}))),className:"w-full accent-indigo-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:["Vividness: ",c.vividnessScore,"/10"]}),(0,a.jsx)("input",{type:"range",min:"1",max:"10",value:c.vividnessScore,onChange:e=>d((t=>({...t,vividnessScore:parseInt(e.target.value)}))),className:"w-full accent-purple-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:["Emotional Intensity: ",c.emotionalIntensity,"/10"]}),(0,a.jsx)("input",{type:"range",min:"1",max:"10",value:c.emotionalIntensity,onChange:e=>d((t=>({...t,emotionalIntensity:parseInt(e.target.value)}))),className:"w-full accent-pink-500"})]})]}),(0,a.jsxs)(M.E.button,{onClick:()=>y(!b),className:"mt-4 text-indigo-400 hover:text-indigo-300 text-sm flex items-center gap-1",whileHover:{scale:1.02},children:[(0,a.jsx)(B.Z,{className:"w-4 h-4"}),b?"Hide":"Show"," Advanced Options"]}),(0,a.jsx)(A.M,{children:b&&(0,a.jsxs)(M.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-4 grid md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:["Sleep Quality: ",c.sleepQuality,"/10"]}),(0,a.jsx)("input",{type:"range",min:"1",max:"10",value:c.sleepQuality,onChange:e=>d((t=>({...t,sleepQuality:parseInt(e.target.value)}))),className:"w-full accent-green-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Time in Bed (hours)"}),(0,a.jsx)("input",{type:"number",min:"1",max:"12",step:"0.5",value:c.timeInBed,onChange:e=>d((t=>({...t,timeInBed:parseFloat(e.target.value)}))),className:"w-full bg-white/5 border border-slate-500/30 rounded-lg p-2 text-white focus:outline-none focus:border-indigo-400"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Wake Time"}),(0,a.jsx)("input",{type:"time",value:c.wakeTime,onChange:e=>d((t=>({...t,wakeTime:e.target.value}))),className:"w-full bg-white/5 border border-slate-500/30 rounded-lg p-2 text-white focus:outline-none focus:border-indigo-400"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Moon Phase"}),(0,a.jsxs)("select",{value:c.moonPhase,onChange:e=>d((t=>({...t,moonPhase:e.target.value}))),className:"w-full bg-white/5 border border-slate-500/30 rounded-lg p-2 text-white focus:outline-none focus:border-indigo-400",children:[(0,a.jsx)("option",{value:"new",children:"New Moon"}),(0,a.jsx)("option",{value:"waxing_crescent",children:"Waxing Crescent"}),(0,a.jsx)("option",{value:"first_quarter",children:"First Quarter"}),(0,a.jsx)("option",{value:"waxing_gibbous",children:"Waxing Gibbous"}),(0,a.jsx)("option",{value:"full",children:"Full Moon"}),(0,a.jsx)("option",{value:"waning_gibbous",children:"Waning Gibbous"}),(0,a.jsx)("option",{value:"third_quarter",children:"Third Quarter"}),(0,a.jsx)("option",{value:"waning_crescent",children:"Waning Crescent"})]})]})]})})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(M.E.div,{className:"bg-white/10 backdrop-blur-lg rounded-xl border border-purple-500/30 p-6",initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.5},children:[(0,a.jsxs)("h3",{className:"text-xl font-semibold text-white mb-4 flex items-center gap-2",children:[(0,a.jsx)(T.Z,{className:"w-5 h-5 text-purple-400"}),"Archetypal Analysis"]}),x&&(0,a.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,a.jsxs)("div",{className:"text-purple-300 text-center",children:[(0,a.jsx)(z.Z,{className:"w-8 h-8 animate-spin mx-auto mb-2"}),(0,a.jsx)("p",{children:"Analyzing archetypal patterns..."})]})}),(null===h||void 0===h?void 0:h.archetypes)&&h.archetypes.length>0&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-purple-200 mb-2",children:"Primary Archetypes"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:h.archetypes.slice(0,3).map((e=>(0,a.jsx)(M.E.span,{className:"px-3 py-1 rounded-full text-xs font-medium bg-white/10 ".concat(w(e)),initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.1},children:e.replace("_"," ")},e)))})]}),h.dominantArchetype&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-purple-200 mb-2",children:"Dominant Energy"}),(0,a.jsx)("div",{className:"text-lg font-semibold ".concat(w(h.dominantArchetype)),children:h.dominantArchetype.replace("_"," ")})]})]}),!h&&!x&&(0,a.jsxs)("div",{className:"text-center text-slate-400 py-8",children:[(0,a.jsx)(T.Z,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),(0,a.jsx)("p",{children:"Record and analyze your dream to see archetypal patterns"})]})]}),(null===h||void 0===h?void 0:h.wisdomEmergence)&&(0,a.jsxs)(M.E.div,{className:"bg-white/10 backdrop-blur-lg rounded-xl border border-amber-500/30 p-6",initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.6},children:[(0,a.jsxs)("h3",{className:"text-xl font-semibold text-white mb-4 flex items-center gap-2",children:[(0,a.jsx)(U.Z,{className:"w-5 h-5 text-amber-400"}),"Wisdom Emergence"]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-amber-200",children:"Emergence Level"}),(0,a.jsxs)("span",{className:"text-amber-400 font-medium",children:[Math.round(100*h.wisdomEmergence.emergenceLevel),"%"]})]}),h.wisdomEmergence.bodyActivation&&Object.keys(h.wisdomEmergence.bodyActivation).length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-amber-200 mb-2",children:"Body Activation"}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-2 text-xs",children:Object.entries(h.wisdomEmergence.bodyActivation).map((e=>{let[t,s]=e;return(0,a.jsxs)("div",{className:"flex items-center gap-2 ".concat(s?"text-amber-300":"text-slate-500"),children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(s?"bg-amber-400":"bg-slate-600")}),t]},t)}))})]}),h.wisdomEmergence.languageShift&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-amber-300",children:[(0,a.jsx)(G.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"text-sm",children:"Language shift detected"})]})]})]}),(null===h||void 0===h?void 0:h.elementalPatterns)&&(0,a.jsxs)(M.E.div,{className:"bg-white/10 backdrop-blur-lg rounded-xl border border-cyan-500/30 p-6",initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.7},children:[(0,a.jsxs)("h3",{className:"text-xl font-semibold text-white mb-4 flex items-center gap-2",children:[(0,a.jsx)(V.Z,{className:"w-5 h-5 text-cyan-400"}),"Elemental Patterns"]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-cyan-200 mb-2",children:"Dominant Element"}),(0,a.jsx)("div",{className:"text-cyan-300 font-medium",children:h.elementalPatterns.dominant})]}),h.elementalPatterns.secondary&&(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-cyan-200 mb-2",children:"Secondary Element"}),(0,a.jsx)("div",{className:"text-cyan-400",children:h.elementalPatterns.secondary})]}),h.elementalPatterns.balance&&(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-cyan-200 mb-2",children:"Elemental Balance"}),(0,a.jsx)("div",{className:"space-y-1",children:Object.entries(h.elementalPatterns.balance).map((e=>{let[t,s]=e;return(0,a.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,a.jsx)("span",{className:"text-slate-300",children:t}),(0,a.jsxs)("span",{className:"text-cyan-300",children:[Math.round(100*s),"%"]})]},t)}))})]})]})]}),(null===h||void 0===h?void 0:h.recommendations)&&h.recommendations.length>0&&(0,a.jsxs)(M.E.div,{className:"bg-white/10 backdrop-blur-lg rounded-xl border border-green-500/30 p-6",initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.8},children:[(0,a.jsxs)("h3",{className:"text-xl font-semibold text-white mb-4 flex items-center gap-2",children:[(0,a.jsx)(Z.Z,{className:"w-5 h-5 text-green-400"}),"Integration Guidance"]}),(0,a.jsx)("div",{className:"space-y-2",children:h.recommendations.map(((e,t)=>(0,a.jsxs)(M.E.div,{className:"text-sm text-green-200 flex items-start gap-2",initial:{opacity:0,x:10},animate:{opacity:1,x:0},transition:{delay:.8+.1*t},children:[(0,a.jsx)("span",{className:"text-green-400 mt-1",children:"\u2022"}),e]},t)))})]})]})]}):(0,a.jsx)(le,{})]})})}var de=s(6623);function he(){const[e]=(0,n.useState)((()=>new E.a)),[t,s]=(0,n.useState)(!1),[l,c]=(0,n.useState)("monitor"),[x,p]=(0,n.useState)(!1),[g,y]=(0,n.useState)(!1);return(0,n.useEffect)((()=>(e.connect().then((()=>{s(!0)})),()=>{e.disconnect()})),[e]),t?(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-purple-900/20",children:[(0,a.jsx)("header",{className:"border-b border-purple-500/30 bg-black/50 backdrop-blur-sm",children:(0,a.jsx)("div",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold text-white flex items-center gap-3",children:["\ud83d\udee1\ufe0f MAIA LabTools",(0,a.jsx)("span",{className:"text-sm bg-green-500/20 text-green-400 px-3 py-1 rounded-full",children:"Guardian Active"}),x&&(0,a.jsx)("span",{className:"text-sm bg-purple-500/20 text-purple-400 px-3 py-1 rounded-full",children:"\ud83e\uddd8 Meditation Active"})]}),(0,a.jsx)("p",{className:"text-purple-300 mt-1",children:"Real-time consciousness monitoring, advanced meditation & safety protocols"})]}),(0,a.jsxs)("div",{className:"flex bg-black/30 rounded-lg p-1",children:[(0,a.jsx)("button",{onClick:()=>c("monitor"),className:"px-4 py-2 rounded-lg text-sm transition-all ".concat("monitor"===l?"bg-green-500/30 text-green-300 border border-green-500/50":"text-gray-400 hover:text-white"),children:"\ud83d\udcca Monitor"}),(0,a.jsx)("button",{onClick:()=>c("consciousness"),className:"px-4 py-2 rounded-lg text-sm transition-all ".concat("consciousness"===l?"bg-purple-500/30 text-purple-300 border border-purple-500/50":"text-gray-400 hover:text-white"),children:"\ud83e\udde0 Consciousness"}),(0,a.jsx)("button",{onClick:()=>c("meditation"),className:"px-4 py-2 rounded-lg text-sm transition-all ".concat("meditation"===l?"bg-purple-500/30 text-purple-300 border border-purple-500/50":"text-gray-400 hover:text-white"),children:"\ud83e\uddd8 Meditation"}),(0,a.jsx)("button",{onClick:()=>c("dreams"),className:"px-4 py-2 rounded-lg text-sm transition-all ".concat("dreams"===l?"bg-indigo-500/30 text-indigo-300 border border-indigo-500/50":"text-gray-400 hover:text-white"),children:"\ud83c\udf19 Dreams"}),(0,a.jsx)("button",{onClick:()=>c("ipp"),className:"px-4 py-2 rounded-lg text-sm transition-all ".concat("ipp"===l?"bg-blue-500/30 text-blue-300 border border-blue-500/50":"text-gray-400 hover:text-white"),children:"\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d\udc66 IPP"}),(0,a.jsx)("button",{onClick:()=>y(!0),className:"px-4 py-2 rounded-lg text-sm transition-all text-gray-400 hover:text-white hover:bg-orange-500/20 border border-orange-500/30",children:"\ud83c\udf0a Field"})]})]})})}),(0,a.jsx)("div",{className:"p-6 grid grid-cols-12 gap-6 h-[calc(100vh-120px)]",children:"monitor"===l?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"col-span-4 space-y-6 overflow-y-auto",children:[(0,a.jsx)(r.e,{service:e}),(0,a.jsx)(i.Q,{service:e}),(0,a.jsxs)("div",{className:"bg-gray-900/50 backdrop-blur-sm border border-green-500/30 rounded-lg p-4",children:[(0,a.jsxs)("h3",{className:"text-lg font-bold text-white mb-3 flex items-center gap-2",children:["\ud83d\udcca Live Metrics",(0,a.jsx)("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Session Time:"}),(0,a.jsxs)("span",{className:"text-white",children:[Math.floor(Date.now()/6e4)%60,"min"]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Data Points:"}),(0,a.jsx)("span",{className:"text-white",children:Math.floor(1e3*Math.random()+5e3)})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Breakthrough Score:"}),(0,a.jsx)("span",{className:"text-green-400 font-bold",children:(.4*Math.random()+.6).toFixed(2)})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Coherence Avg:"}),(0,a.jsx)("span",{className:"text-purple-400 font-bold",children:(.3*Math.random()+.65).toFixed(2)})]})]})]}),(0,a.jsxs)("div",{className:"bg-gray-900/50 backdrop-blur-sm border border-green-500/30 rounded-lg p-4",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-white mb-3",children:"\ud83d\udd0c Device Status"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm flex items-center gap-2",children:"\ud83e\udde0 OpenBCI Ganglion"}),(0,a.jsx)("span",{className:"text-green-400 text-xs bg-green-500/20 px-2 py-1 rounded",children:"Connected"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm flex items-center gap-2",children:"\u231a Apple Watch"}),(0,a.jsx)("span",{className:"text-green-400 text-xs bg-green-500/20 px-2 py-1 rounded",children:"HRV Active"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm flex items-center gap-2",children:"\ud83c\udf10 WebSocket"}),(0,a.jsx)("span",{className:"text-green-400 text-xs bg-green-500/20 px-2 py-1 rounded",children:"Live Stream"})]})]})]})]}),(0,a.jsxs)("div",{className:"col-span-5 space-y-6 overflow-y-auto",children:[(0,a.jsx)(d.r,{service:e}),(0,a.jsx)(j.Z,{service:e})]}),(0,a.jsxs)("div",{className:"col-span-3 space-y-6 overflow-y-auto",children:[(0,a.jsx)(h.x,{service:e}),(0,a.jsx)(o,{service:e}),(0,a.jsxs)("div",{className:"bg-gray-900/50 backdrop-blur-sm border border-green-500/30 rounded-lg p-4",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-white mb-3",children:"\u26a1 Quick Actions"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("button",{className:"w-full py-2 bg-purple-600/20 hover:bg-purple-600/30 text-purple-300 hover:text-white border border-purple-500/30 rounded-lg transition-all text-sm",children:"\ud83e\uddd8 Start Meditation"}),(0,a.jsx)("button",{className:"w-full py-2 bg-blue-600/20 hover:bg-blue-600/30 text-blue-300 hover:text-white border border-blue-500/30 rounded-lg transition-all text-sm",children:"\ud83d\udcca Export Data"}),(0,a.jsx)("button",{onClick:()=>c("consciousness"),className:"w-full py-2 bg-orange-600/20 hover:bg-orange-600/30 text-orange-300 hover:text-white border border-orange-500/30 rounded-lg transition-all text-sm",children:"\ud83e\udde0 Full LabTools"})]})]})]})]}):"consciousness"===l?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"col-span-4 space-y-6 overflow-y-auto",children:[(0,a.jsx)(r.e,{service:e}),(0,a.jsx)(i.Q,{service:e}),(0,a.jsx)(o,{service:e})]}),(0,a.jsxs)("div",{className:"col-span-5 space-y-6 overflow-y-auto",children:[(0,a.jsx)(d.r,{service:e}),(0,a.jsx)(j.Z,{service:e}),(0,a.jsx)(h.x,{service:e})]}),(0,a.jsxs)("div",{className:"col-span-3 space-y-6 overflow-y-auto",children:[(0,a.jsx)(u,{service:e}),(0,a.jsx)(b,{service:e}),(0,a.jsx)(m,{service:e}),(0,a.jsx)(v,{service:e})]})]}):"meditation"===l?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"col-span-4 space-y-6 overflow-y-auto",children:[(0,a.jsx)(_,{service:e}),(0,a.jsx)(C,{service:e})]}),(0,a.jsxs)("div",{className:"col-span-5 space-y-6 overflow-y-auto",children:[(0,a.jsx)(D,{service:e,meditationActive:x,selectedGeometry:"golden_spiral"}),(0,a.jsx)(j.Z,{service:e}),(0,a.jsx)(d.r,{service:e})]}),(0,a.jsxs)("div",{className:"col-span-3 space-y-6 overflow-y-auto",children:[(0,a.jsx)(r.e,{service:e}),(0,a.jsx)(i.Q,{service:e}),(0,a.jsx)(o,{service:e}),(0,a.jsx)(h.x,{service:e}),(0,a.jsx)(v,{service:e})]})]}):"dreams"===l?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"col-span-12",children:(0,a.jsx)(ce,{})})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"col-span-4 space-y-6 overflow-y-auto",children:[(0,a.jsxs)("div",{className:"bg-gray-900/50 backdrop-blur-sm border border-blue-500/30 rounded-lg p-4",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-white mb-3",children:"\ud83c\udfe5 IPP Dashboard"}),(0,a.jsx)("p",{className:"text-gray-300",children:"IPP Dashboard coming soon..."})]}),(0,a.jsxs)("div",{className:"bg-gray-900/50 backdrop-blur-sm border border-blue-500/30 rounded-lg p-4",children:[(0,a.jsxs)("h3",{className:"text-lg font-bold text-white mb-3 flex items-center gap-2",children:["\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d\udc66 Integrated Parenting Protocol",(0,a.jsx)("div",{className:"w-2 h-2 bg-blue-400 rounded-full animate-pulse"})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Active Assessments:"}),(0,a.jsx)("span",{className:"text-blue-400 font-bold",children:"3"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Completed Today:"}),(0,a.jsx)("span",{className:"text-green-400 font-bold",children:"7"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Avg Completion:"}),(0,a.jsx)("span",{className:"text-blue-400 font-bold",children:"18min"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Clinical Reviews:"}),(0,a.jsx)("span",{className:"text-purple-400 font-bold",children:"2 Pending"})]})]})]})]}),(0,a.jsxs)("div",{className:"col-span-5 space-y-6 overflow-y-auto",children:[(0,a.jsxs)("div",{className:"bg-gray-900/50 backdrop-blur-sm border border-blue-500/30 rounded-lg p-4",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-white mb-3",children:"\ud83d\udccb IPP Assessment"}),(0,a.jsx)("p",{className:"text-gray-300",children:"IPP Assessment interface coming soon..."})]}),(0,a.jsxs)("div",{className:"bg-gray-900/50 backdrop-blur-sm border border-blue-500/30 rounded-lg p-4",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-white mb-3",children:"\ud83d\udcca Assessment Progress"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"w-full bg-gray-700 rounded-full h-3",children:(0,a.jsx)("div",{className:"bg-blue-400 h-3 rounded-full",style:{width:"65%"}})}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Earth: Complete"}),(0,a.jsx)("span",{className:"text-gray-400",children:"Water: Complete"}),(0,a.jsx)("span",{className:"text-blue-400",children:"Fire: In Progress"}),(0,a.jsx)("span",{className:"text-gray-500",children:"Air: Pending"}),(0,a.jsx)("span",{className:"text-gray-500",children:"Aether: Pending"})]})]})]}),(0,a.jsx)(j.Z,{service:e})]}),(0,a.jsxs)("div",{className:"col-span-3 space-y-6 overflow-y-auto",children:[(0,a.jsxs)("div",{className:"bg-gray-900/50 backdrop-blur-sm border border-blue-500/30 rounded-lg p-4",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-white mb-3",children:"\ud83c\udfe5 Clinical Tools"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("button",{className:"w-full py-2 bg-blue-600/20 hover:bg-blue-600/30 text-blue-300 hover:text-white border border-blue-500/30 rounded-lg transition-all text-sm",children:"\ud83d\udccb New Assessment"}),(0,a.jsx)("button",{className:"w-full py-2 bg-purple-600/20 hover:bg-purple-600/30 text-purple-300 hover:text-white border border-purple-500/30 rounded-lg transition-all text-sm",children:"\ud83d\udcca Review Results"}),(0,a.jsx)("button",{className:"w-full py-2 bg-green-600/20 hover:bg-green-600/30 text-green-300 hover:text-white border border-green-500/30 rounded-lg transition-all text-sm",children:"\ud83d\udcdd Treatment Plan"}),(0,a.jsx)("button",{className:"w-full py-2 bg-orange-600/20 hover:bg-orange-600/30 text-orange-300 hover:text-white border border-orange-500/30 rounded-lg transition-all text-sm",children:"\u26a0\ufe0f Crisis Protocol"})]})]}),(0,a.jsx)(r.e,{service:e}),(0,a.jsx)(i.Q,{service:e}),(0,a.jsx)(o,{service:e})]})]})}),(0,a.jsx)("footer",{className:"border-t border-purple-500/30 bg-black/50 backdrop-blur-sm px-6 py-2",children:(0,a.jsxs)("div",{className:"flex justify-between items-center text-sm text-purple-300",children:[(0,a.jsxs)("div",{className:"flex gap-6",children:[(0,a.jsx)("span",{children:"\ud83d\udd0c OpenBCI: Connected"}),(0,a.jsx)("span",{children:"\ud83e\udec0 HRV: Active"}),(0,a.jsxs)("span",{children:["\ud83c\udf10 Real-time: ",Math.round(10*Math.random()+90),"ms"]}),"monitor"===l&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:"\ud83d\udcca Live Stream: Active"}),(0,a.jsx)("span",{children:"\u26a1 Breakthrough Detection: Online"}),(0,a.jsxs)("span",{children:["\ud83e\udde0 Neural Analysis: ",Math.round(20*Math.random()+180),"Hz"]})]}),"meditation"===l&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:"\ud83e\uddd8 Sacred Audio: Ready"}),(0,a.jsx)("span",{children:"\ud83d\udd2f Geometry: Active"}),(0,a.jsx)("span",{children:"\u26a1 Breakthrough Detection: Online"})]}),"dreams"===l&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:"\ud83c\udf19 Dreams: Active"}),(0,a.jsx)("span",{children:"\ud83c\udf99\ufe0f Voice Recording: Ready"}),(0,a.jsx)("span",{children:"\ud83d\udd2e DreamWeaver: Online"}),(0,a.jsx)("span",{children:"\ud83e\udde0 Archetypal Analysis: Ready"})]}),"ipp"===l&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:"\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d\udc66 IPP: Active"}),(0,a.jsx)("span",{children:"\ud83d\udccb Assessments: 3 Running"}),(0,a.jsx)("span",{children:"\ud83c\udfe5 Clinical Tools: Ready"}),(0,a.jsx)("span",{children:"\u26a0\ufe0f Safety Monitor: Active"})]})]}),(0,a.jsxs)("div",{className:"text-xs flex gap-4",children:[(0,a.jsxs)("span",{children:["View: ","monitor"===l?"\ud83d\udcca Monitor":"consciousness"===l?"\ud83e\udde0 Consciousness":"meditation"===l?"\ud83e\uddd8 Meditation":"dreams"===l?"\ud83c\udf19 Dreams":"\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d\udc66 IPP"]}),(0,a.jsxs)("span",{children:["Last updated: ",(new Date).toLocaleTimeString()]})]})]})}),(0,a.jsx)(de.N,{isOpen:g,onClose:()=>y(!1),title:"MAIA Field Coherence",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"text-[#E5D6C5] text-sm mb-4",children:"Real-time consciousness field monitoring, elemental balance tracking, and breakthrough trajectory analysis."}),(0,a.jsxs)("div",{className:"bg-gray-900/50 backdrop-blur-sm border border-green-500/30 rounded-lg p-4",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-white mb-3",children:"\ud83c\udf0a Field Coherence Dashboard"}),(0,a.jsx)("p",{className:"text-gray-300",children:"Field coherence monitoring dashboard will be restored soon..."})]})]})})]}):(0,a.jsx)("div",{className:"h-screen bg-black flex items-center justify-center",children:(0,a.jsx)("div",{className:"text-white text-2xl",children:"\ud83e\udde0 Initializing Guardian Protocol..."})})}},88166:function(e,t,s){"use strict";s.d(t,{biometricStorage:function(){return n}});const a="healthData";const n=new class{async init(){return this.isInitialized&&this.db?Promise.resolve():(this.initPromise||(this.initPromise=new Promise(((e,t)=>{const s=indexedDB.open("MAIA_Biometrics",1);s.onerror=()=>{console.error("\u274c Failed to open IndexedDB:",s.error),this.initPromise=null,t(s.error)},s.onsuccess=()=>{this.db=s.result,this.isInitialized=!0,this.initPromise=null,console.log("\u2705 Biometric storage initialized"),e()},s.onupgradeneeded=e=>{const t=e.target.result;if(!t.objectStoreNames.contains(a)){const e=t.createObjectStore(a,{keyPath:"id",autoIncrement:!0});e.createIndex("timestamp","timestamp",{unique:!1}),e.createIndex("type","type",{unique:!1}),console.log("\ud83d\udd27 Created biometric data store")}}}))),this.initPromise)}async storeHealthData(e){if(this.db||await this.init(),!this.db)throw new Error("Database not initialized");const t=this.db.transaction([a],"readwrite").objectStore(a),s={timestamp:new Date,type:"apple_health_import",data:e,recordCount:{hrv:e.hrv.length,heartRate:e.heartRate.length,sleep:e.sleep.length,respiratory:e.respiratory.length}};return new Promise(((e,a)=>{const n=t.add(s);n.onsuccess=()=>{console.log("\u2705 Health data stored locally:",s.recordCount),e()},n.onerror=()=>{console.error("\u274c Failed to store health data:",n.error),a(n.error)}}))}async getLatestHealthData(){if(this.db||await this.init(),!this.db)return null;const e=this.db.transaction([a],"readonly").objectStore(a).index("timestamp");return new Promise(((t,s)=>{const a=e.openCursor(null,"prev");a.onsuccess=()=>{const e=a.result;if(e){const s=e.value;"apple_health_import"===s.type?t(s.data):e.continue()}else t(null)},a.onerror=()=>{console.error("\u274c Failed to retrieve health data:",a.error),s(a.error)}}))}async getLatestHRV(){const e=await this.getLatestHealthData();return e&&0!==e.hrv.length?e.hrv[0]:null}async clearAllData(){if(this.db||await this.init(),!this.db)throw new Error("Database not initialized");const e=this.db.transaction([a],"readwrite").objectStore(a);return new Promise(((t,s)=>{const a=e.clear();a.onsuccess=()=>{console.log("\ud83d\uddd1\ufe0f All biometric data cleared"),t()},a.onerror=()=>{console.error("\u274c Failed to clear data:",a.error),s(a.error)}}))}async hasHealthData(){const e=await this.getLatestHealthData();return null!==e&&e.hrv.length>0}constructor(){this.db=null,this.isInitialized=!1,this.initPromise=null}}}},function(e){e.O(0,[7040,2489,2034,6623,2971,2117,1744],(function(){return t=89588,e(e.s=t);var t}));var t=e.O();_N_E=t}]);