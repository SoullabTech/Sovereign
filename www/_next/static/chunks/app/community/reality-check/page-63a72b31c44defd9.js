(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4627],{29397:function(e,t,s){Promise.resolve().then(s.bind(s,30463))},30463:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return i}});var n=s(57437),r=s(2265),a=s(88170);function i(){const e=new a.VV,[t,s]=(0,r.useState)([]),[i,o]=(0,r.useState)(!0),[d,u]=(0,r.useState)(null),[m,x]=(0,r.useState)(!1),[p,h]=(0,r.useState)("all"),[g,y]=(0,r.useState)({type:"reality_check_request",title:"",content:"",visibility:"supportive",tags:[]});(0,r.useEffect)((()=>{b()}),[p]);const b=async()=>{try{const t=await e.getCurrentUser();if(!t)return;u(t);const n=await fetch("/api/community/interactions?filter=".concat(p));if(n.ok){const e=await n.json();s(e)}}catch(t){console.error("Community data loading error:",t)}finally{o(!1)}},j=async(e,t,s)=>{try{(await fetch("/api/community/interactions/".concat(e,"/respond"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({response_type:t,content:s,user_id:d.id})})).ok&&b()}catch(n){console.error("Response submission error:",n)}},v=async(e,t)=>{try{(await fetch("/api/community/interactions/".concat(e,"/flag"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reason:t})})).ok&&b()}catch(s){console.error("Flag submission error:",s)}};return i?(0,n.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,n.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):(0,n.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,n.jsx)("header",{className:"bg-white shadow-sm border-b",children:(0,n.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,n.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:"Community Reality-Checking"}),(0,n.jsx)("p",{className:"text-sm text-gray-600",children:"Support each other's integration through grounded feedback"})]}),(0,n.jsx)("button",{onClick:()=>x(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Share / Ask"})]})})}),(0,n.jsx)("div",{className:"bg-white border-b",children:(0,n.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,n.jsx)("nav",{className:"flex space-x-8",children:[{id:"all",label:"All Posts"},{id:"reality_check",label:"Reality Checks"},{id:"integration_validation",label:"Integration Support"},{id:"struggle_support",label:"Struggle Support"},{id:"ordinary_moment_sharing",label:"Ordinary Moments"}].map((e=>(0,n.jsx)("button",{onClick:()=>h(e.id),className:"py-4 px-1 border-b-2 font-medium text-sm ".concat(p===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"),children:e.label},e.id)))})})}),(0,n.jsxs)("main",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[(0,n.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[(0,n.jsx)("h3",{className:"font-medium text-blue-900 mb-2",children:"Community Guidelines"}),(0,n.jsxs)("ul",{className:"text-sm text-blue-800 space-y-1",children:[(0,n.jsx)("li",{children:"\u2022 Focus on reality-grounding and practical application"}),(0,n.jsx)("li",{children:"\u2022 Celebrate ordinary moments and consistent practices"}),(0,n.jsx)("li",{children:"\u2022 Gently redirect spiritual bypassing with compassion"}),(0,n.jsx)("li",{children:"\u2022 Share struggles and mistakes as sources of wisdom"}),(0,n.jsx)("li",{children:"\u2022 Validate the slow, spiral nature of growth"})]})]}),m&&(0,n.jsx)(l,{post:g,onChange:y,onSubmit:async()=>{if(d&&g.title.trim()&&g.content.trim())try{(await fetch("/api/community/interactions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:d.id,interaction_type:g.type,content:JSON.stringify({title:g.title,content:g.content,tags:g.tags}),context:g.context,group_context:"general",visibility:g.visibility})})).ok&&(x(!1),y({type:"reality_check_request",title:"",content:"",visibility:"supportive",tags:[]}),b())}catch(e){console.error("Post submission error:",e)}},onCancel:()=>x(!1)}),(0,n.jsx)("div",{className:"space-y-6",children:t.length>0?t.map((e=>(0,n.jsx)(c,{interaction:e,currentUser:d,onRespond:j,onFlag:v},e.id))):(0,n.jsxs)("div",{className:"text-center py-12",children:[(0,n.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No community interactions yet"}),(0,n.jsx)("p",{className:"text-gray-600 mb-4",children:"Be the first to share or ask for reality-checking support"}),(0,n.jsx)("button",{onClick:()=>x(!0),className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:"Start a Conversation"})]})})]})]})}const l=e=>{let{post:t,onChange:s,onSubmit:r,onCancel:a}=e;return(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6 mb-6",children:[(0,n.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Share with Community"}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Post Type"}),(0,n.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[{value:"reality_check_request",label:"Reality Check Request",description:"Ask for grounding perspective on an insight or experience"},{value:"integration_share",label:"Integration Share",description:"Share how you&apos;re applying insights in daily life"},{value:"struggle_support",label:"Struggle Support",description:"Share challenges and seek supportive feedback"},{value:"ordinary_moment",label:"Ordinary Moment",description:"Celebrate awareness in mundane daily experiences"}].map((e=>(0,n.jsxs)("label",{className:"flex items-start space-x-3 cursor-pointer p-3 border rounded-lg hover:bg-gray-50",children:[(0,n.jsx)("input",{type:"radio",name:"postType",value:e.value,checked:t.type===e.value,onChange:e=>s({...t,type:e.target.value}),className:"mt-1 text-blue-600 focus:ring-blue-500"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.label}),(0,n.jsx)("div",{className:"text-xs text-gray-600",children:e.description})]})]},e.value)))})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title"}),(0,n.jsx)("input",{type:"text",value:t.title,onChange:e=>s({...t,title:e.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Brief, descriptive title..."})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Content"}),(0,n.jsx)("textarea",{value:t.content,onChange:e=>s({...t,content:e.target.value}),rows:4,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Share your experience, insight, or question. Include practical details about how this shows up in your daily life..."})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Visibility"}),(0,n.jsxs)("div",{className:"flex space-x-4",children:[(0,n.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,n.jsx)("input",{type:"radio",name:"visibility",value:"supportive",checked:"supportive"===t.visibility,onChange:e=>s({...t,visibility:e.target.value}),className:"text-blue-600 focus:ring-blue-500"}),(0,n.jsx)("span",{className:"text-sm text-gray-700",children:"Supportive Community"})]}),(0,n.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,n.jsx)("input",{type:"radio",name:"visibility",value:"open",checked:"open"===t.visibility,onChange:e=>s({...t,visibility:e.target.value}),className:"text-blue-600 focus:ring-blue-500"}),(0,n.jsx)("span",{className:"text-sm text-gray-700",children:"Open Community"})]})]})]}),(0,n.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,n.jsx)("button",{onClick:a,className:"border border-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,n.jsx)("button",{onClick:r,disabled:!t.title.trim()||!t.content.trim(),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Share"})]})]})]})},c=e=>{let{interaction:t,currentUser:s,onRespond:a,onFlag:i}=e;var l;const[c,o]=(0,r.useState)(!1),[d,u]=(0,r.useState)(""),[m,x]=(0,r.useState)("supportive");let p;try{p=JSON.parse(t.content)}catch(h){p={title:"Community Share",content:t.content}}return(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,n.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,n.jsx)("span",{className:"text-2xl",children:(e=>{switch(e){case"reality_check":return"\ud83d\udd0d";case"integration_validation":return"\ud83c\udf31";case"struggle_support":return"\ud83d\udcaa";case"ordinary_moment_sharing":return"\u2728";case"bypassing_concern":return"\u26a0\ufe0f";default:return"\ud83d\udcac"}})(t.interaction_type)}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"font-medium text-gray-900",children:p.title}),(0,n.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[(0,n.jsx)("span",{children:(null===(l=t.user_profiles)||void 0===l?void 0:l.display_name)||"Anonymous"}),(0,n.jsx)("span",{children:"\u2022"}),(0,n.jsx)("span",{children:(e=>{switch(e){case"reality_check":return"Reality Check Request";case"integration_validation":return"Integration Share";case"struggle_support":return"Struggle Support";case"ordinary_moment_sharing":return"Ordinary Moment";case"bypassing_concern":return"Bypassing Concern";default:return"Community Share"}})(t.interaction_type)}),(0,n.jsx)("span",{children:"\u2022"}),(0,n.jsx)("span",{children:new Date(t.created_at).toLocaleDateString()})]})]})]}),(0,n.jsx)("button",{onClick:()=>i(t.id,"inappropriate"),className:"text-gray-400 hover:text-gray-600 text-sm",children:"Flag"})]}),(0,n.jsx)("div",{className:"prose max-w-none mb-4",children:(0,n.jsx)("p",{className:"text-gray-700",children:p.content})}),(0,n.jsxs)("div",{className:"flex items-center space-x-6 text-sm text-gray-600 mb-4",children:[(0,n.jsxs)("span",{children:[t.helpful_count," helpful"]}),(0,n.jsxs)("span",{children:[t.reality_grounding_count," reality grounding"]}),t.bypassing_concern_count>0&&(0,n.jsxs)("span",{className:"text-amber-600",children:[t.bypassing_concern_count," bypassing concerns"]})]}),c?(0,n.jsx)("div",{className:"border-t pt-4",children:(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Response Type"}),(0,n.jsxs)("select",{value:m,onChange:e=>x(e.target.value),className:"border border-gray-300 rounded px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,n.jsx)("option",{value:"supportive",children:"Supportive Feedback"}),(0,n.jsx)("option",{value:"reality_grounding",children:"Reality Grounding"}),(0,n.jsx)("option",{value:"shared_experience",children:"Shared Experience"}),(0,n.jsx)("option",{value:"question",children:"Clarifying Question"}),(0,n.jsx)("option",{value:"bypassing_concern",children:"Bypassing Concern"})]})]}),(0,n.jsx)("textarea",{value:d,onChange:e=>u(e.target.value),rows:3,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Share your perspective, experience, or gentle reality-check..."}),(0,n.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,n.jsx)("button",{onClick:()=>o(!1),className:"text-gray-600 px-3 py-1 text-sm hover:text-gray-800",children:"Cancel"}),(0,n.jsx)("button",{onClick:()=>{d.trim()&&(a(t.id,m,d),u(""),o(!1))},disabled:!d.trim(),className:"bg-blue-600 text-white px-4 py-2 rounded text-sm hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Respond"})]})]})}):(0,n.jsx)("div",{className:"border-t pt-4",children:(0,n.jsx)("button",{onClick:()=>o(!0),className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"Respond"})}),t.responses&&t.responses.length>0&&(0,n.jsxs)("div",{className:"border-t pt-4 mt-4",children:[(0,n.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Community Responses"}),(0,n.jsx)("div",{className:"space-y-3",children:t.responses.slice(0,3).map(((e,t)=>(0,n.jsxs)("div",{className:"bg-gray-50 rounded p-3",children:[(0,n.jsxs)("div",{className:"flex justify-between items-start mb-1",children:[(0,n.jsx)("span",{className:"text-sm font-medium text-gray-900",children:e.user_name||"Anonymous"}),(0,n.jsx)("span",{className:"text-xs text-gray-500",children:e.type})]}),(0,n.jsx)("p",{className:"text-sm text-gray-700",children:e.content})]},t)))})]})]})}},88170:function(e,t,s){"use strict";s.d(t,{VV:function(){return n}});class n{async getCurrentUser(){const e=await async function(){return{user:{id:"demo-user",email:"demo@example.com",name:"Demo User"}}}();return(null===e||void 0===e?void 0:e.user)||null}async signIn(e){return async function(e){return{success:!0}}()}async signOut(){return async function(){return{success:!0}}()}}}},function(e){e.O(0,[2971,2117,1744],(function(){return t=29397,e(e.s=t);var t}));var t=e.O();_N_E=t}]);