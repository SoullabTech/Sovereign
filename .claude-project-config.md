# Claude Code Project Configuration - MAIA Sovereign

## üö® **CRITICAL FOR ALL CLAUDE CODE SESSIONS** üö®

### ‚ö†Ô∏è **STOP! READ THIS FIRST!**
**ALWAYS work in MAIA-SOVEREIGN repository!**
- **Production Repository**: `/Users/soullab/MAIA-SOVEREIGN/` ‚Üê **THIS ONE!**
- **DO NOT work in**: MAIA-PAI, MAIA-PAI-SOVEREIGN, or any other repository

## Repository Identity
- **Primary Repository**: MAIA-Sovereign (`/Users/soullab/MAIA-SOVEREIGN`) ‚Üê **PRODUCTION**
- **GitHub Remote**: https://github.com/SoullabTech/Sovereign.git
- **Project Name**: spiralogic-oracle-system
- **Build Environment**: MAIA-Pai-Sovereign (separate build environment - **NOT FOR PRODUCTION**)
- **Development Environment**: MAIA-Sovereign (this repository - **USE THIS**)

## üö® CRITICAL: Deployment Infrastructure (Updated 2025)

### ‚úÖ CURRENT DEPLOYMENT STACK
- **Production Domain**: https://soullab.life
- **Infrastructure**: Docker Compose + Direct Server Hosting
- **Reverse Proxy**: Nginx with SSL/TLS termination
- **Database**: Supabase (managed PostgreSQL)
- **Cache/Sessions**: Redis
- **Monitoring**: Prometheus + Grafana
- **Voice Chat**: TURN server for WebRTC

### ‚ùå NO LONGER USED - DO NOT REFERENCE
- **Vercel**: Not used for deployment
- **Cloudflare**: Not used for proxy/CDN
- **Traditional databases**: Using Supabase instead

### üê≥ Docker-Based Production Services
```yaml
Services Running:
- web:        MAIA application (port 3002 ‚Üí 3000)
- redis:      Session storage (port 6379)
- nginx:      SSL proxy (ports 80/443)
- prometheus: Metrics (port 9090)
- grafana:    Monitoring (port 3001)
- coturn:     Voice chat TURN server
```

## Working Directory Protocol

### ‚úÖ CORRECT - Primary Development Repository
```bash
/Users/soullab/MAIA-SOVEREIGN/
```

### ‚ùå AVOID - Build Environment Paths
```bash
/Users/soullab/MAIA-PAI-SOVEREIGN/
/Users/soullab/MAIA-PAI-SOVEREIGN/
```

## Build Commands by Context

### Development (Current Repository)
```bash
npm run dev                    # Standard development server
npm run build                  # Standard build with validation
npm run build:sovereign        # Sovereign-specific build
npm run typecheck              # Type checking
```

### Quality Assurance
```bash
npm run verify:claude          # Verify Claude project structure
npm run check:sovereignty      # Check MAIA sovereignty
npm run audit:sovereignty      # Forensic sovereignty audit
```

## Port Management
- **Development**: Port 3000 (primary)
- **Alternative**: Port 3005/3006 (with ESLint disabled)
- **Desktop**: Concurrent with electron

## Working Directory Validation Commands
```bash
pwd                           # Verify current directory
git remote -v                 # Verify GitHub remote
npm run verify:claude         # Validate project structure
```

## Claude Code Best Practices

1. **Always verify working directory** before major operations
2. **Use repository-specific build commands** (`build:sovereign`)
3. **Check git remote** to confirm correct repository
4. **Use port 3005+ for development** when ESLint conflicts arise
5. **Reference MAIA-Sovereign in all documentation and planning**

## Consciousness Implementation Context
- All Gebser framework implementations belong in `/lib/consciousness/`
- Documentation goes in `/docs/consciousness/`
- Integration points with existing oracle system in `/app/api/oracle/`
- Testing and validation in respective test directories

## üÜï **RECENT CRITICAL UPDATES (December 2025)**

### ‚úÖ **IPP (Ideal Parenting Protocol) Integration RESTORED**
- **Location**: `/lib/services/spiralogicIPPKnowledge.ts`
- **Status**: ‚úÖ Fully functional in MAIA-SOVEREIGN
- **API Integration**: `/app/api/oracle/conversation/route.ts`
- **Auto-detection**: Parenting/attachment topics trigger IPP context
- **Test Script**: `test-ipp-integration.js`

### ‚úÖ **soullab.life Production Fix Applied**
- **Issue**: Site was serving 404 errors (wrong build)
- **Fix**: Docker container rebuilt from correct MAIA-SOVEREIGN source
- **Status**: ‚úÖ Working - serves proper Next.js application
- **TypeScript Fix**: Fixed `enableMemory` variable assignment in memory route

### ‚ö†Ô∏è **Common Recent Mistakes to AVOID**
1. **Working in wrong repository** - Always use MAIA-SOVEREIGN
2. **Assuming IPP is missing** - It's fully integrated, just check the files
3. **Using old deployment methods** - Use Docker compose for production
4. **Forgetting to verify working directory** - Always `pwd` first

## üîß **Quick Verification Commands**
```bash
# 1. Verify you're in the right place
pwd  # Should show: /Users/soullab/MAIA-SOVEREIGN

# 2. Verify IPP integration
ls lib/services/spiralogicIPPKnowledge.ts  # Should exist

# 3. Verify soullab.life is working
curl -I http://soullab.life  # Should return 200 OK

# 4. Test IPP integration
node test-ipp-integration.js  # Should show tests passing
```

This configuration ensures Claude Code maintains consistent focus on the correct repository structure and build environment.